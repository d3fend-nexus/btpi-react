[0;32m[2025-07-18 17:05:11] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-07-18 17:05:11] [INFO][0m Deployment ID: d7e79415-ee8d-46af-97e9-8b66e4351d86
[0;32m[2025-07-18 17:05:11] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-07-18 17:05:11] [INFO][0m Docker not found. Installing Docker...
[0;32m[2025-07-18 17:05:11] [INFO][0m Installing Docker Engine...
[0;32m[2025-07-18 17:06:16] [INFO][0m Added cmndcntrl to docker group
[0;36m[2025-07-18 17:06:16] [SUCCESS][0m Docker installation completed
[0;32m[2025-07-18 17:06:16] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-07-18 17:06:16] [INFO][0m System Resources:
[0;32m[2025-07-18 17:06:16] [INFO][0m   CPU Cores: 8
[0;32m[2025-07-18 17:06:16] [INFO][0m   Memory: 26GB
[0;32m[2025-07-18 17:06:16] [INFO][0m   Available Disk: 197GB
[0;32m[2025-07-18 17:06:16] [INFO][0m Checking for port conflicts...
[0;36m[2025-07-18 17:06:17] [SUCCESS][0m No port conflicts detected
[0;36m[2025-07-18 17:06:18] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-07-18 17:06:18] [INFO][0m Installing additional system packages...
[0;32m[2025-07-18 19:09:01] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-07-18 19:09:01] [INFO][0m Deployment ID: 268202aa-450a-4d3c-9231-3b59eb4f8a0b
[0;32m[2025-07-18 19:09:01] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-07-18 19:09:01] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-07-18 19:09:02] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-07-18 19:09:02] [INFO][0m System Resources:
[0;32m[2025-07-18 19:09:02] [INFO][0m   CPU Cores: 8
[0;32m[2025-07-18 19:09:02] [INFO][0m   Memory: 26GB
[0;32m[2025-07-18 19:09:02] [INFO][0m   Available Disk: 196GB
[0;32m[2025-07-18 19:09:02] [INFO][0m Checking for port conflicts...
[0;36m[2025-07-18 19:09:03] [SUCCESS][0m No port conflicts detected
[0;36m[2025-07-18 19:09:03] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-07-18 19:09:03] [INFO][0m Installing additional system packages...
[0;32m[2025-07-18 19:12:36] [INFO][0m Installing Docker Compose standalone...
[0;36m[2025-07-18 19:12:38] [SUCCESS][0m System packages installed
[0;32m[2025-07-18 19:12:38] [INFO][0m Applying system optimizations...
[0;32m[2025-07-18 22:29:36] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-07-18 22:29:36] [INFO][0m Deployment ID: 43adf896-ce2f-408c-9e21-c25869e99a4c
[0;32m[2025-07-18 22:29:36] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-07-18 22:29:36] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-07-18 22:29:36] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-07-18 22:29:36] [INFO][0m System Resources:
[0;32m[2025-07-18 22:29:36] [INFO][0m   CPU Cores: 8
[0;32m[2025-07-18 22:29:36] [INFO][0m   Memory: 26GB
[0;32m[2025-07-18 22:29:36] [INFO][0m   Available Disk: 196GB
[0;32m[2025-07-18 22:29:36] [INFO][0m Checking for port conflicts...
[0;36m[2025-07-18 22:29:37] [SUCCESS][0m No port conflicts detected
[0;36m[2025-07-18 22:29:37] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-07-18 22:29:37] [INFO][0m Installing additional system packages...
[0;36m[2025-07-18 22:29:48] [SUCCESS][0m System packages installed
[0;32m[2025-07-18 22:29:48] [INFO][0m Applying system optimizations...
[0;32m[2025-07-18 22:54:49] [INFO][0m Starting BTPI-REACT simplified deployment v2.0.1...
[0;32m[2025-07-18 22:54:49] [INFO][0m Deployment ID: 8b434665-7cad-4337-a611-0b24ae3f4fc0
[0;32m[2025-07-18 22:54:49] [INFO][0m Running simplified pre-deployment checks...
[0;32m[2025-07-18 22:54:49] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-07-18 22:54:50] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-07-18 22:54:50] [INFO][0m System Resources:
[0;32m[2025-07-18 22:54:50] [INFO][0m   CPU Cores: 8
[0;32m[2025-07-18 22:54:50] [INFO][0m   Memory: 26GB
[0;32m[2025-07-18 22:54:50] [INFO][0m   Available Disk: 196GB
[0;36m[2025-07-18 22:54:50] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-07-18 22:54:50] [INFO][0m Initializing directory structure...
[0;36m[2025-07-18 22:54:50] [SUCCESS][0m Directory structure initialized
[0;32m[2025-07-18 22:54:50] [INFO][0m Generating secrets and certificates...
[0;36m[2025-07-18 22:54:50] [SUCCESS][0m Environment configuration generated
[0;32m[2025-07-21 09:37:29] [INFO][0m Starting BTPI-REACT simplified deployment v2.0.1...
[0;32m[2025-07-21 09:37:29] [INFO][0m Deployment ID: 03118645-4629-4e95-be1c-86f2e4869ba7
[0;32m[2025-07-21 09:37:29] [INFO][0m Running simplified pre-deployment checks...
[0;32m[2025-07-21 09:37:29] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-07-21 09:37:29] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-07-21 09:37:29] [INFO][0m System Resources:
[0;32m[2025-07-21 09:37:29] [INFO][0m   CPU Cores: 8
[0;32m[2025-07-21 09:37:29] [INFO][0m   Memory: 26GB
[0;32m[2025-07-21 09:37:29] [INFO][0m   Available Disk: 196GB
[0;36m[2025-07-21 09:37:29] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-07-21 09:37:29] [INFO][0m Initializing directory structure...
[0;36m[2025-07-21 09:37:29] [SUCCESS][0m Directory structure initialized
[0;32m[2025-07-21 09:37:29] [INFO][0m Generating secrets and certificates...
[0;32m[2025-07-21 09:37:29] [INFO][0m Environment configuration already exists
[0;32m[2025-07-21 21:29:16] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-07-21 21:29:16] [INFO][0m Deployment ID: 9f455896-2363-4385-bacc-565ca7751595
[0;32m[2025-07-21 21:29:16] [INFO][0m Backing up existing deployment...
[0;36m[2025-07-21 21:29:16] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250721_212916.tar.gz
[0;32m[2025-07-21 21:29:16] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-07-21 21:29:16] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-07-21 21:29:16] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-07-21 21:29:16] [INFO][0m System Resources:
[0;32m[2025-07-21 21:29:16] [INFO][0m   CPU Cores: 8
[0;32m[2025-07-21 21:29:16] [INFO][0m   Memory: 26GB
[0;32m[2025-07-21 21:29:16] [INFO][0m   Available Disk: 196GB
[0;32m[2025-07-21 21:29:16] [INFO][0m Checking for port conflicts...
[0;36m[2025-07-21 21:29:17] [SUCCESS][0m No port conflicts detected
[0;36m[2025-07-21 21:29:17] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-07-21 21:29:17] [INFO][0m Installing additional system packages...
[0;36m[2025-07-21 21:29:35] [SUCCESS][0m System packages installed
[0;32m[2025-07-21 21:29:35] [INFO][0m Applying system optimizations...
[0;32m[2025-08-06 10:27:48] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-06 10:27:48] [INFO][0m Deployment ID: e7a09dd7-4224-4255-8d8e-d9c334d25544
[0;32m[2025-08-06 10:27:48] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-06 10:27:48] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250806_102748.tar.gz
[0;32m[2025-08-06 10:27:48] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-06 10:27:49] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-06 10:27:50] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-06 10:27:50] [INFO][0m System Resources:
[0;32m[2025-08-06 10:27:50] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-06 10:27:50] [INFO][0m   Memory: 26GB
[0;32m[2025-08-06 10:27:50] [INFO][0m   Available Disk: 196GB
[0;32m[2025-08-06 10:27:50] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-06 10:27:51] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-06 10:27:51] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-06 10:27:51] [INFO][0m Installing additional system packages...
[0;36m[2025-08-06 10:28:01] [SUCCESS][0m System packages installed
[0;32m[2025-08-06 10:28:01] [INFO][0m Applying system optimizations...
[0;32m[2025-08-06 11:29:08] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-06 11:29:08] [INFO][0m Deployment ID: f6f9c9f7-0db8-4817-bc49-29bbc3f0fe35
[0;32m[2025-08-06 11:29:08] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-06 11:29:08] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250806_112908.tar.gz
[0;32m[2025-08-06 11:29:08] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-06 11:29:08] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-06 11:29:09] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-06 11:29:09] [INFO][0m System Resources:
[0;32m[2025-08-06 11:29:09] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-06 11:29:09] [INFO][0m   Memory: 26GB
[0;32m[2025-08-06 11:29:09] [INFO][0m   Available Disk: 196GB
[0;32m[2025-08-06 11:29:09] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-06 11:29:10] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-06 11:29:10] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-06 11:29:10] [INFO][0m Installing additional system packages...
[0;36m[2025-08-06 11:29:18] [SUCCESS][0m System packages installed
[0;32m[2025-08-06 11:29:18] [INFO][0m Applying system optimizations...
[0;32m[2025-08-06 11:30:57] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-06 11:30:57] [INFO][0m Deployment ID: 1cdbab22-3919-425a-8b45-59e15899c1b9
[0;32m[2025-08-06 11:30:57] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-06 11:30:57] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250806_113057.tar.gz
[0;32m[2025-08-06 11:30:57] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-06 11:30:57] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-06 11:30:57] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-06 11:30:57] [INFO][0m System Resources:
[0;32m[2025-08-06 11:30:57] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-06 11:30:57] [INFO][0m   Memory: 26GB
[0;32m[2025-08-06 11:30:57] [INFO][0m   Available Disk: 196GB
[0;32m[2025-08-06 11:30:57] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-06 11:30:58] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-06 11:30:58] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-06 11:30:58] [INFO][0m Installing additional system packages...
[0;36m[2025-08-06 11:31:01] [SUCCESS][0m System packages installed
[0;32m[2025-08-06 11:31:01] [INFO][0m Applying system optimizations...
[0;32m[2025-08-14 23:27:19] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-14 23:27:19] [INFO][0m Deployment ID: 97100d04-4126-4f31-a6c7-0b2d28c422d6
[0;32m[2025-08-14 23:27:19] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-14 23:27:19] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250814_232719.tar.gz
[0;32m[2025-08-14 23:27:19] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-14 23:27:20] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-14 23:27:22] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-14 23:27:22] [INFO][0m System Resources:
[0;32m[2025-08-14 23:27:22] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-14 23:27:22] [INFO][0m   Memory: 26GB
[0;32m[2025-08-14 23:27:22] [INFO][0m   Available Disk: 196GB
[0;32m[2025-08-14 23:27:22] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-14 23:27:32] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-14 23:27:33] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-14 23:27:33] [INFO][0m Installing additional system packages...
[0;36m[2025-08-14 23:27:37] [SUCCESS][0m System packages installed
[0;32m[2025-08-14 23:27:37] [INFO][0m Applying system optimizations...
[0;32m[2025-08-14 23:32:06] [INFO][0m Starting BTPI-REACT simplified deployment v2.0.1...
[0;32m[2025-08-14 23:32:06] [INFO][0m Deployment ID: 497e9633-d849-46c3-8ce5-e09e02497900
[0;32m[2025-08-14 23:32:06] [INFO][0m Running simplified pre-deployment checks...
[0;32m[2025-08-14 23:32:06] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-14 23:32:07] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-14 23:32:07] [INFO][0m System Resources:
[0;32m[2025-08-14 23:32:07] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-14 23:32:07] [INFO][0m   Memory: 26GB
[0;32m[2025-08-14 23:32:07] [INFO][0m   Available Disk: 195GB
[0;36m[2025-08-14 23:32:07] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-14 23:32:07] [INFO][0m Initializing directory structure...
[0;36m[2025-08-14 23:32:07] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-14 23:32:07] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-14 23:32:07] [INFO][0m Environment configuration already exists
[0;32m[2025-08-14 23:32:07] [INFO][0m Generating SSL certificates...
[0;36m[2025-08-14 23:32:10] [SUCCESS][0m SSL certificates generated
[0;32m[2025-08-14 23:32:10] [INFO][0m Creating Docker network...
[0;32m[2025-08-14 23:34:46] [INFO][0m Starting BTPI-REACT simplified deployment v2.0.1...
[0;32m[2025-08-14 23:34:46] [INFO][0m Deployment ID: c5363be6-6e81-4b83-87b8-72ed4eb43177
[0;32m[2025-08-14 23:34:46] [INFO][0m Running simplified pre-deployment checks...
[0;32m[2025-08-14 23:34:46] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-14 23:34:46] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-14 23:34:46] [INFO][0m System Resources:
[0;32m[2025-08-14 23:34:46] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-14 23:34:46] [INFO][0m   Memory: 26GB
[0;32m[2025-08-14 23:34:46] [INFO][0m   Available Disk: 195GB
[0;36m[2025-08-14 23:34:46] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-14 23:34:46] [INFO][0m Initializing directory structure...
[0;36m[2025-08-14 23:34:46] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-14 23:34:46] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-14 23:34:46] [INFO][0m Environment configuration already exists
[0;32m[2025-08-14 23:34:46] [INFO][0m SSL certificates already exist
[0;32m[2025-08-14 23:34:46] [INFO][0m Creating Docker network...
[0;36m[2025-08-14 23:34:47] [SUCCESS][0m Docker network 'btpi-network' created
[0;32m[2025-08-14 23:34:47] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-14 23:34:47] [INFO][0m Deploying existing services...
[0;32m[2025-08-14 23:34:47] [INFO][0m Deploying Kasm Workspaces...
[0;32m[2025-08-14 23:39:18] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-14 23:39:18] [INFO][0m Deployment ID: e0d9c3d4-c61e-4912-8760-671f511d67da
[0;32m[2025-08-14 23:39:18] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-14 23:39:18] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250814_233918.tar.gz
[0;32m[2025-08-14 23:39:18] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-14 23:39:18] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-14 23:39:18] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-14 23:39:18] [INFO][0m System Resources:
[0;32m[2025-08-14 23:39:18] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-14 23:39:18] [INFO][0m   Memory: 26GB
[0;32m[2025-08-14 23:39:18] [INFO][0m   Available Disk: 194GB
[0;32m[2025-08-14 23:39:18] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-14 23:39:28] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-14 23:39:28] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-14 23:39:28] [INFO][0m Installing additional system packages...
[0;36m[2025-08-14 23:39:32] [SUCCESS][0m System packages installed
[0;32m[2025-08-14 23:39:32] [INFO][0m Applying system optimizations...
[0;32m[2025-08-14 23:44:00] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-14 23:44:00] [INFO][0m Deployment ID: 3c004f0b-86eb-493d-9866-7a069813805b
[0;32m[2025-08-14 23:44:00] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-14 23:44:00] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250814_234400.tar.gz
[0;32m[2025-08-14 23:44:00] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-14 23:44:00] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-14 23:44:00] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-14 23:44:00] [INFO][0m System Resources:
[0;32m[2025-08-14 23:44:00] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-14 23:44:00] [INFO][0m   Memory: 26GB
[0;32m[2025-08-14 23:44:00] [INFO][0m   Available Disk: 190GB
[0;32m[2025-08-14 23:44:00] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-14 23:44:11] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-14 23:44:11] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-14 23:44:11] [INFO][0m Installing additional system packages...
[0;36m[2025-08-14 23:44:16] [SUCCESS][0m System packages installed
[0;32m[2025-08-14 23:44:16] [INFO][0m Applying system optimizations...
[0;36m[2025-08-14 23:44:24] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-14 23:44:24] [INFO][0m Initializing directory structure...
[0;36m[2025-08-14 23:44:24] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-14 23:44:24] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-14 23:44:24] [INFO][0m Environment configuration already exists
[0;32m[2025-08-14 23:44:24] [INFO][0m SSL certificates already exist
[0;32m[2025-08-14 23:44:24] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-14 23:44:24] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-14 23:44:24] [INFO][0m Creating Docker network...
[0;32m[2025-08-14 23:44:24] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-14 23:44:24] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-14 23:44:24] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-14 23:44:24] [INFO][0m Deploying cassandra...
[0;34m[2025-08-14 23:44:24] [DEBUG][0m Using legacy deployment method for cassandra
[1;33m[2025-08-14 23:44:24] [WARN][0m No deployment method found for cassandra
[0;34m[2025-08-14 23:44:24] [DEBUG][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-14 23:44:24] [DEBUG][0m Attempt 1/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:44:34] [DEBUG][0m Attempt 2/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:44:44] [DEBUG][0m Attempt 3/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:44:54] [DEBUG][0m Attempt 4/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:45:04] [DEBUG][0m Attempt 5/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:45:14] [DEBUG][0m Attempt 6/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:45:24] [DEBUG][0m Attempt 7/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:45:34] [DEBUG][0m Attempt 8/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:45:44] [DEBUG][0m Attempt 9/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:45:54] [DEBUG][0m Attempt 10/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:46:04] [DEBUG][0m Attempt 11/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:46:14] [DEBUG][0m Attempt 12/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:46:24] [DEBUG][0m Attempt 13/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:46:34] [DEBUG][0m Attempt 14/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:46:44] [DEBUG][0m Attempt 15/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:46:54] [DEBUG][0m Attempt 16/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:47:05] [DEBUG][0m Attempt 17/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:47:15] [DEBUG][0m Attempt 18/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:47:25] [DEBUG][0m Attempt 19/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:47:35] [DEBUG][0m Attempt 20/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:47:45] [DEBUG][0m Attempt 21/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:47:55] [DEBUG][0m Attempt 22/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:48:05] [DEBUG][0m Attempt 23/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:48:15] [DEBUG][0m Attempt 24/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:48:25] [DEBUG][0m Attempt 25/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:48:35] [DEBUG][0m Attempt 26/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:48:45] [DEBUG][0m Attempt 27/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:48:55] [DEBUG][0m Attempt 28/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:49:05] [DEBUG][0m Attempt 29/30: cassandra not ready, waiting 10s...
[0;34m[2025-08-14 23:49:15] [DEBUG][0m Attempt 30/30: cassandra not ready, waiting 10s...
[0;31m[2025-08-14 23:49:25] [ERROR][0m cassandra failed to become ready within 300s
[0;31m[2025-08-14 23:49:25] [ERROR][0m Service cassandra failed to become ready
[0;32m[2025-08-15 00:10:28] [INFO][0m Deploying Portainer...
[0;32m[2025-08-15 00:11:03] [INFO][0m Deploying Wazuh...
[1;33m[2025-08-15 00:11:05] [WARN][0m Wazuh deployment failed
[0;32m[2025-08-15 00:11:05] [INFO][0m Deploying optimized security services...
[0;32m[2025-08-15 00:11:05] [INFO][0m Deploying TheHive...
[1;33m[2025-08-15 00:18:29] [WARN][0m TheHive deployment failed
[0;32m[2025-08-15 00:18:29] [INFO][0m Deploying Cortex...
[1;33m[2025-08-15 00:18:30] [WARN][0m Cortex deployment failed
[0;32m[2025-08-15 00:18:30] [INFO][0m Deploying Velociraptor...
[1;33m[2025-08-15 00:18:32] [WARN][0m Velociraptor deployment failed
[0;32m[2025-08-15 00:18:32] [INFO][0m Beginning integration configuration phase...
[0;32m[2025-08-15 00:18:32] [INFO][0m Configuring service integrations...
[0;32m[2025-08-15 00:18:32] [INFO][0m Configuring TheHive-Cortex integration...
[1;33m[2025-08-15 00:23:32] [WARN][0m Integration configuration failed
[0;36m[2025-08-15 00:23:32] [SUCCESS][0m Service integrations configured
[0;32m[2025-08-15 00:23:32] [INFO][0m Beginning testing phase...
[0;32m[2025-08-15 00:23:32] [INFO][0m Running basic connectivity tests...
[1;33m[2025-08-15 00:23:32] [WARN][0m TheHive connectivity test failed (port 9000)
[1;33m[2025-08-15 00:23:32] [WARN][0m Cortex connectivity test failed (port 9001)
[1;33m[2025-08-15 00:23:32] [WARN][0m Velociraptor connectivity test failed (port 8889)
[0;36m[2025-08-15 00:23:33] [SUCCESS][0m Kasm connectivity test passed
[0;36m[2025-08-15 00:23:33] [SUCCESS][0m Portainer connectivity test passed
[1;33m[2025-08-15 00:23:33] [WARN][0m 3 connectivity tests failed
[1;33m[2025-08-15 00:23:33] [WARN][0m Some tests failed - deployment completed with warnings
[0;32m[2025-08-15 00:23:33] [INFO][0m Generating deployment report...
[0;36m[2025-08-15 00:23:33] [SUCCESS][0m Deployment report saved to: /home/cmndcntrl/code/btpi-react/logs/deployment_report_20250721_093729.txt
[0;32m[2025-08-15 00:40:58] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-15 00:40:58] [INFO][0m Deployment ID: c88727f2-ab58-46bf-9834-c7dda3ef4e98
[0;32m[2025-08-15 00:40:58] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-15 00:40:59] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250815_004058.tar.gz
[0;32m[2025-08-15 00:40:59] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-15 00:40:59] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 00:40:59] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 00:40:59] [INFO][0m System Resources:
[0;32m[2025-08-15 00:40:59] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 00:40:59] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 00:40:59] [INFO][0m   Available Disk: 157GB
[0;32m[2025-08-15 00:40:59] [INFO][0m Checking for port conflicts...
[1;33m[2025-08-15 00:41:00] [WARN][0m Port 9042 is already in use by docker-pr (required for cassandra)
[0;32m[2025-08-15 00:48:23] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-15 00:48:23] [INFO][0m Deployment ID: 11e0760a-bc20-4d2f-8347-680816212712
[0;32m[2025-08-15 00:48:23] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-15 00:48:24] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250815_004823.tar.gz
[0;32m[2025-08-15 00:48:24] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-15 00:48:24] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 00:48:24] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 00:48:24] [INFO][0m System Resources:
[0;32m[2025-08-15 00:48:24] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 00:48:24] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 00:48:24] [INFO][0m   Available Disk: 157GB
[0;32m[2025-08-15 00:48:24] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-15 00:48:25] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-15 00:48:25] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-15 00:48:25] [INFO][0m Installing additional system packages...
[0;36m[2025-08-15 00:48:32] [SUCCESS][0m System packages installed
[0;32m[2025-08-15 00:48:32] [INFO][0m Applying system optimizations...
[0;36m[2025-08-15 00:48:41] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-15 00:48:41] [INFO][0m Initializing directory structure...
[0;36m[2025-08-15 00:48:41] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-15 00:48:41] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-15 00:48:41] [INFO][0m Environment configuration already exists
[0;32m[2025-08-15 00:48:41] [INFO][0m SSL certificates already exist
[0;32m[2025-08-15 00:48:41] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-15 00:48:41] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-15 00:48:41] [INFO][0m Creating Docker network...
[0;32m[2025-08-15 00:48:41] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-15 00:48:41] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-15 00:48:41] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-15 00:48:41] [INFO][0m Deploying cassandra...
[0;34m[2025-08-15 00:48:41] [DEBUG][0m Using dedicated deployment script for cassandra
[0;32m[2025-08-15 01:15:33] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-15 01:15:33] [INFO][0m Deployment ID: c2512cb7-1277-4223-a871-0aa3b268b3d8
[0;32m[2025-08-15 01:15:33] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-15 01:15:33] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250815_011533.tar.gz
[0;32m[2025-08-15 01:15:33] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-15 01:15:33] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 01:15:34] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 01:15:34] [INFO][0m System Resources:
[0;32m[2025-08-15 01:15:34] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 01:15:34] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 01:15:34] [INFO][0m   Available Disk: 157GB
[0;32m[2025-08-15 01:15:34] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-15 01:15:45] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-15 01:15:45] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-15 01:15:45] [INFO][0m Installing additional system packages...
[0;36m[2025-08-15 01:15:49] [SUCCESS][0m System packages installed
[0;32m[2025-08-15 01:15:49] [INFO][0m Applying system optimizations...
[0;36m[2025-08-15 01:15:53] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-15 01:15:53] [INFO][0m Initializing directory structure...
[0;36m[2025-08-15 01:15:53] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-15 01:15:53] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-15 01:15:53] [INFO][0m Environment configuration already exists
[0;32m[2025-08-15 01:15:53] [INFO][0m SSL certificates already exist
[0;32m[2025-08-15 01:15:53] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-15 01:15:53] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-15 01:15:53] [INFO][0m Creating Docker network...
[0;32m[2025-08-15 01:15:53] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-15 01:15:53] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-15 01:15:53] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-15 01:15:53] [INFO][0m Deploying cassandra...
[0;34m[2025-08-15 01:15:53] [DEBUG][0m Using dedicated deployment script for cassandra
[0;32m[2025-08-15 01:40:09] [INFO][0m Starting BTPI-REACT simplified deployment v2.0.1...
[0;32m[2025-08-15 01:40:09] [INFO][0m Deployment ID: 05fe9d0a-676e-46cc-ab84-9c0a2c02ed87
[0;32m[2025-08-15 01:40:09] [INFO][0m Running simplified pre-deployment checks...
[0;32m[2025-08-15 01:40:09] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 01:40:09] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 01:40:09] [INFO][0m System Resources:
[0;32m[2025-08-15 01:40:09] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 01:40:09] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 01:40:09] [INFO][0m   Available Disk: 157GB
[0;36m[2025-08-15 01:40:09] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-15 01:40:09] [INFO][0m Initializing directory structure...
[0;36m[2025-08-15 01:40:09] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-15 01:40:09] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-15 01:40:09] [INFO][0m Environment configuration already exists
[0;32m[2025-08-15 01:40:09] [INFO][0m SSL certificates already exist
[0;32m[2025-08-15 01:40:09] [INFO][0m Creating Docker network...
[0;32m[2025-08-15 01:40:09] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-15 01:40:09] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-15 01:40:09] [INFO][0m Deploying existing services...
[0;32m[2025-08-15 01:40:09] [INFO][0m Deploying Kasm Workspaces...
[0;32m[2025-08-15 02:22:42] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-15 02:22:42] [INFO][0m Deployment ID: 75d4f297-a03f-494c-8262-8ab7286a539f
[0;32m[2025-08-15 02:22:42] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-15 02:23:09] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250815_022242.tar.gz
[0;32m[2025-08-15 02:23:09] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-15 02:23:09] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 02:23:09] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 02:23:09] [INFO][0m System Resources:
[0;32m[2025-08-15 02:23:09] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 02:23:09] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 02:23:09] [INFO][0m   Available Disk: 157GB
[0;32m[2025-08-15 02:23:09] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-15 02:23:10] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-15 02:23:10] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-15 02:23:10] [INFO][0m Installing additional system packages...
[0;36m[2025-08-15 02:23:30] [SUCCESS][0m System packages installed
[0;32m[2025-08-15 02:23:30] [INFO][0m Applying system optimizations...
[0;36m[2025-08-15 02:23:42] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-15 02:23:42] [INFO][0m Initializing directory structure...
[0;36m[2025-08-15 02:23:42] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-15 02:23:42] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-15 02:23:42] [INFO][0m Environment configuration already exists
[0;32m[2025-08-15 02:23:42] [INFO][0m SSL certificates already exist
[0;32m[2025-08-15 02:23:42] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-15 02:23:42] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-15 02:23:42] [INFO][0m Creating Docker network...
[0;32m[2025-08-15 02:23:42] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-15 02:23:42] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-15 02:23:42] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-15 02:23:42] [INFO][0m Deploying cassandra...
[0;34m[2025-08-15 02:23:42] [DEBUG][0m Using dedicated deployment script for cassandra
[0;32m[2025-08-15 03:05:59] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-15 03:05:59] [INFO][0m Deployment ID: 3036c378-929b-4d28-aa96-c85be5373d50
[0;32m[2025-08-15 03:05:59] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-15 03:05:59] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250815_030559.tar.gz
[0;32m[2025-08-15 03:05:59] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-15 03:05:59] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 03:06:00] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 03:06:00] [INFO][0m System Resources:
[0;32m[2025-08-15 03:06:00] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 03:06:00] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 03:06:00] [INFO][0m   Available Disk: 156GB
[0;32m[2025-08-15 03:06:00] [INFO][0m Checking for port conflicts...
[1;33m[2025-08-15 03:06:00] [WARN][0m Port 9042 is already in use by docker-pr (required for cassandra)
[0;32m[2025-08-15 03:08:12] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-15 03:08:12] [INFO][0m Deployment ID: 9500b374-b156-4381-9fd9-df6939524a78
[0;32m[2025-08-15 03:08:12] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-15 03:08:12] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250815_030812.tar.gz
[0;32m[2025-08-15 03:08:12] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-15 03:08:13] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 03:08:13] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 03:08:13] [INFO][0m System Resources:
[0;32m[2025-08-15 03:08:13] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 03:08:13] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 03:08:13] [INFO][0m   Available Disk: 156GB
[0;32m[2025-08-15 03:08:13] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-15 03:08:14] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-15 03:08:14] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-15 03:08:14] [INFO][0m Installing additional system packages...
[0;36m[2025-08-15 03:08:36] [SUCCESS][0m System packages installed
[0;32m[2025-08-15 03:08:36] [INFO][0m Applying system optimizations...
[0;36m[2025-08-15 03:08:41] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-15 03:08:41] [INFO][0m Initializing directory structure...
[0;36m[2025-08-15 03:08:41] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-15 03:08:41] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-15 03:08:41] [INFO][0m Environment configuration already exists
[0;32m[2025-08-15 03:08:41] [INFO][0m SSL certificates already exist
[0;32m[2025-08-15 03:08:41] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-15 03:08:41] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-15 03:08:41] [INFO][0m Creating Docker network...
[0;32m[2025-08-15 03:08:41] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-15 03:08:41] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-15 03:08:41] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-15 03:08:41] [INFO][0m Deploying cassandra...
[0;34m[2025-08-15 03:08:41] [DEBUG][0m Using dedicated deployment script for cassandra
[0;34m[2025-08-15 03:09:30] [DEBUG][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-15 03:09:31] [DEBUG][0m cassandra is ready
[0;36m[2025-08-15 03:09:31] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-08-15 03:09:31] [INFO][0m Deploying elasticsearch...
[0;34m[2025-08-15 03:09:31] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-08-15 04:05:42] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-15 04:05:42] [INFO][0m Deployment ID: 6d0e080a-4b6d-43c8-8f0c-f788d7ff25c8
[0;32m[2025-08-15 04:05:42] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-15 04:05:43] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250815_040542.tar.gz
[0;32m[2025-08-15 04:05:43] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-15 04:05:43] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 04:05:43] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 04:05:43] [INFO][0m System Resources:
[0;32m[2025-08-15 04:05:43] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 04:05:43] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 04:05:43] [INFO][0m   Available Disk: 156GB
[0;32m[2025-08-15 04:05:43] [INFO][0m Checking for port conflicts...
[1;33m[2025-08-15 04:05:43] [WARN][0m Port 9042 is already in use by docker-pr (required for cassandra)
[0;32m[2025-08-15 04:07:21] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-15 04:07:21] [INFO][0m Deployment ID: 912afb41-c4bb-458f-9a3f-946652bce6b1
[0;32m[2025-08-15 04:07:21] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-15 04:07:21] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250815_040721.tar.gz
[0;32m[2025-08-15 04:07:21] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-15 04:07:21] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 04:07:22] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 04:07:22] [INFO][0m System Resources:
[0;32m[2025-08-15 04:07:22] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 04:07:22] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 04:07:22] [INFO][0m   Available Disk: 156GB
[0;32m[2025-08-15 04:07:22] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-15 04:07:23] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-15 04:07:23] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-15 04:07:23] [INFO][0m Installing additional system packages...
[0;36m[2025-08-15 04:07:27] [SUCCESS][0m System packages installed
[0;32m[2025-08-15 04:07:27] [INFO][0m Applying system optimizations...
[0;36m[2025-08-15 04:07:33] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-15 04:07:33] [INFO][0m Initializing directory structure...
[0;36m[2025-08-15 04:07:33] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-15 04:07:33] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-15 04:07:33] [INFO][0m Environment configuration already exists
[0;32m[2025-08-15 04:07:33] [INFO][0m SSL certificates already exist
[0;32m[2025-08-15 04:07:33] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-15 04:07:33] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-15 04:07:33] [INFO][0m Creating Docker network...
[0;32m[2025-08-15 04:07:33] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-15 04:07:33] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-15 04:07:33] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-15 04:07:33] [INFO][0m Deploying cassandra...
[0;34m[2025-08-15 04:07:33] [DEBUG][0m Using dedicated deployment script for cassandra
[0;34m[2025-08-15 04:08:13] [DEBUG][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-15 04:08:13] [DEBUG][0m cassandra is ready
[0;36m[2025-08-15 04:08:13] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-08-15 04:08:13] [INFO][0m Deploying elasticsearch...
[0;34m[2025-08-15 04:08:13] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;34m[2025-08-15 04:08:38] [DEBUG][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-08-15 04:08:38] [DEBUG][0m Attempt 1/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:08:48] [DEBUG][0m Attempt 2/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:08:58] [DEBUG][0m Attempt 3/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:09:08] [DEBUG][0m Attempt 4/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:09:18] [DEBUG][0m Attempt 5/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:09:28] [DEBUG][0m Attempt 6/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:09:38] [DEBUG][0m Attempt 7/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:09:48] [DEBUG][0m Attempt 8/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:09:58] [DEBUG][0m Attempt 9/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:10:08] [DEBUG][0m Attempt 10/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:10:18] [DEBUG][0m Attempt 11/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:10:28] [DEBUG][0m Attempt 12/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:10:39] [DEBUG][0m Attempt 13/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:10:49] [DEBUG][0m Attempt 14/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:10:59] [DEBUG][0m Attempt 15/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:11:09] [DEBUG][0m Attempt 16/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:11:19] [DEBUG][0m Attempt 17/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:11:29] [DEBUG][0m Attempt 18/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:11:39] [DEBUG][0m Attempt 19/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:11:49] [DEBUG][0m Attempt 20/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:11:59] [DEBUG][0m Attempt 21/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:12:09] [DEBUG][0m Attempt 22/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:12:19] [DEBUG][0m Attempt 23/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:12:29] [DEBUG][0m Attempt 24/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:12:39] [DEBUG][0m Attempt 25/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:12:49] [DEBUG][0m Attempt 26/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:12:59] [DEBUG][0m Attempt 27/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:13:09] [DEBUG][0m Attempt 28/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:13:19] [DEBUG][0m Attempt 29/30: elasticsearch not ready, waiting 10s...
[0;34m[2025-08-15 04:13:29] [DEBUG][0m Attempt 30/30: elasticsearch not ready, waiting 10s...
[0;31m[2025-08-15 04:13:39] [ERROR][0m elasticsearch failed to become ready within 300s
[0;31m[2025-08-15 04:13:39] [ERROR][0m Service elasticsearch failed to become ready
[0;32m[2025-08-15 04:15:10] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-15 04:15:10] [INFO][0m Deployment ID: 93de1f91-0e50-476a-85ae-5982f1025a43
[0;32m[2025-08-15 04:15:10] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-15 04:15:10] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250815_041510.tar.gz
[0;32m[2025-08-15 04:15:10] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-15 04:15:10] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-15 04:15:11] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-15 04:15:11] [INFO][0m System Resources:
[0;32m[2025-08-15 04:15:11] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-15 04:15:11] [INFO][0m   Memory: 26GB
[0;32m[2025-08-15 04:15:11] [INFO][0m   Available Disk: 156GB
[0;32m[2025-08-15 04:15:11] [INFO][0m Checking for port conflicts...
[1;33m[2025-08-15 04:15:12] [WARN][0m Port 9042 is already in use by docker-pr (required for cassandra)
[0;32m[2025-08-17 14:09:06] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-17 14:09:06] [INFO][0m Deployment ID: b48dfcff-367f-43c1-961a-7d8c11595962
[0;32m[2025-08-17 14:09:06] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-17 14:09:07] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250817_140906.tar.gz
[0;32m[2025-08-17 14:09:07] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-17 14:09:08] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-17 14:09:09] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-17 14:09:09] [INFO][0m System Resources:
[0;32m[2025-08-17 14:09:09] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-17 14:09:09] [INFO][0m   Memory: 26GB
[0;32m[2025-08-17 14:09:09] [INFO][0m   Available Disk: 182GB
[0;32m[2025-08-17 14:09:09] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-17 14:09:18] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-17 14:09:18] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-17 14:09:18] [INFO][0m Installing additional system packages...
[0;36m[2025-08-17 14:09:21] [SUCCESS][0m System packages installed
[0;32m[2025-08-17 14:09:21] [INFO][0m Applying system optimizations...
[0;36m[2025-08-17 14:09:25] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-17 14:09:25] [INFO][0m Initializing directory structure...
[0;36m[2025-08-17 14:09:25] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-17 14:09:25] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-17 14:09:25] [INFO][0m Environment configuration already exists
[0;32m[2025-08-17 14:09:25] [INFO][0m SSL certificates already exist
[0;32m[2025-08-17 14:09:25] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-17 14:09:25] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-17 14:09:25] [INFO][0m Creating Docker network...
[0;32m[2025-08-17 14:09:25] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-17 14:09:25] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-17 14:09:25] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-17 14:09:25] [INFO][0m Deploying cassandra...
[0;34m[2025-08-17 14:09:25] [DEBUG][0m Using dedicated deployment script for cassandra
[0;34m[2025-08-17 14:10:22] [DEBUG][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-17 14:10:23] [DEBUG][0m cassandra is ready
[0;36m[2025-08-17 14:10:23] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-08-17 14:10:23] [INFO][0m Deploying elasticsearch...
[0;34m[2025-08-17 14:10:23] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;34m[2025-08-17 14:11:08] [DEBUG][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-08-17 14:11:08] [DEBUG][0m elasticsearch is ready
[0;36m[2025-08-17 14:11:08] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-08-17 14:11:08] [INFO][0m Deploying wazuh-indexer...
[0;34m[2025-08-17 14:11:08] [DEBUG][0m Using dedicated deployment script for wazuh-indexer
[0;32m[2025-08-17 14:33:08] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-17 14:33:08] [INFO][0m Deployment ID: c0179a73-04c0-480b-a709-260dd452f51c
[0;32m[2025-08-17 14:33:08] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-17 14:33:08] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250817_143308.tar.gz
[0;32m[2025-08-17 14:33:08] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-17 14:33:08] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-17 14:33:09] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-17 14:33:09] [INFO][0m System Resources:
[0;32m[2025-08-17 14:33:09] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-17 14:33:09] [INFO][0m   Memory: 26GB
[0;32m[2025-08-17 14:33:09] [INFO][0m   Available Disk: 180GB
[0;32m[2025-08-17 14:33:09] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-17 14:33:17] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-17 14:33:17] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-17 14:33:17] [INFO][0m Installing additional system packages...
[0;36m[2025-08-17 14:33:21] [SUCCESS][0m System packages installed
[0;32m[2025-08-17 14:33:21] [INFO][0m Applying system optimizations...
[0;36m[2025-08-17 14:33:28] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-17 14:33:28] [INFO][0m Initializing directory structure...
[0;36m[2025-08-17 14:33:28] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-17 14:33:28] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-17 14:33:28] [INFO][0m Environment configuration already exists
[0;32m[2025-08-17 14:33:28] [INFO][0m SSL certificates already exist
[0;32m[2025-08-17 14:33:28] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-17 14:33:28] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-17 14:33:28] [INFO][0m Creating Docker network...
[0;32m[2025-08-17 14:33:28] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-17 14:33:28] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-17 14:33:28] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-17 14:33:28] [INFO][0m Deploying cassandra...
[0;34m[2025-08-17 14:33:28] [DEBUG][0m Using dedicated deployment script for cassandra
[0;34m[2025-08-17 14:34:13] [DEBUG][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-17 14:34:13] [DEBUG][0m cassandra is ready
[0;36m[2025-08-17 14:34:13] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-08-17 14:34:13] [INFO][0m Deploying elasticsearch...
[0;34m[2025-08-17 14:34:13] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;34m[2025-08-17 14:34:39] [DEBUG][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-08-17 14:34:40] [DEBUG][0m elasticsearch is ready
[0;36m[2025-08-17 14:34:40] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-08-17 14:34:40] [INFO][0m Deploying wazuh-indexer...
[0;34m[2025-08-17 14:34:40] [DEBUG][0m Using dedicated deployment script for wazuh-indexer
[0;32m[2025-08-17 15:04:31] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-17 15:04:31] [INFO][0m Deployment ID: 31758310-a1a0-48c1-b148-d50d971c7672
[0;32m[2025-08-17 15:04:31] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-17 15:04:31] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250817_150431.tar.gz
[0;32m[2025-08-17 15:04:31] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-17 15:04:31] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-17 15:04:31] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-17 15:04:31] [INFO][0m System Resources:
[0;32m[2025-08-17 15:04:31] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-17 15:04:31] [INFO][0m   Memory: 26GB
[0;32m[2025-08-17 15:04:31] [INFO][0m   Available Disk: 180GB
[0;32m[2025-08-17 15:04:31] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-17 15:04:41] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-17 15:04:41] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-17 15:04:41] [INFO][0m Installing additional system packages...
[0;36m[2025-08-17 15:04:45] [SUCCESS][0m System packages installed
[0;32m[2025-08-17 15:04:45] [INFO][0m Applying system optimizations...
[0;36m[2025-08-17 15:04:50] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-17 15:04:50] [INFO][0m Initializing directory structure...
[0;36m[2025-08-17 15:04:50] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-17 15:04:50] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-17 15:04:50] [INFO][0m Environment configuration already exists
[0;32m[2025-08-17 15:04:50] [INFO][0m SSL certificates already exist
[0;32m[2025-08-17 15:04:50] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-17 15:04:50] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-17 15:04:50] [INFO][0m Creating Docker network...
[0;32m[2025-08-17 15:04:50] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-17 15:04:50] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-17 15:04:50] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-17 15:04:50] [INFO][0m Deploying cassandra...
[0;34m[2025-08-17 15:04:50] [DEBUG][0m Using dedicated deployment script for cassandra
[0;34m[2025-08-17 15:05:35] [DEBUG][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-17 15:05:36] [DEBUG][0m cassandra is ready
[0;36m[2025-08-17 15:05:36] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-08-17 15:05:36] [INFO][0m Deploying elasticsearch...
[0;34m[2025-08-17 15:05:36] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;34m[2025-08-17 15:06:01] [DEBUG][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-08-17 15:06:01] [DEBUG][0m elasticsearch is ready
[0;36m[2025-08-17 15:06:01] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-08-17 15:06:01] [INFO][0m Deploying wazuh-indexer...
[0;34m[2025-08-17 15:06:01] [DEBUG][0m Using dedicated deployment script for wazuh-indexer
[0;32m[2025-08-17 15:16:15] [INFO][0m Testing detection of currently running services...
[0;32m[2025-08-17 15:16:15] [INFO][0m Currently running containers:
[0;32m[2025-08-17 15:16:15] [INFO][0m Testing enhanced detection for: wazuh-indexer
[0;34m[2025-08-17 15:16:15] [DEBUG][0m Testing container status check...
[0;34m[2025-08-17 15:16:15] [DEBUG][0m Checking container status for wazuh-indexer...
[1;33m[2025-08-17 15:16:16] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:16:21] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:16:26] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:16:31] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:16:36] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:16:41] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:16:46] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:16:51] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:16:56] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:17:01] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:17:06] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:17:11] [WARN][0m wazuh-indexer container health status: unhealthy
[0;31m[2025-08-17 15:17:16] [ERROR][0m wazuh-indexer container status check failed
[0;32m[2025-08-17 15:17:16] [INFO][0m Testing enhanced detection for: elasticsearch
[0;34m[2025-08-17 15:17:16] [DEBUG][0m Testing container status check...
[0;34m[2025-08-17 15:17:16] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-08-17 15:17:16] [DEBUG][0m elasticsearch container is running and healthy
[0;36m[2025-08-17 15:17:16] [SUCCESS][0m elasticsearch container status check passed
[0;34m[2025-08-17 15:17:16] [DEBUG][0m Testing service health check...
[0;34m[2025-08-17 15:17:16] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-08-17 15:17:16] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-08-17 15:17:16] [SUCCESS][0m elasticsearch health check passed
[0;34m[2025-08-17 15:17:16] [DEBUG][0m Testing overall wait_for_service function...
[0;32m[2025-08-17 15:17:16] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;34m[2025-08-17 15:17:16] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-08-17 15:17:17] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-08-17 15:17:17] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-08-17 15:17:17] [SUCCESS][0m elasticsearch overall detection successful
[0;32m[2025-08-17 15:17:17] [INFO][0m Testing enhanced detection for: cassandra
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Testing container status check...
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Checking container status for cassandra...
[0;34m[2025-08-17 15:17:17] [DEBUG][0m cassandra container is running and healthy
[0;36m[2025-08-17 15:17:17] [SUCCESS][0m cassandra container status check passed
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Testing service health check...
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Performing health check for cassandra...
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Cassandra is accepting connections and queries
[0;36m[2025-08-17 15:17:17] [SUCCESS][0m cassandra health check passed
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Testing overall wait_for_service function...
[0;32m[2025-08-17 15:17:17] [INFO][0m Waiting for cassandra to be ready (max 60s)...
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Checking container status for cassandra...
[0;34m[2025-08-17 15:17:17] [DEBUG][0m cassandra container is running and healthy
[0;34m[2025-08-17 15:17:17] [DEBUG][0m Performing health check for cassandra...
[0;34m[2025-08-17 15:17:18] [DEBUG][0m Cassandra is accepting connections and queries
[0;36m[2025-08-17 15:17:18] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-08-17 15:17:18] [SUCCESS][0m cassandra overall detection successful
[0;32m[2025-08-17 15:23:11] [INFO][0m Testing detection of currently running services...
[0;32m[2025-08-17 15:23:11] [INFO][0m Currently running containers:
[0;32m[2025-08-17 15:23:11] [INFO][0m Testing enhanced detection for: wazuh-indexer
[0;34m[2025-08-17 15:23:11] [DEBUG][0m Testing container status check...
[0;34m[2025-08-17 15:23:11] [DEBUG][0m Checking container status for wazuh-indexer...
[1;33m[2025-08-17 15:23:11] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:23:16] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:23:21] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:23:26] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:23:31] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:23:36] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:23:41] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:23:46] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:23:51] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:23:57] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:24:02] [WARN][0m wazuh-indexer container health status: unhealthy
[1;33m[2025-08-17 15:24:07] [WARN][0m wazuh-indexer container health status: unhealthy
[0;32m[2025-08-17 15:24:39] [INFO][0m Testing detection of currently running services...
[0;32m[2025-08-17 15:24:39] [INFO][0m Currently running containers:
[0;32m[2025-08-17 15:24:39] [INFO][0m Testing enhanced detection for: wazuh-indexer
[0;34m[2025-08-17 15:24:39] [DEBUG][0m Testing container status check...
[0;34m[2025-08-17 15:24:39] [DEBUG][0m Checking container status for wazuh-indexer...
[0;34m[2025-08-17 15:24:39] [DEBUG][0m wazuh-indexer container is running but marked unhealthy - proceeding to service-specific health check
[0;36m[2025-08-17 15:24:39] [SUCCESS][0m wazuh-indexer container status check passed
[0;34m[2025-08-17 15:24:39] [DEBUG][0m Testing service health check...
[0;34m[2025-08-17 15:24:39] [DEBUG][0m Performing health check for wazuh-indexer...
[0;34m[2025-08-17 15:24:44] [DEBUG][0m HTTPS response: OpenSearch Security not initialized. - trying HTTP
[0;34m[2025-08-17 15:24:44] [DEBUG][0m Wazuh-indexer cluster health endpoint not responding on HTTP or HTTPS
[0;34m[2025-08-17 15:24:44] [DEBUG][0m Health check attempt 1/6 for wazuh-indexer failed, waiting 10s...
[0;34m[2025-08-17 15:24:59] [DEBUG][0m HTTPS response: OpenSearch Security not initialized. - trying HTTP
[0;34m[2025-08-17 15:24:59] [DEBUG][0m Wazuh-indexer cluster health endpoint not responding on HTTP or HTTPS
[0;34m[2025-08-17 15:24:59] [DEBUG][0m Health check attempt 2/6 for wazuh-indexer failed, waiting 10s...
[0;34m[2025-08-17 15:25:14] [DEBUG][0m HTTPS response: OpenSearch Security not initialized. - trying HTTP
[0;34m[2025-08-17 15:25:14] [DEBUG][0m Wazuh-indexer cluster health endpoint not responding on HTTP or HTTPS
[0;34m[2025-08-17 15:25:14] [DEBUG][0m Health check attempt 3/6 for wazuh-indexer failed, waiting 10s...
[0;34m[2025-08-17 15:25:29] [DEBUG][0m HTTPS response: OpenSearch Security not initialized. - trying HTTP
[0;34m[2025-08-17 15:25:29] [DEBUG][0m Wazuh-indexer cluster health endpoint not responding on HTTP or HTTPS
[0;34m[2025-08-17 15:25:29] [DEBUG][0m Health check attempt 4/6 for wazuh-indexer failed, waiting 10s...
[0;34m[2025-08-17 15:25:44] [DEBUG][0m HTTPS response: OpenSearch Security not initialized. - trying HTTP
[0;34m[2025-08-17 15:25:44] [DEBUG][0m Wazuh-indexer cluster health endpoint not responding on HTTP or HTTPS
[0;34m[2025-08-17 15:25:44] [DEBUG][0m Health check attempt 5/6 for wazuh-indexer failed, waiting 10s...
[0;32m[2025-08-17 15:26:40] [INFO][0m Waiting for wazuh-indexer to be ready (max 30s)...
[0;34m[2025-08-17 15:26:40] [DEBUG][0m Checking container status for wazuh-indexer...
[0;34m[2025-08-17 15:26:40] [DEBUG][0m wazuh-indexer container is running but marked unhealthy - proceeding to service-specific health check
[0;34m[2025-08-17 15:26:40] [DEBUG][0m Performing health check for wazuh-indexer...
[0;34m[2025-08-17 15:26:45] [DEBUG][0m Wazuh-indexer is running but security plugin needs initialization
[0;34m[2025-08-17 15:26:45] [DEBUG][0m Wazuh-indexer basic connectivity confirmed
[0;36m[2025-08-17 15:26:45] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-08-17 15:30:25] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-17 15:30:25] [INFO][0m Deployment ID: cda8cfa5-b657-4a86-8951-608b9aa8174e
[0;32m[2025-08-17 15:30:25] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-17 15:30:26] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250817_153025.tar.gz
[0;32m[2025-08-17 15:30:26] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-17 15:30:26] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-17 15:30:26] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-17 15:30:26] [INFO][0m System Resources:
[0;32m[2025-08-17 15:30:26] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-17 15:30:26] [INFO][0m   Memory: 26GB
[0;32m[2025-08-17 15:30:26] [INFO][0m   Available Disk: 180GB
[0;32m[2025-08-17 15:30:26] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-17 15:30:37] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-17 15:30:37] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-17 15:30:37] [INFO][0m Installing additional system packages...
[0;36m[2025-08-17 15:30:40] [SUCCESS][0m System packages installed
[0;32m[2025-08-17 15:30:40] [INFO][0m Applying system optimizations...
[0;36m[2025-08-17 15:30:50] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-17 15:30:50] [INFO][0m Initializing directory structure...
[0;36m[2025-08-17 15:30:50] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-17 15:30:50] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-17 15:30:50] [INFO][0m Environment configuration already exists
[0;32m[2025-08-17 15:30:50] [INFO][0m SSL certificates already exist
[0;32m[2025-08-17 15:30:50] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-17 15:30:50] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-17 15:30:50] [INFO][0m Creating Docker network...
[0;32m[2025-08-17 15:30:50] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-17 15:30:50] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-17 15:30:50] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-17 15:30:50] [INFO][0m Deploying cassandra...
[0;34m[2025-08-17 15:30:50] [DEBUG][0m Using dedicated deployment script for cassandra
[0;32m[2025-08-17 15:31:41] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-17 15:31:41] [DEBUG][0m Checking container status for cassandra...
[0;34m[2025-08-17 15:31:41] [DEBUG][0m cassandra container is running and healthy
[0;34m[2025-08-17 15:31:41] [DEBUG][0m Performing health check for cassandra...
[0;34m[2025-08-17 15:31:42] [DEBUG][0m Cassandra is accepting connections and queries
[0;36m[2025-08-17 15:31:42] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-08-17 15:31:42] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-08-17 15:31:42] [INFO][0m Deploying elasticsearch...
[0;34m[2025-08-17 15:31:42] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-08-17 15:32:07] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-08-17 15:32:07] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-08-17 15:32:07] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-08-17 15:32:07] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-08-17 15:32:07] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-08-17 15:32:07] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-08-17 15:32:07] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-08-17 15:32:07] [INFO][0m Deploying wazuh-indexer...
[0;34m[2025-08-17 15:32:07] [DEBUG][0m Using dedicated deployment script for wazuh-indexer
[0;32m[2025-08-17 15:45:18] [INFO][0m Waiting for wazuh-indexer to be ready (max 30s)...
[0;34m[2025-08-17 15:45:18] [DEBUG][0m Checking container status for wazuh-indexer...
[0;34m[2025-08-17 15:45:18] [DEBUG][0m wazuh-indexer container is starting (attempt 1/6)...
[0;34m[2025-08-17 15:45:23] [DEBUG][0m wazuh-indexer container is starting (attempt 2/6)...
[0;34m[2025-08-17 15:45:28] [DEBUG][0m wazuh-indexer container is starting (attempt 3/6)...
[0;34m[2025-08-17 15:45:33] [DEBUG][0m wazuh-indexer container is starting (attempt 4/6)...
[0;34m[2025-08-17 15:45:38] [DEBUG][0m wazuh-indexer container is starting (attempt 5/6)...
[0;34m[2025-08-17 15:45:43] [DEBUG][0m wazuh-indexer container is starting (attempt 6/6)...
[0;31m[2025-08-17 15:45:48] [ERROR][0m wazuh-indexer container is not running or doesn't exist
[0;32m[2025-08-17 15:46:34] [INFO][0m Waiting for wazuh-indexer to be ready (max 30s)...
[0;34m[2025-08-17 15:46:34] [DEBUG][0m Checking container status for wazuh-indexer...
[0;34m[2025-08-17 15:46:34] [DEBUG][0m wazuh-indexer container is starting (attempt 1/12)...
[0;34m[2025-08-17 15:46:44] [DEBUG][0m wazuh-indexer container is starting (attempt 2/12)...
[0;34m[2025-08-17 15:46:54] [DEBUG][0m wazuh-indexer container is starting (attempt 3/12)...
[0;34m[2025-08-17 15:47:04] [DEBUG][0m wazuh-indexer container is starting (attempt 4/12)...
[0;34m[2025-08-17 15:47:14] [DEBUG][0m wazuh-indexer container is starting (attempt 5/12)...
[0;34m[2025-08-17 15:47:24] [DEBUG][0m wazuh-indexer container is starting (attempt 6/12)...
[0;34m[2025-08-17 15:47:34] [DEBUG][0m wazuh-indexer container is starting (attempt 7/12)...
[0;34m[2025-08-17 15:47:44] [DEBUG][0m wazuh-indexer container is starting (attempt 8/12)...
[0;34m[2025-08-17 15:47:54] [DEBUG][0m wazuh-indexer container is starting (attempt 9/12)...
[0;34m[2025-08-17 15:48:04] [DEBUG][0m wazuh-indexer container is running but marked unhealthy - proceeding to service-specific health check
[0;34m[2025-08-17 15:48:04] [DEBUG][0m Performing health check for wazuh-indexer...
[0;34m[2025-08-17 15:48:09] [DEBUG][0m Wazuh-indexer is running but security plugin needs initialization
[0;34m[2025-08-17 15:48:09] [DEBUG][0m Wazuh-indexer basic connectivity confirmed
[0;36m[2025-08-17 15:48:09] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-08-17 16:03:27] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-17 16:03:27] [INFO][0m Deployment ID: 5ba9f79f-b84c-4c70-b2c9-e11f007c7d21
[0;32m[2025-08-17 16:03:27] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-17 16:03:27] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250817_160327.tar.gz
[0;32m[2025-08-17 16:03:27] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-17 16:03:27] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-17 16:03:27] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-17 16:03:27] [INFO][0m System Resources:
[0;32m[2025-08-17 16:03:27] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-17 16:03:27] [INFO][0m   Memory: 26GB
[0;32m[2025-08-17 16:03:27] [INFO][0m   Available Disk: 178GB
[0;32m[2025-08-17 16:03:27] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-17 16:03:38] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-17 16:03:38] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-17 16:03:38] [INFO][0m Installing additional system packages...
[0;36m[2025-08-17 16:03:48] [SUCCESS][0m System packages installed
[0;32m[2025-08-17 16:03:48] [INFO][0m Applying system optimizations...
[0;36m[2025-08-17 16:03:52] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-17 16:03:52] [INFO][0m Initializing directory structure...
[0;36m[2025-08-17 16:03:52] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-17 16:03:52] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-17 16:03:52] [INFO][0m Environment configuration already exists
[0;32m[2025-08-17 16:03:52] [INFO][0m SSL certificates already exist
[0;32m[2025-08-17 16:03:52] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-17 16:03:52] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-17 16:03:52] [INFO][0m Creating Docker network...
[0;32m[2025-08-17 16:03:52] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-17 16:03:52] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-17 16:03:52] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-17 16:03:52] [INFO][0m Deploying cassandra...
[0;34m[2025-08-17 16:03:52] [DEBUG][0m Using dedicated deployment script for cassandra
[0;32m[2025-08-17 16:04:32] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-17 16:04:32] [DEBUG][0m Checking container status for cassandra...
[0;34m[2025-08-17 16:04:32] [DEBUG][0m cassandra container is running and healthy
[0;34m[2025-08-17 16:04:32] [DEBUG][0m Performing health check for cassandra...
[0;34m[2025-08-17 16:04:32] [DEBUG][0m Cassandra is accepting connections and queries
[0;36m[2025-08-17 16:04:32] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-08-17 16:04:32] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-08-17 16:04:32] [INFO][0m Deploying elasticsearch...
[0;34m[2025-08-17 16:04:32] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-08-17 16:04:58] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-08-17 16:04:58] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-08-17 16:04:58] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-08-17 16:04:58] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-08-17 16:04:58] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-08-17 16:04:58] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-08-17 16:04:58] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-08-17 16:04:58] [INFO][0m Deploying wazuh-indexer...
[0;34m[2025-08-17 16:04:58] [DEBUG][0m Using dedicated deployment script for wazuh-indexer
[0;32m[2025-08-17 16:56:23] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-17 16:56:23] [INFO][0m Deployment ID: 0600ed2c-569a-4348-8e4a-25cb30f2a357
[0;32m[2025-08-17 16:56:23] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-17 16:56:24] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250817_165623.tar.gz
[0;32m[2025-08-17 16:56:24] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-17 16:56:24] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-17 16:56:24] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-17 16:56:24] [INFO][0m System Resources:
[0;32m[2025-08-17 16:56:24] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-17 16:56:24] [INFO][0m   Memory: 26GB
[0;32m[2025-08-17 16:56:24] [INFO][0m   Available Disk: 178GB
[0;32m[2025-08-17 16:56:24] [INFO][0m Checking for port conflicts...
[1;33m[2025-08-17 16:56:24] [WARN][0m Port 9042 is already in use by docker-pr (required for cassandra)
[0;32m[2025-08-17 17:02:15] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-17 17:02:15] [INFO][0m Deployment ID: 305eece9-f5ca-419e-99e8-6ea07e13b769
[0;32m[2025-08-17 17:02:15] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-17 17:02:15] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250817_170215.tar.gz
[0;32m[2025-08-17 17:02:15] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-17 17:02:15] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-17 17:02:16] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-17 17:02:16] [INFO][0m System Resources:
[0;32m[2025-08-17 17:02:16] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-17 17:02:16] [INFO][0m   Memory: 26GB
[0;32m[2025-08-17 17:02:16] [INFO][0m   Available Disk: 194GB
[0;32m[2025-08-17 17:02:16] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-17 17:02:17] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-17 17:02:17] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-17 17:02:17] [INFO][0m Installing additional system packages...
[0;36m[2025-08-17 17:02:23] [SUCCESS][0m System packages installed
[0;32m[2025-08-17 17:02:23] [INFO][0m Applying system optimizations...
[0;36m[2025-08-17 17:02:27] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-17 17:02:27] [INFO][0m Initializing directory structure...
[0;36m[2025-08-17 17:02:27] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-17 17:02:27] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-17 17:02:27] [INFO][0m Environment configuration already exists
[0;32m[2025-08-17 17:02:27] [INFO][0m SSL certificates already exist
[0;32m[2025-08-17 17:02:27] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-17 17:02:27] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-17 17:02:27] [INFO][0m Creating Docker network...
[0;32m[2025-08-17 17:02:27] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-17 17:02:27] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-17 17:02:27] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-17 17:02:27] [INFO][0m Deploying database services in ordered sequence...
[0;32m[2025-08-17 17:02:27] [INFO][0m Deploying database service: elasticsearch
[0;32m[2025-08-17 17:02:27] [INFO][0m Deploying elasticsearch...
[0;34m[2025-08-17 17:02:27] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-08-17 17:03:36] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-08-17 17:03:36] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-08-17 17:03:36] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-08-17 17:03:36] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-08-17 17:03:36] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-08-17 17:03:36] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-08-17 17:03:36] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-08-17 17:03:36] [INFO][0m Deploying database service: cassandra
[0;32m[2025-08-17 17:03:36] [INFO][0m Deploying cassandra...
[0;34m[2025-08-17 17:03:36] [DEBUG][0m Using dedicated deployment script for cassandra
[0;32m[2025-08-17 17:04:41] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-17 17:04:41] [DEBUG][0m Checking container status for cassandra...
[0;34m[2025-08-17 17:04:41] [DEBUG][0m cassandra container is running and healthy
[0;34m[2025-08-17 17:04:41] [DEBUG][0m Performing health check for cassandra...
[0;34m[2025-08-17 17:04:42] [DEBUG][0m Cassandra is accepting connections and queries
[0;36m[2025-08-17 17:04:42] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-08-17 17:04:42] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-08-17 17:04:42] [INFO][0m Deploying database service: wazuh-indexer
[0;32m[2025-08-17 17:04:42] [INFO][0m Deploying wazuh-indexer...
[0;32m[2025-08-17 17:04:42] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;34m[2025-08-17 17:04:42] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-08-17 17:04:42] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-08-17 17:04:42] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-08-17 17:04:42] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-08-17 17:04:42] [SUCCESS][0m elasticsearch is ready and healthy
[0;34m[2025-08-17 17:04:42] [DEBUG][0m Using dedicated deployment script for wazuh-indexer
[0;32m[2025-08-18 22:49:44] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-08-18 22:49:44] [INFO][0m Deployment ID: caf6ffc8-34c6-4cc6-b519-0a948de11650
[0;32m[2025-08-18 22:49:44] [INFO][0m Backing up existing deployment...
[0;36m[2025-08-18 22:49:46] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250818_224944.tar.gz
[0;32m[2025-08-18 22:49:46] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-08-18 22:49:46] [INFO][0m Docker found: Docker version 28.3.2, build 578ccf6
[0;32m[2025-08-18 22:49:48] [INFO][0m Docker Compose found: 2.38.2
[0;32m[2025-08-18 22:49:48] [INFO][0m System Resources:
[0;32m[2025-08-18 22:49:48] [INFO][0m   CPU Cores: 8
[0;32m[2025-08-18 22:49:48] [INFO][0m   Memory: 26GB
[0;32m[2025-08-18 22:49:48] [INFO][0m   Available Disk: 193GB
[0;32m[2025-08-18 22:49:48] [INFO][0m Checking for port conflicts...
[0;36m[2025-08-18 22:49:49] [SUCCESS][0m No port conflicts detected
[0;36m[2025-08-18 22:49:49] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-08-18 22:49:49] [INFO][0m Installing additional system packages...
[0;36m[2025-08-18 22:49:53] [SUCCESS][0m System packages installed
[0;32m[2025-08-18 22:49:53] [INFO][0m Applying system optimizations...
[0;36m[2025-08-18 22:49:56] [SUCCESS][0m System optimizations applied
[0;32m[2025-08-18 22:49:56] [INFO][0m Initializing directory structure...
[0;36m[2025-08-18 22:49:56] [SUCCESS][0m Directory structure initialized
[0;32m[2025-08-18 22:49:56] [INFO][0m Generating secrets and certificates...
[0;32m[2025-08-18 22:49:56] [INFO][0m Environment configuration already exists
[0;32m[2025-08-18 22:49:56] [INFO][0m SSL certificates already exist
[0;32m[2025-08-18 22:49:56] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-08-18 22:49:56] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-08-18 22:49:56] [INFO][0m Creating Docker network...
[0;32m[2025-08-18 22:49:56] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-08-18 22:49:56] [INFO][0m Beginning service deployment phase...
[0;32m[2025-08-18 22:49:56] [INFO][0m Deploying infrastructure services...
[0;32m[2025-08-18 22:49:56] [INFO][0m Deploying database services in ordered sequence...
[0;32m[2025-08-18 22:49:56] [INFO][0m Deploying database service: elasticsearch
[0;32m[2025-08-18 22:49:56] [INFO][0m Deploying elasticsearch...
[0;34m[2025-08-18 22:49:56] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-08-18 22:50:33] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-08-18 22:50:33] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-08-18 22:50:33] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-08-18 22:50:33] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-08-18 22:50:33] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-08-18 22:50:33] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-08-18 22:50:33] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-08-18 22:50:33] [INFO][0m Deploying database service: cassandra
[0;32m[2025-08-18 22:50:33] [INFO][0m Deploying cassandra...
[0;34m[2025-08-18 22:50:33] [DEBUG][0m Using dedicated deployment script for cassandra
[0;32m[2025-08-18 22:51:18] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-08-18 22:51:18] [DEBUG][0m Checking container status for cassandra...
[0;34m[2025-08-18 22:51:18] [DEBUG][0m cassandra container is running and healthy
[0;34m[2025-08-18 22:51:18] [DEBUG][0m Performing health check for cassandra...
[0;34m[2025-08-18 22:51:19] [DEBUG][0m Cassandra is accepting connections and queries
[0;36m[2025-08-18 22:51:19] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-08-18 22:51:19] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-08-18 22:51:19] [INFO][0m Deploying database service: wazuh-indexer
[0;32m[2025-08-18 22:51:19] [INFO][0m Deploying wazuh-indexer...
[0;32m[2025-08-18 22:51:19] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;34m[2025-08-18 22:51:19] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-08-18 22:51:19] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-08-18 22:51:19] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-08-18 22:51:19] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-08-18 22:51:19] [SUCCESS][0m elasticsearch is ready and healthy
[0;34m[2025-08-18 22:51:19] [DEBUG][0m Using dedicated deployment script for wazuh-indexer
[0;32m[2025-09-04 23:50:51] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-09-04 23:50:51] [INFO][0m Deployment ID: d38cd15e-6e3e-4efa-ba35-ac17da16fc48
[0;32m[2025-09-04 23:50:51] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-04 23:50:53] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250904_235051.tar.gz
[0;32m[2025-09-04 23:50:53] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-04 23:50:53] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-04 23:50:53] [INFO][0m Docker Compose found: 2.39.2
[0;32m[2025-09-04 23:50:53] [INFO][0m System Resources:
[0;32m[2025-09-04 23:50:53] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-04 23:50:53] [INFO][0m   Memory: 26GB
[0;32m[2025-09-04 23:50:53] [INFO][0m   Available Disk: 191GB
[0;32m[2025-09-04 23:50:53] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-04 23:50:54] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-04 23:50:54] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-09-04 23:50:54] [INFO][0m Installing additional system packages...
[0;32m[2025-09-04 23:51:32] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-09-04 23:51:32] [INFO][0m Deployment ID: d0562a41-e27d-4a18-8283-e3e469b65462
[0;32m[2025-09-04 23:51:32] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-04 23:51:33] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250904_235132.tar.gz
[0;32m[2025-09-04 23:51:33] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-04 23:51:33] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-04 23:51:33] [INFO][0m Docker Compose found: 2.39.2
[0;32m[2025-09-04 23:51:33] [INFO][0m System Resources:
[0;32m[2025-09-04 23:51:33] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-04 23:51:33] [INFO][0m   Memory: 26GB
[0;32m[2025-09-04 23:51:33] [INFO][0m   Available Disk: 191GB
[0;32m[2025-09-04 23:51:33] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-04 23:51:34] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-04 23:51:34] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-09-04 23:51:34] [INFO][0m Installing additional system packages...
[0;36m[2025-09-04 23:51:59] [SUCCESS][0m System packages installed
[0;32m[2025-09-04 23:51:59] [INFO][0m Applying system optimizations...
[0;36m[2025-09-04 23:52:02] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-04 23:52:02] [INFO][0m Initializing directory structure...
[0;36m[2025-09-04 23:52:02] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-04 23:52:02] [INFO][0m Generating secrets and certificates...
[0;32m[2025-09-04 23:52:02] [INFO][0m Environment configuration already exists
[0;32m[2025-09-04 23:52:02] [INFO][0m SSL certificates already exist
[0;32m[2025-09-04 23:52:02] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-04 23:52:02] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-04 23:52:02] [INFO][0m Creating Docker network...
[0;32m[2025-09-04 23:52:02] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-04 23:52:02] [INFO][0m Beginning service deployment phase...
[0;32m[2025-09-04 23:52:02] [INFO][0m Deploying infrastructure services...
[0;32m[2025-09-04 23:52:02] [INFO][0m Deploying database services in ordered sequence...
[0;32m[2025-09-04 23:52:02] [INFO][0m Deploying database service: elasticsearch
[0;32m[2025-09-04 23:52:02] [INFO][0m Deploying elasticsearch...
[0;34m[2025-09-04 23:52:02] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-09-04 23:52:29] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-09-04 23:52:29] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-09-04 23:52:29] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-09-04 23:52:29] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-09-04 23:52:29] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-09-04 23:52:29] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-04 23:52:29] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-04 23:52:29] [INFO][0m Deploying database service: cassandra
[0;32m[2025-09-04 23:52:29] [INFO][0m Deploying cassandra...
[0;34m[2025-09-04 23:52:29] [DEBUG][0m Using dedicated deployment script for cassandra
[0;32m[2025-09-04 23:53:09] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;34m[2025-09-04 23:53:09] [DEBUG][0m Checking container status for cassandra...
[0;34m[2025-09-04 23:53:09] [DEBUG][0m cassandra container is running and healthy
[0;34m[2025-09-04 23:53:09] [DEBUG][0m Performing health check for cassandra...
[0;34m[2025-09-04 23:53:09] [DEBUG][0m Cassandra is accepting connections and queries
[0;36m[2025-09-04 23:53:09] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-04 23:53:09] [SUCCESS][0m Service cassandra deployed successfully
[0;32m[2025-09-04 23:53:09] [INFO][0m Deploying database service: wazuh-indexer
[0;32m[2025-09-04 23:53:09] [INFO][0m Deploying wazuh-indexer...
[0;32m[2025-09-04 23:53:09] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;34m[2025-09-04 23:53:09] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-09-04 23:53:09] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-09-04 23:53:09] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-09-04 23:53:09] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-09-04 23:53:09] [SUCCESS][0m elasticsearch is ready and healthy
[0;34m[2025-09-04 23:53:09] [DEBUG][0m Using dedicated deployment script for wazuh-indexer
[0;32m[2025-09-05 00:13:42] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-05 00:13:42] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-05 00:13:42] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 00:13:43] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_001342.tar.gz
[0;32m[2025-09-05 00:13:43] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-05 00:13:43] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-05 00:13:43] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-05 00:13:43] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-05 00:13:43] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-05 00:13:43] [BTPI] [INFO][0m   Available Disk: 191GB
[0;36m[2025-09-05 00:13:43] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-05 00:13:43] [BTPI] [INFO][0m Checking for port conflicts...
[1;33m[2025-09-05 00:13:43] [BTPI] [WARN][0m Port 9042 is already in use by docker-pr (required for cassandra)
[1;33m[2025-09-05 00:13:44] [BTPI] [WARN][0m Port 9200 is already in use by docker-pr (required for elasticsearch)
[1;33m[2025-09-05 00:13:44] [BTPI] [WARN][0m Port 9201 is already in use by docker-pr (required for wazuh-indexer)
[0;31m[2025-09-05 00:13:45] [BTPI] [ERROR][0m Found 3 port conflicts
[1;33m[2025-09-05 00:13:45] [BTPI] [WARN][0m Port conflicts detected - consider resolving before deployment
[0;36m[2025-09-05 00:14:41] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-05 00:14:41] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-05 00:16:42] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-05 00:16:42] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-05 00:16:42] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-05 00:16:42] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 00:16:43] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 00:16:43] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor thehive cortex nginx kasm portainer 
[0;32m[2025-09-05 00:16:43] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-05 00:16:43] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-05 00:16:43] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;31m[2025-09-05 00:16:43] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-05 00:16:43] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-05 00:16:43] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-05 00:16:43] [cassandra] [INFO][0m Deploying service: cassandra
[0;31m[2025-09-05 00:16:43] [BTPI] [ERROR][0m Script failed at line 17 with exit code 127
[0;31m[2025-09-05 00:16:43] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-05 00:16:43] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-05 00:16:43] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-05 00:16:43] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[1;33m[2025-09-05 00:16:43] [BTPI] [WARN][0m Service wazuh-indexer has unmet dependencies: elasticsearch 
[1;33m[2025-09-05 00:16:43] [wazuh-indexer] [WARN][0m Deploying wazuh-indexer despite missing dependencies
[0;32m[2025-09-05 00:16:43] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;31m[2025-09-05 00:16:43] [wazuh-indexer] [ERROR][0m Failed to deploy wazuh-indexer
[0;32m[2025-09-05 00:16:43] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-05 00:16:43] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[1;33m[2025-09-05 00:16:43] [BTPI] [WARN][0m Service wazuh-manager has unmet dependencies: wazuh-indexer 
[1;33m[2025-09-05 00:16:43] [wazuh-manager] [WARN][0m Deploying wazuh-manager despite missing dependencies
[0;32m[2025-09-05 00:16:43] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;31m[2025-09-05 00:16:43] [wazuh-manager] [ERROR][0m Failed to deploy wazuh-manager
[0;32m[2025-09-05 00:16:43] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-05 00:16:43] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-05 00:16:43] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;31m[2025-09-05 00:16:43] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-05 00:16:43] [thehive] [INFO][0m === Deploying thehive ===
[0;32m[2025-09-05 00:16:43] [thehive] [INFO][0m Using modern deployment script for thehive
[1;33m[2025-09-05 00:16:43] [BTPI] [WARN][0m Service thehive has unmet dependencies: cassandra elasticsearch 
[1;33m[2025-09-05 00:16:43] [thehive] [WARN][0m Deploying thehive despite missing dependencies
[0;32m[2025-09-05 00:16:43] [thehive] [INFO][0m Deploying service: thehive
[0;32m[2025-09-05 00:16:43] [BTPI] [INFO][0m Waiting for thehive to be ready (max 300s)...
[0;31m[2025-09-05 00:21:44] [BTPI] [ERROR][0m thehive failed to become ready within 300s
[0;31m[2025-09-05 00:21:44] [thehive] [ERROR][0m Service thehive failed to become ready
[0;32m[2025-09-05 00:21:44] [cortex] [INFO][0m === Deploying cortex ===
[0;32m[2025-09-05 00:21:44] [cortex] [INFO][0m Using modern deployment script for cortex
[1;33m[2025-09-05 00:21:44] [BTPI] [WARN][0m Service cortex has unmet dependencies: cassandra elasticsearch 
[1;33m[2025-09-05 00:21:44] [cortex] [WARN][0m Deploying cortex despite missing dependencies
[0;32m[2025-09-05 00:21:44] [cortex] [INFO][0m Deploying service: cortex
[0;31m[2025-09-05 00:21:44] [cortex] [ERROR][0m Failed to deploy cortex
[0;32m[2025-09-05 00:21:44] [nginx] [INFO][0m === Deploying nginx ===
[0;32m[2025-09-05 00:21:44] [nginx] [INFO][0m Using legacy deployment for nginx
[0;31m[2025-09-05 00:21:44] [nginx] [ERROR][0m No deployment method available for nginx
[0;32m[2025-09-05 10:45:51] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-09-05 10:45:51] [INFO][0m Deployment ID: 4adc7966-5605-4717-a255-0f62229f6846
[0;32m[2025-09-05 10:45:51] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 10:45:51] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_104551.tar.gz
[0;32m[2025-09-05 10:45:51] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-05 10:45:51] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-05 10:45:51] [INFO][0m Docker Compose found: 2.39.2
[0;32m[2025-09-05 10:45:51] [INFO][0m System Resources:
[0;32m[2025-09-05 10:45:51] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-05 10:45:51] [INFO][0m   Memory: 26GB
[0;32m[2025-09-05 10:45:51] [INFO][0m   Available Disk: 191GB
[0;32m[2025-09-05 10:45:51] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-05 10:45:52] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-05 10:45:52] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-09-05 10:45:52] [INFO][0m Installing additional system packages...
[0;36m[2025-09-05 10:46:03] [SUCCESS][0m System packages installed
[0;32m[2025-09-05 10:46:03] [INFO][0m Applying system optimizations...
[0;36m[2025-09-05 10:46:07] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-05 10:46:07] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 10:46:07] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 10:46:07] [INFO][0m Generating secrets and certificates...
[0;32m[2025-09-05 10:46:07] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 10:46:07] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 10:46:07] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 10:46:07] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 10:46:07] [INFO][0m Creating Docker network...
[0;32m[2025-09-05 10:46:07] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 10:46:07] [INFO][0m Beginning service deployment phase...
[0;32m[2025-09-05 10:46:07] [INFO][0m Deploying infrastructure services...
[0;32m[2025-09-05 10:46:07] [INFO][0m Deploying database services in ordered sequence...
[0;32m[2025-09-05 10:46:07] [INFO][0m Deploying database service: elasticsearch
[0;32m[2025-09-05 10:46:07] [INFO][0m Deploying elasticsearch...
[0;34m[2025-09-05 10:46:07] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-09-05 10:46:07] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 10:46:07] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 10:46:07] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 10:46:07] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 10:49:59] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-09-05 10:49:59] [INFO][0m Deployment ID: ead7dc63-b618-4aad-892d-0b31794e3f5d
[0;32m[2025-09-05 10:49:59] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 10:49:59] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_104959.tar.gz
[0;32m[2025-09-05 10:49:59] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-05 10:49:59] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-05 10:49:59] [INFO][0m Docker Compose found: 2.39.2
[0;32m[2025-09-05 10:49:59] [INFO][0m System Resources:
[0;32m[2025-09-05 10:49:59] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-05 10:49:59] [INFO][0m   Memory: 26GB
[0;32m[2025-09-05 10:49:59] [INFO][0m   Available Disk: 191GB
[0;32m[2025-09-05 10:49:59] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-05 10:50:01] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-05 10:50:01] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-09-05 10:50:01] [INFO][0m Installing additional system packages...
[0;36m[2025-09-05 10:50:06] [SUCCESS][0m System packages installed
[0;32m[2025-09-05 10:50:06] [INFO][0m Applying system optimizations...
[0;36m[2025-09-05 10:50:10] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-05 10:50:10] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 10:50:10] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 10:50:10] [INFO][0m Generating secrets and certificates...
[0;32m[2025-09-05 10:50:10] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 10:50:10] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 10:50:10] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 10:50:10] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 10:50:10] [INFO][0m Creating Docker network...
[0;32m[2025-09-05 10:50:10] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 10:50:10] [INFO][0m Beginning service deployment phase...
[0;32m[2025-09-05 10:50:10] [INFO][0m Deploying infrastructure services...
[0;32m[2025-09-05 10:50:10] [INFO][0m Deploying database services in ordered sequence...
[0;32m[2025-09-05 10:50:10] [INFO][0m Deploying database service: elasticsearch
[0;32m[2025-09-05 10:50:10] [INFO][0m Deploying elasticsearch...
[0;34m[2025-09-05 10:50:10] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-09-05 10:50:10] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 10:50:10] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 10:50:10] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 10:50:10] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 10:52:55] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 10:52:55] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 10:52:55] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 10:52:55] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 10:52:55] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 10:52:55] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 10:52:55] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 11:15:41] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-09-05 11:15:42] [INFO][0m Deployment ID: e6c4e071-8977-4ec3-b3fe-6b718e1e0b1b
[0;32m[2025-09-05 11:15:42] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 11:15:44] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_111542.tar.gz
[0;32m[2025-09-05 11:15:44] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-05 11:15:44] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-05 11:15:46] [INFO][0m Docker Compose found: 2.39.2
[0;32m[2025-09-05 11:15:46] [INFO][0m System Resources:
[0;32m[2025-09-05 11:15:46] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-05 11:15:46] [INFO][0m   Memory: 26GB
[0;32m[2025-09-05 11:15:46] [INFO][0m   Available Disk: 190GB
[0;32m[2025-09-05 11:15:46] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-05 11:15:47] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-05 11:15:47] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-09-05 11:15:47] [INFO][0m Installing additional system packages...
[0;36m[2025-09-05 11:15:51] [SUCCESS][0m System packages installed
[0;32m[2025-09-05 11:15:51] [INFO][0m Applying system optimizations...
[0;36m[2025-09-05 11:15:55] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-05 11:15:55] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 11:15:55] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 11:15:55] [INFO][0m Generating secrets and certificates...
[0;32m[2025-09-05 11:15:55] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 11:15:55] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 11:15:55] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 11:15:55] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 11:15:55] [INFO][0m Creating Docker network...
[0;32m[2025-09-05 11:15:55] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 11:15:55] [INFO][0m Beginning service deployment phase...
[0;32m[2025-09-05 11:15:55] [INFO][0m Deploying infrastructure services...
[0;32m[2025-09-05 11:15:55] [INFO][0m Deploying database services in ordered sequence...
[0;32m[2025-09-05 11:15:55] [INFO][0m Deploying database service: elasticsearch
[0;32m[2025-09-05 11:15:55] [INFO][0m Deploying elasticsearch...
[0;34m[2025-09-05 11:15:55] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-09-05 11:15:55] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 11:15:55] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 11:15:55] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 11:15:55] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 11:15:55] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 11:15:55] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 11:15:55] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 11:15:55] [BTPI] [INFO][0m Removing existing Elasticsearch container...
[0;32m[2025-09-05 11:15:58] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 11:15:58] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 11:15:58] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 11:16:29] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 11:16:29] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 11:16:29] [BTPI] [INFO][0m Creating index template: thehive-template
[0;36m[2025-09-05 11:16:32] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 11:16:32] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 11:16:32] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 11:16:32] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 11:16:33] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 11:16:35] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 11:16:36] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 11:16:36] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 11:16:36] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 11:16:36] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 11:16:36] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 11:16:36] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 11:16:36] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-09-05 11:16:36] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-09-05 11:16:36] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-09-05 11:16:36] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-09-05 11:16:36] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-09-05 11:16:36] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-05 11:16:36] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-05 11:16:36] [INFO][0m Deploying database service: cassandra
[0;32m[2025-09-05 11:16:36] [INFO][0m Deploying cassandra...
[0;34m[2025-09-05 11:16:36] [DEBUG][0m Using dedicated deployment script for cassandra
[0;31m[2025-09-05 11:16:36] [BTPI] [ERROR][0m Script failed at line 17 with exit code 127
[0;31m[2025-09-05 11:16:36] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;32m[2025-09-05 11:21:43] [INFO][0m Starting BTPI-REACT deployment v2.0.0...
[0;32m[2025-09-05 11:21:43] [INFO][0m Deployment ID: d312a7c3-23b5-48b1-a31b-e4ee64125c20
[0;32m[2025-09-05 11:21:43] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 11:21:43] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_112143.tar.gz
[0;32m[2025-09-05 11:21:43] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-05 11:21:43] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-05 11:21:43] [INFO][0m Docker Compose found: 2.39.2
[0;32m[2025-09-05 11:21:43] [INFO][0m System Resources:
[0;32m[2025-09-05 11:21:43] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-05 11:21:43] [INFO][0m   Memory: 26GB
[0;32m[2025-09-05 11:21:43] [INFO][0m   Available Disk: 190GB
[0;32m[2025-09-05 11:21:43] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-05 11:21:45] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-05 11:21:45] [SUCCESS][0m Pre-deployment checks completed successfully
[0;32m[2025-09-05 11:21:45] [INFO][0m Installing additional system packages...
[0;36m[2025-09-05 11:21:50] [SUCCESS][0m System packages installed
[0;32m[2025-09-05 11:21:50] [INFO][0m Applying system optimizations...
[0;36m[2025-09-05 11:21:54] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-05 11:21:54] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 11:21:54] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 11:21:54] [INFO][0m Generating secrets and certificates...
[0;32m[2025-09-05 11:21:54] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 11:21:54] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 11:21:54] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 11:21:54] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 11:21:54] [INFO][0m Creating Docker network...
[0;32m[2025-09-05 11:21:54] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 11:21:54] [INFO][0m Beginning service deployment phase...
[0;32m[2025-09-05 11:21:54] [INFO][0m Deploying infrastructure services...
[0;32m[2025-09-05 11:21:54] [INFO][0m Deploying database services in ordered sequence...
[0;32m[2025-09-05 11:21:54] [INFO][0m Deploying database service: elasticsearch
[0;32m[2025-09-05 11:21:54] [INFO][0m Deploying elasticsearch...
[0;34m[2025-09-05 11:21:54] [DEBUG][0m Using dedicated deployment script for elasticsearch
[0;32m[2025-09-05 11:21:54] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 11:21:54] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 11:21:54] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 11:21:54] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 11:21:54] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 11:21:54] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 11:21:54] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 11:21:56] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 11:21:56] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 11:21:56] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 11:22:16] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 11:22:16] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 11:22:16] [BTPI] [INFO][0m Creating index template: thehive-template
[0;36m[2025-09-05 11:22:16] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 11:22:16] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 11:22:16] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 11:22:16] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 11:22:17] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 11:22:20] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 11:22:21] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 11:22:21] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 11:22:21] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 11:22:21] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 11:22:21] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 11:22:21] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 11:22:21] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-09-05 11:22:21] [DEBUG][0m Checking container status for elasticsearch...
[0;34m[2025-09-05 11:22:21] [DEBUG][0m elasticsearch container is running and healthy
[0;34m[2025-09-05 11:22:21] [DEBUG][0m Performing health check for elasticsearch...
[0;34m[2025-09-05 11:22:21] [DEBUG][0m Elasticsearch cluster status: green
[0;36m[2025-09-05 11:22:21] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-05 11:22:21] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-05 11:22:21] [INFO][0m Deploying database service: cassandra
[0;32m[2025-09-05 11:22:21] [INFO][0m Deploying cassandra...
[0;34m[2025-09-05 11:22:21] [DEBUG][0m Using dedicated deployment script for cassandra
[0;31m[2025-09-05 11:22:21] [BTPI] [ERROR][0m Script failed at line 17 with exit code 127
[0;31m[2025-09-05 11:22:21] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;32m[2025-09-05 11:37:36] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-05 11:37:36] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-05 11:37:36] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 11:37:36] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_113736.tar.gz
[0;32m[2025-09-05 11:37:36] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-05 11:37:36] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-05 11:37:36] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-05 11:37:36] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-05 11:37:36] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-05 11:37:36] [BTPI] [INFO][0m   Available Disk: 190GB
[0;36m[2025-09-05 11:37:37] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-05 11:37:37] [BTPI] [INFO][0m Checking for port conflicts...
[1;33m[2025-09-05 11:37:48] [BTPI] [WARN][0m Port 9200 is already in use by docker-pr (required for elasticsearch)
[0;31m[2025-09-05 11:37:52] [BTPI] [ERROR][0m Found 1 port conflicts
[1;33m[2025-09-05 11:37:52] [BTPI] [WARN][0m Port conflicts detected - consider resolving before deployment
[0;32m[2025-09-05 11:42:13] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 11:42:13] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 11:42:13] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 11:42:13] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 11:42:31] [cassandra] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 11:42:31] [cassandra] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 11:42:31] [cassandra] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 11:42:31] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 11:42:31] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 11:42:31] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 11:42:31] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 11:42:33] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 11:42:33] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 11:42:37] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 11:42:37] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 11:42:48] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 11:42:48] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 11:42:58] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 3/60)
[0;32m[2025-09-05 11:42:59] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 11:43:09] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 4/60)
[0;32m[2025-09-05 11:43:09] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 11:43:20] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 5/60)
[0;32m[2025-09-05 11:43:20] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 11:43:31] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 6/60)
[0;32m[2025-09-05 11:43:31] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 11:43:41] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 7/60)
[0;32m[2025-09-05 11:43:41] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 11:43:52] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 8/60)
[0;32m[2025-09-05 11:43:52] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 11:43:54] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 11:43:56] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 11:43:57] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 11:43:57] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 11:43:57] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 11:43:57] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 11:43:57] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 11:44:03] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 11:44:08] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 11:44:08] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 11:44:08] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 11:44:08] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 11:44:08] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 11:44:51] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-05 11:44:51] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-05 11:44:52] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 11:44:52] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_114452.tar.gz
[0;32m[2025-09-05 11:44:52] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-05 11:44:52] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-05 11:44:52] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-05 11:44:52] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-05 11:44:52] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-05 11:44:52] [BTPI] [INFO][0m   Available Disk: 190GB
[0;36m[2025-09-05 11:44:52] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-05 11:44:52] [BTPI] [INFO][0m Checking for port conflicts...
[0;32m[2025-09-05 11:44:54] [BTPI] [INFO][0m Port 9042 is in use by healthy cassandra - conflict resolved automatically
[0;32m[2025-09-05 11:45:05] [BTPI] [INFO][0m Port 9200 is in use by healthy elasticsearch - conflict resolved automatically
[0;36m[2025-09-05 11:45:08] [BTPI] [SUCCESS][0m Resolved 2 port conflicts automatically
[0;36m[2025-09-05 11:45:08] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-05 11:45:08] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-05 11:45:13] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-05 11:45:13] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 11:45:13] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 11:45:13] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor thehive cortex nginx kasm portainer 
[0;32m[2025-09-05 11:45:13] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-05 11:45:13] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-05 11:45:13] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;32m[2025-09-05 11:45:13] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 11:45:13] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 11:45:13] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 11:45:13] [BTPI] [INFO][0m Removing existing Elasticsearch container...
[0;32m[2025-09-05 11:45:19] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 11:45:19] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 11:45:19] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 11:45:40] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 11:45:40] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 11:45:40] [BTPI] [INFO][0m Creating index template: thehive-template
[0;36m[2025-09-05 11:45:40] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 11:45:40] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 11:45:40] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 11:45:40] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 11:45:41] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-05 11:45:42] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-05 11:45:42] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-05 11:45:42] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-05 11:45:42] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-05 11:45:42] [cassandra] [INFO][0m Deploying service: cassandra
[0;32m[2025-09-05 11:45:42] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 11:45:42] [cassandra] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 11:45:42] [BTPI] [INFO][0m Removing existing Cassandra container...
[0;32m[2025-09-05 11:45:51] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 11:45:51] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 11:45:52] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 11:45:52] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 11:46:02] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 11:46:02] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 11:46:13] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 11:46:13] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 11:46:14] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 11:46:15] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 11:46:16] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 11:46:16] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 11:46:16] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 11:46:16] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 11:46:16] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 11:46:23] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 11:46:27] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 11:46:27] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 11:46:27] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 11:46:27] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 11:46:27] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 11:46:27] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;36m[2025-09-05 11:46:28] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 11:46:28] [cassandra] [SUCCESS][0m Service cassandra deployment completed
[0;32m[2025-09-05 11:46:28] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-05 11:46:28] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-05 11:46:28] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;32m[2025-09-05 11:46:28] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-05 11:46:28] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-05 11:46:28] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-05 11:46:28] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-05 11:46:28] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-05 11:46:28] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-05 11:48:26] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-05 11:48:26] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-05 11:48:26] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;36m[2025-09-05 11:48:56] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-05 11:48:56] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 11:48:56] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 300s)...
[0;36m[2025-09-05 11:48:57] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;36m[2025-09-05 11:48:57] [wazuh-indexer] [SUCCESS][0m Service wazuh-indexer deployment completed
[0;32m[2025-09-05 11:48:57] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-05 11:48:57] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[0;32m[2025-09-05 11:48:57] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;31m[2025-09-05 11:48:57] [wazuh-manager] [ERROR][0m Failed to deploy wazuh-manager using modern script
[0;32m[2025-09-05 11:48:57] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-05 11:48:57] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-05 11:48:57] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;31m[2025-09-05 11:48:57] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-05 11:48:57] [thehive] [INFO][0m === Deploying thehive ===
[0;32m[2025-09-05 11:48:57] [thehive] [INFO][0m Using modern deployment script for thehive
[0;32m[2025-09-05 11:48:57] [thehive] [INFO][0m Deploying service: thehive
[0;32m[2025-09-05 11:48:57] [BTPI] [INFO][0m Waiting for thehive to be ready (max 300s)...
[0;31m[2025-09-05 11:53:58] [BTPI] [ERROR][0m thehive failed to become ready within 300s
[0;31m[2025-09-05 11:53:58] [thehive] [ERROR][0m Service thehive failed to become ready
[0;32m[2025-09-05 11:53:58] [cortex] [INFO][0m === Deploying cortex ===
[0;32m[2025-09-05 11:53:58] [cortex] [INFO][0m Using modern deployment script for cortex
[0;32m[2025-09-05 11:53:58] [cortex] [INFO][0m Deploying service: cortex
[0;32m[2025-09-05 11:53:58] [BTPI] [INFO][0m Starting Cortex deployment...
[0;32m[2025-09-05 11:53:58] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-05 11:53:58] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 11:53:58] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 11:53:58] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 120s)...
[0;36m[2025-09-05 11:53:59] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 11:53:59] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-05 11:53:59] [BTPI] [INFO][0m Creating Cortex configuration...
[0;31m[2025-09-05 11:53:59] [cortex] [ERROR][0m Failed to deploy cortex using modern script
[0;32m[2025-09-05 11:53:59] [nginx] [INFO][0m === Deploying nginx ===
[0;32m[2025-09-05 11:53:59] [nginx] [INFO][0m Using legacy deployment for nginx
[0;31m[2025-09-05 11:53:59] [nginx] [ERROR][0m No deployment method available for nginx
[0;32m[2025-09-05 12:03:06] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-05 12:03:06] [BTPI] [INFO][0m Deployment mode: simple
[0;32m[2025-09-05 12:03:06] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 12:03:06] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_120306.tar.gz
[0;32m[2025-09-05 12:03:06] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-05 12:03:06] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-05 12:03:07] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-05 12:03:07] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-05 12:03:07] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-05 12:03:07] [BTPI] [INFO][0m   Available Disk: 188GB
[0;36m[2025-09-05 12:03:07] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-05 12:03:07] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-09-05 12:03:08] [BTPI] [DEBUG][0m Validating existing cassandra service on port 9042...
[0;34m[2025-09-05 12:03:09] [BTPI] [DEBUG][0m cassandra is running and healthy - port conflict resolved
[0;32m[2025-09-05 12:03:09] [BTPI] [INFO][0m Port 9042 is in use by healthy cassandra - conflict resolved automatically
[0;34m[2025-09-05 12:03:20] [BTPI] [DEBUG][0m Validating existing elasticsearch service on port 9200...
[0;34m[2025-09-05 12:03:20] [BTPI] [DEBUG][0m elasticsearch is running and healthy - port conflict resolved
[0;32m[2025-09-05 12:03:20] [BTPI] [INFO][0m Port 9200 is in use by healthy elasticsearch - conflict resolved automatically
[0;34m[2025-09-05 12:03:22] [BTPI] [DEBUG][0m Validating existing wazuh-indexer service on port 9201...
[0;34m[2025-09-05 12:03:22] [BTPI] [DEBUG][0m wazuh-indexer is running and healthy - port conflict resolved
[0;32m[2025-09-05 12:03:22] [BTPI] [INFO][0m Port 9201 is in use by healthy wazuh-indexer - conflict resolved automatically
[0;34m[2025-09-05 12:03:24] [BTPI] [DEBUG][0m Validating existing wazuh-indexer service on port 9600...
[0;34m[2025-09-05 12:03:24] [BTPI] [DEBUG][0m wazuh-indexer is running and healthy - port conflict resolved
[0;32m[2025-09-05 12:03:24] [BTPI] [INFO][0m Port 9600 is in use by healthy wazuh-indexer - conflict resolved automatically
[0;36m[2025-09-05 12:03:25] [BTPI] [SUCCESS][0m Resolved 4 port conflicts automatically
[0;36m[2025-09-05 12:03:25] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-05 12:03:25] [BTPI] [INFO][0m Skipping additional package installation in simple mode
[0;32m[2025-09-05 12:03:25] [BTPI] [INFO][0m Skipping system optimization
[0;32m[2025-09-05 12:03:25] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 12:03:26] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 12:03:26] [unified-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:03:26] [unified-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:03:26] [unified-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:03:26] [unified-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:03:26] [unified-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:03:26] [unified-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 12:03:26] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra thehive cortex velociraptor kasm portainer
[0;32m[2025-09-05 12:03:26] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-05 12:03:26] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-05 12:03:26] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-05 12:03:26] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-05 12:03:26] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:03:26] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:03:26] [elasticsearch] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:03:26] [elasticsearch] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:03:26] [elasticsearch] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:03:26] [elasticsearch] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 12:03:26] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 12:03:26] [BTPI] [INFO][0m Removing existing Elasticsearch container...
[0;32m[2025-09-05 12:03:31] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 12:03:31] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 12:03:31] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;34m[2025-09-05 12:03:31] [BTPI] [DEBUG][0m elasticsearch health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-05 12:03:41] [BTPI] [DEBUG][0m elasticsearch health check attempt 2/12 failed, waiting 10s...
[0;36m[2025-09-05 12:03:51] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 12:03:51] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 12:03:51] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 12:03:51] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 12:03:52] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 12:03:52] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 12:03:52] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 12:03:52] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 12:03:52] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 12:03:52] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 12:03:53] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-05 12:03:55] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-05 12:03:55] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-05 12:03:55] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-05 12:03:55] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-05 12:03:55] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-05 12:03:55] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-05 12:03:55] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:03:55] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:03:55] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:03:55] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:03:55] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:03:55] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 12:03:55] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 12:03:56] [BTPI] [INFO][0m Removing existing Cassandra container...
[0;32m[2025-09-05 12:04:04] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 12:04:04] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 12:04:05] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 12:04:05] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 12:04:16] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 12:04:16] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 12:04:27] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 12:04:27] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 12:04:27] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 12:04:29] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 12:04:30] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 12:04:30] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 12:04:30] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 12:04:30] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 12:04:30] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 12:04:38] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 12:04:41] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 12:04:41] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 12:04:41] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 12:04:41] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 12:04:41] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 12:04:41] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;36m[2025-09-05 12:04:42] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 12:04:42] [cassandra] [SUCCESS][0m Service cassandra deployment completed
[0;32m[2025-09-05 12:04:42] [thehive] [INFO][0m === Deploying thehive ===
[0;32m[2025-09-05 12:04:42] [thehive] [INFO][0m Using modern deployment script for thehive
[0;32m[2025-09-05 12:04:42] [thehive] [INFO][0m Deploying service: thehive
[0;34m[2025-09-05 12:04:42] [thehive] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/thehive/deploy.sh
[0;32m[2025-09-05 12:04:42] [BTPI] [INFO][0m Waiting for thehive to be ready (max 300s)...
[0;34m[2025-09-05 12:04:42] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:04:42] [BTPI] [DEBUG][0m thehive health check attempt 1/30 failed, waiting 10s...
[0;34m[2025-09-05 12:04:52] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:04:52] [BTPI] [DEBUG][0m thehive health check attempt 2/30 failed, waiting 10s...
[0;34m[2025-09-05 12:05:02] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:05:02] [BTPI] [DEBUG][0m thehive health check attempt 3/30 failed, waiting 10s...
[0;34m[2025-09-05 12:05:12] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:05:12] [BTPI] [DEBUG][0m thehive health check attempt 4/30 failed, waiting 10s...
[0;34m[2025-09-05 12:05:22] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:05:22] [BTPI] [DEBUG][0m thehive health check attempt 5/30 failed, waiting 10s...
[0;34m[2025-09-05 12:05:32] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:05:32] [BTPI] [DEBUG][0m thehive health check attempt 6/30 failed, waiting 10s...
[0;34m[2025-09-05 12:05:42] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:05:42] [BTPI] [DEBUG][0m thehive health check attempt 7/30 failed, waiting 10s...
[0;34m[2025-09-05 12:05:52] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:05:52] [BTPI] [DEBUG][0m thehive health check attempt 8/30 failed, waiting 10s...
[0;34m[2025-09-05 12:06:02] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:06:02] [BTPI] [DEBUG][0m thehive health check attempt 9/30 failed, waiting 10s...
[0;34m[2025-09-05 12:06:12] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:06:12] [BTPI] [DEBUG][0m thehive health check attempt 10/30 failed, waiting 10s...
[0;34m[2025-09-05 12:06:23] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:06:23] [BTPI] [DEBUG][0m thehive health check attempt 11/30 failed, waiting 10s...
[0;34m[2025-09-05 12:06:33] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:06:33] [BTPI] [DEBUG][0m thehive health check attempt 12/30 failed, waiting 10s...
[0;34m[2025-09-05 12:06:43] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:06:43] [BTPI] [DEBUG][0m thehive health check attempt 13/30 failed, waiting 10s...
[0;34m[2025-09-05 12:06:53] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:06:53] [BTPI] [DEBUG][0m thehive health check attempt 14/30 failed, waiting 10s...
[0;34m[2025-09-05 12:07:03] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:07:03] [BTPI] [DEBUG][0m thehive health check attempt 15/30 failed, waiting 10s...
[0;34m[2025-09-05 12:07:13] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:07:13] [BTPI] [DEBUG][0m thehive health check attempt 16/30 failed, waiting 10s...
[0;34m[2025-09-05 12:07:23] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:07:23] [BTPI] [DEBUG][0m thehive health check attempt 17/30 failed, waiting 10s...
[0;34m[2025-09-05 12:07:33] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:07:33] [BTPI] [DEBUG][0m thehive health check attempt 18/30 failed, waiting 10s...
[0;34m[2025-09-05 12:07:43] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:07:43] [BTPI] [DEBUG][0m thehive health check attempt 19/30 failed, waiting 10s...
[0;34m[2025-09-05 12:07:53] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:07:53] [BTPI] [DEBUG][0m thehive health check attempt 20/30 failed, waiting 10s...
[0;34m[2025-09-05 12:08:03] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:08:03] [BTPI] [DEBUG][0m thehive health check attempt 21/30 failed, waiting 10s...
[0;34m[2025-09-05 12:08:13] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:08:13] [BTPI] [DEBUG][0m thehive health check attempt 22/30 failed, waiting 10s...
[0;34m[2025-09-05 12:08:23] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:08:23] [BTPI] [DEBUG][0m thehive health check attempt 23/30 failed, waiting 10s...
[0;34m[2025-09-05 12:08:33] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:08:33] [BTPI] [DEBUG][0m thehive health check attempt 24/30 failed, waiting 10s...
[0;34m[2025-09-05 12:08:43] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:08:43] [BTPI] [DEBUG][0m thehive health check attempt 25/30 failed, waiting 10s...
[0;34m[2025-09-05 12:08:53] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:08:53] [BTPI] [DEBUG][0m thehive health check attempt 26/30 failed, waiting 10s...
[0;34m[2025-09-05 12:09:03] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:09:03] [BTPI] [DEBUG][0m thehive health check attempt 27/30 failed, waiting 10s...
[0;34m[2025-09-05 12:09:13] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:09:13] [BTPI] [DEBUG][0m thehive health check attempt 28/30 failed, waiting 10s...
[0;34m[2025-09-05 12:09:23] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:09:23] [BTPI] [DEBUG][0m thehive health check attempt 29/30 failed, waiting 10s...
[0;34m[2025-09-05 12:09:33] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:09:33] [BTPI] [DEBUG][0m thehive health check attempt 30/30 failed, waiting 10s...
[0;31m[2025-09-05 12:09:43] [BTPI] [ERROR][0m thehive failed to become ready within 300s
[0;34m[2025-09-05 12:09:43] [BTPI] [DEBUG][0m === DEBUG INFO FOR thehive ===
[0;34m[2025-09-05 12:09:43] [BTPI] [DEBUG][0m Container 'thehive' not found
[0;34m[2025-09-05 12:09:43] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-05 12:09:43] [BTPI] [DEBUG][0m   Could not retrieve logs for thehive
[0;34m[2025-09-05 12:09:43] [BTPI] [DEBUG][0m === END DEBUG INFO FOR thehive ===
[0;31m[2025-09-05 12:09:43] [thehive] [ERROR][0m Service thehive failed to become ready
[0;32m[2025-09-05 12:09:43] [cortex] [INFO][0m === Deploying cortex ===
[0;32m[2025-09-05 12:09:43] [cortex] [INFO][0m Using modern deployment script for cortex
[0;32m[2025-09-05 12:09:43] [cortex] [INFO][0m Deploying service: cortex
[0;34m[2025-09-05 12:09:43] [cortex] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cortex/deploy.sh
[0;32m[2025-09-05 12:09:43] [cortex] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:09:43] [cortex] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:09:43] [cortex] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:09:43] [cortex] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:09:43] [cortex] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:09:43] [cortex] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:09:43] [BTPI] [INFO][0m Starting Cortex deployment...
[0;32m[2025-09-05 12:09:43] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-05 12:09:43] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 12:09:44] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 12:09:44] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 120s)...
[0;36m[2025-09-05 12:09:44] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 12:09:44] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-05 12:09:44] [BTPI] [INFO][0m Creating Cortex configuration...
[0;36m[2025-09-05 12:09:44] [BTPI] [SUCCESS][0m Cortex configuration created
[0;32m[2025-09-05 12:09:44] [BTPI] [INFO][0m Deploying analyzer configurations...
[0;36m[2025-09-05 12:09:44] [BTPI] [SUCCESS][0m Analyzer configurations deployed
[0;32m[2025-09-05 12:09:44] [BTPI] [INFO][0m Deploying responder configurations...
[0;36m[2025-09-05 12:09:44] [BTPI] [SUCCESS][0m Responder configurations deployed
[0;32m[2025-09-05 12:09:44] [BTPI] [INFO][0m Deploying Cortex container...
[0;32m[2025-09-05 12:10:17] [BTPI] [INFO][0m Cortex container deployed
[0;32m[2025-09-05 12:10:17] [BTPI] [INFO][0m Configuring Cortex dependencies...
[0;32m[2025-09-05 12:10:17] [BTPI] [INFO][0m Creating Cortex keyspace in Cassandra...
[0;32m[2025-09-05 12:10:18] [BTPI] [INFO][0m Creating Cortex index in Elasticsearch...
[1;33m[2025-09-05 12:10:18] [BTPI] [WARN][0m Failed to create Cortex Elasticsearch index
[0;36m[2025-09-05 12:10:18] [BTPI] [SUCCESS][0m Dependencies configured
[0;32m[2025-09-05 12:10:18] [BTPI] [INFO][0m Configuring Cortex post-deployment...
[0;32m[2025-09-05 12:10:18] [BTPI] [INFO][0m Waiting for cortex to be ready (max 120s)...
[0;34m[2025-09-05 12:10:18] [BTPI] [DEBUG][0m cortex health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-05 12:10:28] [BTPI] [DEBUG][0m cortex health check attempt 2/12 failed, waiting 10s...
[0;34m[2025-09-05 12:10:38] [BTPI] [DEBUG][0m cortex health check attempt 3/12 failed, waiting 10s...
[0;34m[2025-09-05 12:10:48] [BTPI] [DEBUG][0m cortex health check attempt 4/12 failed, waiting 10s...
[0;34m[2025-09-05 12:10:58] [BTPI] [DEBUG][0m cortex health check attempt 5/12 failed, waiting 10s...
[0;34m[2025-09-05 12:11:08] [BTPI] [DEBUG][0m cortex health check attempt 6/12 failed, waiting 10s...
[0;34m[2025-09-05 12:11:18] [BTPI] [DEBUG][0m cortex health check attempt 7/12 failed, waiting 10s...
[0;34m[2025-09-05 12:11:28] [BTPI] [DEBUG][0m cortex health check attempt 8/12 failed, waiting 10s...
[0;34m[2025-09-05 12:11:38] [BTPI] [DEBUG][0m cortex health check attempt 9/12 failed, waiting 10s...
[0;34m[2025-09-05 12:11:48] [BTPI] [DEBUG][0m cortex health check attempt 10/12 failed, waiting 10s...
[0;34m[2025-09-05 12:11:58] [BTPI] [DEBUG][0m cortex health check attempt 11/12 failed, waiting 10s...
[0;34m[2025-09-05 12:12:08] [BTPI] [DEBUG][0m cortex health check attempt 12/12 failed, waiting 10s...
[0;31m[2025-09-05 12:12:18] [BTPI] [ERROR][0m cortex failed to become ready within 120s
[0;34m[2025-09-05 12:12:18] [BTPI] [DEBUG][0m === DEBUG INFO FOR cortex ===
[0;34m[2025-09-05 12:12:18] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-05 12:12:18] [BTPI] [DEBUG][0m   cortex          Restarting (1) 50 seconds ago
[0;34m[2025-09-05 12:12:18] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: ... 4 more
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: Using elasticsearch uri: http://172.20.240.1:9200,
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: config file is:
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: play.http.secret.key="mBmGzyv2NE0EgWhJG4DpEgp902O4eKKXcFQXUwq0UYWfRLWhib2Gc5Dj1DvzCU6q"
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: search.uri="http://172.20.240.1:9200,"
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: job.directory="/tmp/cortex-jobs"
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: analyzer.urls=["https://download.thehive-project.org/analyzers.json"]
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: responder.urls=["https://download.thehive-project.org/responders.json"]
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: include file("/etc/cortex/application.conf")
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m   LOG: chown: changing ownership of '/etc/cortex/application.conf': Read-only file system
[0;34m[2025-09-05 12:12:19] [BTPI] [DEBUG][0m === END DEBUG INFO FOR cortex ===
[0;31m[2025-09-05 12:12:19] [BTPI] [ERROR][0m Cortex did not become ready in time
[0;31m[2025-09-05 12:12:19] [cortex] [ERROR][0m Failed to deploy cortex using modern script
[0;32m[2025-09-05 12:12:19] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-05 12:12:19] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-05 12:12:19] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;34m[2025-09-05 12:12:19] [velociraptor] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/velociraptor/deploy.sh
[0;32m[2025-09-05 12:12:19] [velociraptor] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:12:19] [velociraptor] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:12:19] [velociraptor] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:12:19] [velociraptor] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:12:19] [velociraptor] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:12:19] [velociraptor] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;31m[2025-09-05 12:12:19] [BTPI] [ERROR][0m Script failed at line 50 with exit code 127
[0;31m[2025-09-05 12:12:19] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-05 12:12:19] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-05 12:12:19] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-05 12:12:19] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-05 12:12:19] [kasm] [INFO][0m Deploying service: kasm
[0;34m[2025-09-05 12:12:19] [kasm] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/kasm/deploy.sh
[0;32m[2025-09-05 12:12:19] [KASM] [INFO][0m Starting Kasm deployment...
[0;31m[2025-09-05 12:12:19] [KASM] [ERROR][0m No deployment method available for Kasm
[0;31m[2025-09-05 12:12:19] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-05 12:12:19] [portainer] [INFO][0m === Deploying portainer ===
[0;32m[2025-09-05 12:12:19] [portainer] [INFO][0m Using modern deployment script for portainer
[0;32m[2025-09-05 12:12:19] [portainer] [INFO][0m Deploying service: portainer
[0;34m[2025-09-05 12:12:19] [portainer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/portainer/deploy.sh
[0;32m[2025-09-05 12:12:19] [PORTAINER] [INFO][0m Starting Portainer deployment...
[0;31m[2025-09-05 12:12:19] [PORTAINER] [ERROR][0m No deployment method available for Portainer
[0;31m[2025-09-05 12:12:19] [portainer] [ERROR][0m Failed to deploy portainer using modern script
[0;32m[2025-09-05 12:12:19] [BTPI] [INFO][0m === Beginning integration configuration phase ===
[0;32m[2025-09-05 12:12:19] [BTPI] [INFO][0m Configuring service integrations...
[0;36m[2025-09-05 12:12:19] [BTPI] [SUCCESS][0m Service integrations configured
[0;32m[2025-09-05 12:12:19] [BTPI] [INFO][0m === Beginning testing phase ===
[0;32m[2025-09-05 12:12:19] [BTPI] [INFO][0m Running deployment tests...
[0;32m[2025-09-05 12:12:19] [BTPI] [INFO][0m Running comprehensive integration tests...
[1;33m[2025-09-05 12:12:19] [BTPI] [WARN][0m Some integration tests failed
[0;32m[2025-09-05 12:12:19] [BTPI] [INFO][0m Generating deployment report...
[0;36m[2025-09-05 12:12:19] [BTPI] [SUCCESS][0m Deployment report saved to: /home/cmndcntrl/code/btpi-react/logs/deployment_report_20250905_121219.txt
[1;33m[2025-09-05 12:12:19] [BTPI] [WARN][0m BTPI-REACT deployment completed with warnings
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Deployment mode: simple
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 12:30:50] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_123050.tar.gz
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Skipping pre-deployment checks as requested
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Skipping additional package installation in simple mode
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Skipping system optimization
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 12:30:50] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 12:30:50] [unified-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:30:50] [unified-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:30:50] [unified-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:30:50] [unified-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:30:50] [unified-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:30:50] [unified-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 12:30:50] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra thehive cortex velociraptor kasm portainer
[0;32m[2025-09-05 12:30:50] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-05 12:30:50] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-05 12:30:50] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-05 12:30:50] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-05 12:30:50] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:30:50] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:30:50] [elasticsearch] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:30:50] [elasticsearch] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:30:50] [elasticsearch] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:30:50] [elasticsearch] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 12:30:50] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 12:30:50] [BTPI] [INFO][0m Removing existing Elasticsearch container...
[0;32m[2025-09-05 12:30:55] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 12:30:55] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 12:30:55] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;34m[2025-09-05 12:30:55] [BTPI] [DEBUG][0m elasticsearch health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-05 12:31:06] [BTPI] [DEBUG][0m elasticsearch health check attempt 2/12 failed, waiting 10s...
[0;36m[2025-09-05 12:31:16] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 12:31:16] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 12:31:16] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 12:31:16] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 12:31:16] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 12:31:16] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 12:31:16] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 12:31:16] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 12:31:16] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 12:31:16] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 12:31:17] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-05 12:31:19] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-05 12:31:19] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-05 12:31:19] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-05 12:31:19] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-05 12:31:19] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-05 12:31:19] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-05 12:31:19] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:31:19] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:31:19] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:31:19] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:31:19] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:31:19] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 12:31:19] [BTPI] [INFO][0m Removing existing Cassandra container...
[0;32m[2025-09-05 12:31:28] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 12:31:28] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 12:31:29] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 12:31:29] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 12:31:39] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 12:31:39] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 12:31:50] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 12:31:50] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 12:31:51] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 12:31:52] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 12:31:53] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 12:31:53] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 12:31:53] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 12:31:53] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 12:31:53] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 12:32:05] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 12:32:10] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 12:32:10] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 12:32:10] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 12:32:10] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 12:32:10] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 12:32:10] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;36m[2025-09-05 12:32:11] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 12:32:11] [cassandra] [SUCCESS][0m Service cassandra deployment completed
[0;32m[2025-09-05 12:32:11] [thehive] [INFO][0m === Deploying thehive ===
[0;32m[2025-09-05 12:32:11] [thehive] [INFO][0m Using modern deployment script for thehive
[0;32m[2025-09-05 12:32:11] [thehive] [INFO][0m Deploying service: thehive
[0;34m[2025-09-05 12:32:11] [thehive] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/thehive/deploy.sh
[0;32m[2025-09-05 12:32:11] [BTPI] [INFO][0m Waiting for thehive to be ready (max 300s)...
[0;34m[2025-09-05 12:32:11] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:32:11] [BTPI] [DEBUG][0m thehive health check attempt 1/30 failed, waiting 10s...
[0;34m[2025-09-05 12:32:21] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:32:21] [BTPI] [DEBUG][0m thehive health check attempt 2/30 failed, waiting 10s...
[0;34m[2025-09-05 12:32:31] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:32:31] [BTPI] [DEBUG][0m thehive health check attempt 3/30 failed, waiting 10s...
[0;34m[2025-09-05 12:32:41] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:32:41] [BTPI] [DEBUG][0m thehive health check attempt 4/30 failed, waiting 10s...
[0;34m[2025-09-05 12:32:51] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:32:51] [BTPI] [DEBUG][0m thehive health check attempt 5/30 failed, waiting 10s...
[0;34m[2025-09-05 12:33:01] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:33:01] [BTPI] [DEBUG][0m thehive health check attempt 6/30 failed, waiting 10s...
[0;34m[2025-09-05 12:33:11] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:33:11] [BTPI] [DEBUG][0m thehive health check attempt 7/30 failed, waiting 10s...
[0;34m[2025-09-05 12:33:21] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:33:21] [BTPI] [DEBUG][0m thehive health check attempt 8/30 failed, waiting 10s...
[0;34m[2025-09-05 12:33:31] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:33:31] [BTPI] [DEBUG][0m thehive health check attempt 9/30 failed, waiting 10s...
[0;34m[2025-09-05 12:33:41] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:33:41] [BTPI] [DEBUG][0m thehive health check attempt 10/30 failed, waiting 10s...
[0;34m[2025-09-05 12:33:51] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:33:51] [BTPI] [DEBUG][0m thehive health check attempt 11/30 failed, waiting 10s...
[0;34m[2025-09-05 12:34:01] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:34:01] [BTPI] [DEBUG][0m thehive health check attempt 12/30 failed, waiting 10s...
[0;34m[2025-09-05 12:34:11] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:34:11] [BTPI] [DEBUG][0m thehive health check attempt 13/30 failed, waiting 10s...
[0;34m[2025-09-05 12:34:21] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:34:21] [BTPI] [DEBUG][0m thehive health check attempt 14/30 failed, waiting 10s...
[0;34m[2025-09-05 12:34:31] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:34:31] [BTPI] [DEBUG][0m thehive health check attempt 15/30 failed, waiting 10s...
[0;34m[2025-09-05 12:34:41] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:34:41] [BTPI] [DEBUG][0m thehive health check attempt 16/30 failed, waiting 10s...
[0;34m[2025-09-05 12:34:51] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:34:51] [BTPI] [DEBUG][0m thehive health check attempt 17/30 failed, waiting 10s...
[0;34m[2025-09-05 12:35:01] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:35:01] [BTPI] [DEBUG][0m thehive health check attempt 18/30 failed, waiting 10s...
[0;34m[2025-09-05 12:35:11] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:35:11] [BTPI] [DEBUG][0m thehive health check attempt 19/30 failed, waiting 10s...
[0;34m[2025-09-05 12:35:21] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:35:21] [BTPI] [DEBUG][0m thehive health check attempt 20/30 failed, waiting 10s...
[0;34m[2025-09-05 12:35:31] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:35:31] [BTPI] [DEBUG][0m thehive health check attempt 21/30 failed, waiting 10s...
[0;34m[2025-09-05 12:35:41] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:35:41] [BTPI] [DEBUG][0m thehive health check attempt 22/30 failed, waiting 10s...
[0;34m[2025-09-05 12:35:52] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:35:52] [BTPI] [DEBUG][0m thehive health check attempt 23/30 failed, waiting 10s...
[0;34m[2025-09-05 12:36:02] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:36:02] [BTPI] [DEBUG][0m thehive health check attempt 24/30 failed, waiting 10s...
[0;34m[2025-09-05 12:36:12] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:36:12] [BTPI] [DEBUG][0m thehive health check attempt 25/30 failed, waiting 10s...
[0;34m[2025-09-05 12:36:22] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:36:22] [BTPI] [DEBUG][0m thehive health check attempt 26/30 failed, waiting 10s...
[0;34m[2025-09-05 12:36:32] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:36:32] [BTPI] [DEBUG][0m thehive health check attempt 27/30 failed, waiting 10s...
[0;34m[2025-09-05 12:36:42] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:36:42] [BTPI] [DEBUG][0m thehive health check attempt 28/30 failed, waiting 10s...
[0;34m[2025-09-05 12:36:52] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:36:52] [BTPI] [DEBUG][0m thehive health check attempt 29/30 failed, waiting 10s...
[0;34m[2025-09-05 12:37:02] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:37:02] [BTPI] [DEBUG][0m thehive health check attempt 30/30 failed, waiting 10s...
[0;31m[2025-09-05 12:37:12] [BTPI] [ERROR][0m thehive failed to become ready within 300s
[0;34m[2025-09-05 12:37:12] [BTPI] [DEBUG][0m === DEBUG INFO FOR thehive ===
[0;34m[2025-09-05 12:37:12] [BTPI] [DEBUG][0m Container 'thehive' not found
[0;34m[2025-09-05 12:37:12] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-05 12:37:12] [BTPI] [DEBUG][0m   Could not retrieve logs for thehive
[0;34m[2025-09-05 12:37:12] [BTPI] [DEBUG][0m === END DEBUG INFO FOR thehive ===
[0;31m[2025-09-05 12:37:12] [thehive] [ERROR][0m Service thehive failed to become ready
[0;32m[2025-09-05 12:37:12] [cortex] [INFO][0m === Deploying cortex ===
[0;32m[2025-09-05 12:37:12] [cortex] [INFO][0m Using modern deployment script for cortex
[0;32m[2025-09-05 12:37:12] [cortex] [INFO][0m Deploying service: cortex
[0;34m[2025-09-05 12:37:12] [cortex] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cortex/deploy.sh
[0;32m[2025-09-05 12:37:12] [cortex] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:37:12] [cortex] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:37:12] [cortex] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:37:12] [cortex] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:37:12] [cortex] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:37:12] [cortex] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:37:12] [BTPI] [INFO][0m Starting Cortex deployment...
[0;32m[2025-09-05 12:37:12] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-05 12:37:12] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 12:37:12] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 12:37:12] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 120s)...
[0;36m[2025-09-05 12:37:13] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 12:37:13] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-05 12:37:13] [BTPI] [INFO][0m Creating Cortex configuration...
[0;36m[2025-09-05 12:37:13] [BTPI] [SUCCESS][0m Cortex configuration created
[0;32m[2025-09-05 12:37:13] [BTPI] [INFO][0m Deploying analyzer configurations...
[0;36m[2025-09-05 12:37:13] [BTPI] [SUCCESS][0m Analyzer configurations deployed
[0;32m[2025-09-05 12:37:13] [BTPI] [INFO][0m Deploying responder configurations...
[0;36m[2025-09-05 12:37:13] [BTPI] [SUCCESS][0m Responder configurations deployed
[0;32m[2025-09-05 12:37:13] [BTPI] [INFO][0m Deploying Cortex container...
[0;32m[2025-09-05 12:37:13] [BTPI] [INFO][0m Removing existing Cortex container...
[0;32m[2025-09-05 12:37:15] [BTPI] [INFO][0m Cortex container deployed
[0;32m[2025-09-05 12:37:15] [BTPI] [INFO][0m Configuring Cortex dependencies...
[0;32m[2025-09-05 12:37:15] [BTPI] [INFO][0m Creating Cortex keyspace in Cassandra...
[0;32m[2025-09-05 12:37:15] [BTPI] [INFO][0m Creating Cortex index in Elasticsearch...
[1;33m[2025-09-05 12:37:15] [BTPI] [WARN][0m Failed to create Cortex Elasticsearch index
[0;36m[2025-09-05 12:37:15] [BTPI] [SUCCESS][0m Dependencies configured
[0;32m[2025-09-05 12:37:15] [BTPI] [INFO][0m Configuring Cortex post-deployment...
[0;32m[2025-09-05 12:37:15] [BTPI] [INFO][0m Waiting for cortex to be ready (max 120s)...
[0;34m[2025-09-05 12:37:15] [BTPI] [DEBUG][0m cortex health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-05 12:37:26] [BTPI] [DEBUG][0m cortex health check attempt 2/12 failed, waiting 10s...
[0;34m[2025-09-05 12:37:36] [BTPI] [DEBUG][0m cortex health check attempt 3/12 failed, waiting 10s...
[0;34m[2025-09-05 12:37:46] [BTPI] [DEBUG][0m cortex health check attempt 4/12 failed, waiting 10s...
[0;34m[2025-09-05 12:37:56] [BTPI] [DEBUG][0m cortex health check attempt 5/12 failed, waiting 10s...
[0;34m[2025-09-05 12:38:06] [BTPI] [DEBUG][0m cortex health check attempt 6/12 failed, waiting 10s...
[0;34m[2025-09-05 12:38:16] [BTPI] [DEBUG][0m cortex health check attempt 7/12 failed, waiting 10s...
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Deployment mode: simple
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 12:38:19] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_123819.tar.gz
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Skipping pre-deployment checks as requested
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Skipping additional package installation in simple mode
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Skipping system optimization
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 12:38:19] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 12:38:19] [unified-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:38:19] [unified-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:38:19] [unified-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:38:19] [unified-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:38:19] [unified-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:38:19] [unified-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 12:38:19] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-05 12:38:19] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra thehive cortex velociraptor kasm portainer
[0;32m[2025-09-05 12:38:19] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-05 12:38:20] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-05 12:38:20] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-05 12:38:20] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-05 12:38:20] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:38:20] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:38:20] [elasticsearch] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:38:20] [elasticsearch] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:38:20] [elasticsearch] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:38:20] [elasticsearch] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:38:20] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 12:38:20] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 12:38:20] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 12:38:20] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 12:38:20] [BTPI] [INFO][0m Removing existing Elasticsearch container...
[0;32m[2025-09-05 12:38:26] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 12:38:26] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 12:38:26] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;34m[2025-09-05 12:38:26] [BTPI] [DEBUG][0m elasticsearch health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-05 12:38:26] [BTPI] [DEBUG][0m cortex health check attempt 8/12 failed, waiting 10s...
[0;34m[2025-09-05 12:38:36] [BTPI] [DEBUG][0m elasticsearch health check attempt 2/12 failed, waiting 10s...
[0;34m[2025-09-05 12:38:36] [BTPI] [DEBUG][0m cortex health check attempt 9/12 failed, waiting 10s...
[0;36m[2025-09-05 12:38:46] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 12:38:46] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 12:38:46] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 12:38:46] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;34m[2025-09-05 12:38:46] [BTPI] [DEBUG][0m cortex health check attempt 10/12 failed, waiting 10s...
[0;32m[2025-09-05 12:38:46] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 12:38:46] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 12:38:46] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 12:38:46] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 12:38:46] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 12:38:46] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 12:38:47] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-05 12:38:49] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-05 12:38:49] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-05 12:38:49] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-05 12:38:49] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-05 12:38:49] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-05 12:38:49] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-05 12:38:49] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:38:49] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:38:49] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:38:49] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:38:49] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:38:49] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 12:38:49] [BTPI] [INFO][0m Removing existing Cassandra container...
[0;34m[2025-09-05 12:38:56] [BTPI] [DEBUG][0m cortex health check attempt 11/12 failed, waiting 10s...
[0;32m[2025-09-05 12:38:58] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 12:38:58] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 12:38:59] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 12:38:59] [BTPI] [INFO][0m Container status: running, health: starting
[0;34m[2025-09-05 12:39:06] [BTPI] [DEBUG][0m cortex health check attempt 12/12 failed, waiting 10s...
[0;32m[2025-09-05 12:39:10] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 12:39:10] [BTPI] [INFO][0m Container status: running, health: starting
[0;31m[2025-09-05 12:39:16] [BTPI] [ERROR][0m cortex failed to become ready within 120s
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m === DEBUG INFO FOR cortex ===
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   cortex          Restarting (1) 49 seconds ago
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.impl.SimpleIncluder.fromBasename(SimpleIncluder.java:172)
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.impl.ConfigImpl.parseFileAnySyntax(ConfigImpl.java:138)
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.ConfigFactory.parseFileAnySyntax(ConfigFactory.java:845)
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.ConfigFactory.parseFileAnySyntax(ConfigFactory.java:857)
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.$anonfun$load$5(Configuration.scala:68)
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: at scala.Option.map(Option.scala:230)
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.$anonfun$load$4(Configuration.scala:68)
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: at scala.Option.orElse(Option.scala:447)
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.load(Configuration.scala:68)
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m   LOG: ... 4 more
[0;34m[2025-09-05 12:39:16] [BTPI] [DEBUG][0m === END DEBUG INFO FOR cortex ===
[0;31m[2025-09-05 12:39:16] [BTPI] [ERROR][0m Cortex did not become ready in time
[0;31m[2025-09-05 12:39:16] [cortex] [ERROR][0m Failed to deploy cortex using modern script
[0;32m[2025-09-05 12:39:16] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-05 12:39:16] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-05 12:39:16] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;34m[2025-09-05 12:39:16] [velociraptor] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/velociraptor/deploy.sh
[0;32m[2025-09-05 12:39:16] [velociraptor] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:39:16] [velociraptor] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:39:16] [velociraptor] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:39:16] [velociraptor] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:39:16] [velociraptor] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:39:16] [velociraptor] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:39:16] [BTPI] [INFO][0m Starting Velociraptor deployment...
[0;32m[2025-09-05 12:39:16] [BTPI] [INFO][0m Creating Velociraptor configuration...
[0;32m[2025-09-05 12:39:16] [BTPI] [INFO][0m Generating SSL certificates for Velociraptor...
[0;36m[2025-09-05 12:39:20] [BTPI] [SUCCESS][0m Velociraptor configuration created
[0;32m[2025-09-05 12:39:20] [BTPI] [INFO][0m Deploying Velociraptor container...
[0;32m[2025-09-05 12:39:21] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 12:39:21] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;31m[2025-09-05 12:39:21] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-05 12:39:21] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-05 12:39:21] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-05 12:39:21] [kasm] [INFO][0m Deploying service: kasm
[0;34m[2025-09-05 12:39:21] [kasm] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/kasm/deploy.sh
[0;32m[2025-09-05 12:39:21] [KASM] [INFO][0m Starting Kasm deployment...
[0;31m[2025-09-05 12:39:21] [KASM] [ERROR][0m No deployment method available for Kasm
[0;31m[2025-09-05 12:39:21] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-05 12:39:21] [portainer] [INFO][0m === Deploying portainer ===
[0;32m[2025-09-05 12:39:21] [portainer] [INFO][0m Using modern deployment script for portainer
[0;32m[2025-09-05 12:39:21] [portainer] [INFO][0m Deploying service: portainer
[0;34m[2025-09-05 12:39:21] [portainer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/portainer/deploy.sh
[0;32m[2025-09-05 12:39:21] [PORTAINER] [INFO][0m Starting Portainer deployment...
[0;31m[2025-09-05 12:39:21] [PORTAINER] [ERROR][0m No deployment method available for Portainer
[0;31m[2025-09-05 12:39:21] [portainer] [ERROR][0m Failed to deploy portainer using modern script
[0;32m[2025-09-05 12:39:21] [BTPI] [INFO][0m === Beginning integration configuration phase ===
[0;32m[2025-09-05 12:39:21] [BTPI] [INFO][0m Configuring service integrations...
[0;36m[2025-09-05 12:39:21] [BTPI] [SUCCESS][0m Service integrations configured
[0;32m[2025-09-05 12:39:21] [BTPI] [INFO][0m === Beginning testing phase ===
[0;32m[2025-09-05 12:39:21] [BTPI] [INFO][0m Running deployment tests...
[0;32m[2025-09-05 12:39:21] [BTPI] [INFO][0m Running comprehensive integration tests...
[1;33m[2025-09-05 12:39:21] [BTPI] [WARN][0m Some integration tests failed
[0;32m[2025-09-05 12:39:21] [BTPI] [INFO][0m Generating deployment report...
[0;36m[2025-09-05 12:39:21] [BTPI] [SUCCESS][0m Deployment report saved to: /home/cmndcntrl/code/btpi-react/logs/deployment_report_20250905_123921.txt
[1;33m[2025-09-05 12:39:21] [BTPI] [WARN][0m BTPI-REACT deployment completed with warnings
[0;32m[2025-09-05 12:39:21] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 12:39:23] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 12:39:23] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 12:39:23] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 12:39:23] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 12:39:23] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 12:39:23] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 12:39:31] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 12:39:36] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 12:39:36] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 12:39:36] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 12:39:36] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 12:39:36] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 12:39:36] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;36m[2025-09-05 12:39:37] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 12:39:37] [cassandra] [SUCCESS][0m Service cassandra deployment completed
[0;32m[2025-09-05 12:39:37] [thehive] [INFO][0m === Deploying thehive ===
[0;32m[2025-09-05 12:39:37] [thehive] [INFO][0m Using modern deployment script for thehive
[0;32m[2025-09-05 12:39:37] [thehive] [INFO][0m Deploying service: thehive
[0;34m[2025-09-05 12:39:37] [thehive] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/thehive/deploy.sh
[0;32m[2025-09-05 12:39:37] [BTPI] [INFO][0m Waiting for thehive to be ready (max 300s)...
[0;34m[2025-09-05 12:39:37] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:39:37] [BTPI] [DEBUG][0m thehive health check attempt 1/30 failed, waiting 10s...
[0;34m[2025-09-05 12:39:47] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:39:47] [BTPI] [DEBUG][0m thehive health check attempt 2/30 failed, waiting 10s...
[0;34m[2025-09-05 12:39:57] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:39:57] [BTPI] [DEBUG][0m thehive health check attempt 3/30 failed, waiting 10s...
[0;34m[2025-09-05 12:40:07] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:40:07] [BTPI] [DEBUG][0m thehive health check attempt 4/30 failed, waiting 10s...
[0;34m[2025-09-05 12:40:17] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:40:17] [BTPI] [DEBUG][0m thehive health check attempt 5/30 failed, waiting 10s...
[0;34m[2025-09-05 12:40:27] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:40:27] [BTPI] [DEBUG][0m thehive health check attempt 6/30 failed, waiting 10s...
[0;34m[2025-09-05 12:40:37] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:40:37] [BTPI] [DEBUG][0m thehive health check attempt 7/30 failed, waiting 10s...
[0;34m[2025-09-05 12:40:47] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:40:47] [BTPI] [DEBUG][0m thehive health check attempt 8/30 failed, waiting 10s...
[0;34m[2025-09-05 12:40:57] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:40:57] [BTPI] [DEBUG][0m thehive health check attempt 9/30 failed, waiting 10s...
[0;34m[2025-09-05 12:41:07] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:41:07] [BTPI] [DEBUG][0m thehive health check attempt 10/30 failed, waiting 10s...
[0;34m[2025-09-05 12:41:17] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:41:17] [BTPI] [DEBUG][0m thehive health check attempt 11/30 failed, waiting 10s...
[0;34m[2025-09-05 12:41:27] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:41:27] [BTPI] [DEBUG][0m thehive health check attempt 12/30 failed, waiting 10s...
[0;34m[2025-09-05 12:41:37] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:41:37] [BTPI] [DEBUG][0m thehive health check attempt 13/30 failed, waiting 10s...
[0;34m[2025-09-05 12:41:47] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:41:47] [BTPI] [DEBUG][0m thehive health check attempt 14/30 failed, waiting 10s...
[0;34m[2025-09-05 12:41:57] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:41:57] [BTPI] [DEBUG][0m thehive health check attempt 15/30 failed, waiting 10s...
[0;34m[2025-09-05 12:42:07] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:42:07] [BTPI] [DEBUG][0m thehive health check attempt 16/30 failed, waiting 10s...
[0;34m[2025-09-05 12:42:17] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:42:17] [BTPI] [DEBUG][0m thehive health check attempt 17/30 failed, waiting 10s...
[0;34m[2025-09-05 12:42:27] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:42:27] [BTPI] [DEBUG][0m thehive health check attempt 18/30 failed, waiting 10s...
[0;34m[2025-09-05 12:42:37] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:42:37] [BTPI] [DEBUG][0m thehive health check attempt 19/30 failed, waiting 10s...
[0;34m[2025-09-05 12:42:47] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:42:47] [BTPI] [DEBUG][0m thehive health check attempt 20/30 failed, waiting 10s...
[0;34m[2025-09-05 12:42:57] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:42:57] [BTPI] [DEBUG][0m thehive health check attempt 21/30 failed, waiting 10s...
[0;34m[2025-09-05 12:43:07] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:43:07] [BTPI] [DEBUG][0m thehive health check attempt 22/30 failed, waiting 10s...
[0;34m[2025-09-05 12:43:18] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:43:18] [BTPI] [DEBUG][0m thehive health check attempt 23/30 failed, waiting 10s...
[0;34m[2025-09-05 12:43:28] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:43:28] [BTPI] [DEBUG][0m thehive health check attempt 24/30 failed, waiting 10s...
[0;34m[2025-09-05 12:43:38] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:43:38] [BTPI] [DEBUG][0m thehive health check attempt 25/30 failed, waiting 10s...
[0;34m[2025-09-05 12:43:48] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:43:48] [BTPI] [DEBUG][0m thehive health check attempt 26/30 failed, waiting 10s...
[0;34m[2025-09-05 12:43:58] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:43:58] [BTPI] [DEBUG][0m thehive health check attempt 27/30 failed, waiting 10s...
[0;34m[2025-09-05 12:44:08] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:44:08] [BTPI] [DEBUG][0m thehive health check attempt 28/30 failed, waiting 10s...
[0;34m[2025-09-05 12:44:18] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:44:18] [BTPI] [DEBUG][0m thehive health check attempt 29/30 failed, waiting 10s...
[0;34m[2025-09-05 12:44:28] [BTPI] [DEBUG][0m thehive container is not running
[0;34m[2025-09-05 12:44:28] [BTPI] [DEBUG][0m thehive health check attempt 30/30 failed, waiting 10s...
[0;31m[2025-09-05 12:44:38] [BTPI] [ERROR][0m thehive failed to become ready within 300s
[0;34m[2025-09-05 12:44:38] [BTPI] [DEBUG][0m === DEBUG INFO FOR thehive ===
[0;34m[2025-09-05 12:44:38] [BTPI] [DEBUG][0m Container 'thehive' not found
[0;34m[2025-09-05 12:44:38] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-05 12:44:38] [BTPI] [DEBUG][0m   Could not retrieve logs for thehive
[0;34m[2025-09-05 12:44:38] [BTPI] [DEBUG][0m === END DEBUG INFO FOR thehive ===
[0;31m[2025-09-05 12:44:38] [thehive] [ERROR][0m Service thehive failed to become ready
[0;32m[2025-09-05 12:44:38] [cortex] [INFO][0m === Deploying cortex ===
[0;32m[2025-09-05 12:44:38] [cortex] [INFO][0m Using modern deployment script for cortex
[0;32m[2025-09-05 12:44:38] [cortex] [INFO][0m Deploying service: cortex
[0;34m[2025-09-05 12:44:38] [cortex] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cortex/deploy.sh
[0;32m[2025-09-05 12:44:38] [cortex] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:44:38] [cortex] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:44:38] [cortex] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:44:38] [cortex] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:44:38] [cortex] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:44:38] [cortex] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:44:38] [BTPI] [INFO][0m Starting Cortex deployment...
[0;32m[2025-09-05 12:44:38] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-05 12:44:38] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 12:44:38] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 12:44:38] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 120s)...
[0;36m[2025-09-05 12:44:39] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 12:44:39] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-05 12:44:39] [BTPI] [INFO][0m Creating Cortex configuration...
[0;36m[2025-09-05 12:44:39] [BTPI] [SUCCESS][0m Cortex configuration created
[0;32m[2025-09-05 12:44:39] [BTPI] [INFO][0m Deploying analyzer configurations...
[0;36m[2025-09-05 12:44:39] [BTPI] [SUCCESS][0m Analyzer configurations deployed
[0;32m[2025-09-05 12:44:39] [BTPI] [INFO][0m Deploying responder configurations...
[0;36m[2025-09-05 12:44:39] [BTPI] [SUCCESS][0m Responder configurations deployed
[0;32m[2025-09-05 12:44:39] [BTPI] [INFO][0m Deploying Cortex container...
[0;32m[2025-09-05 12:44:39] [BTPI] [INFO][0m Removing existing Cortex container...
[0;32m[2025-09-05 12:44:41] [BTPI] [INFO][0m Cortex container deployed
[0;32m[2025-09-05 12:44:41] [BTPI] [INFO][0m Configuring Cortex dependencies...
[0;32m[2025-09-05 12:44:41] [BTPI] [INFO][0m Creating Cortex keyspace in Cassandra...
[0;32m[2025-09-05 12:44:41] [BTPI] [INFO][0m Creating Cortex index in Elasticsearch...
[1;33m[2025-09-05 12:44:41] [BTPI] [WARN][0m Failed to create Cortex Elasticsearch index
[0;36m[2025-09-05 12:44:41] [BTPI] [SUCCESS][0m Dependencies configured
[0;32m[2025-09-05 12:44:41] [BTPI] [INFO][0m Configuring Cortex post-deployment...
[0;32m[2025-09-05 12:44:41] [BTPI] [INFO][0m Waiting for cortex to be ready (max 120s)...
[0;34m[2025-09-05 12:44:41] [BTPI] [DEBUG][0m cortex health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-05 12:44:51] [BTPI] [DEBUG][0m cortex health check attempt 2/12 failed, waiting 10s...
[0;34m[2025-09-05 12:45:02] [BTPI] [DEBUG][0m cortex health check attempt 3/12 failed, waiting 10s...
[0;34m[2025-09-05 12:45:12] [BTPI] [DEBUG][0m cortex health check attempt 4/12 failed, waiting 10s...
[0;34m[2025-09-05 12:45:22] [BTPI] [DEBUG][0m cortex health check attempt 5/12 failed, waiting 10s...
[0;34m[2025-09-05 12:45:32] [BTPI] [DEBUG][0m cortex health check attempt 6/12 failed, waiting 10s...
[0;34m[2025-09-05 12:45:42] [BTPI] [DEBUG][0m cortex health check attempt 7/12 failed, waiting 10s...
[0;34m[2025-09-05 12:45:52] [BTPI] [DEBUG][0m cortex health check attempt 8/12 failed, waiting 10s...
[0;34m[2025-09-05 12:46:02] [BTPI] [DEBUG][0m cortex health check attempt 9/12 failed, waiting 10s...
[0;34m[2025-09-05 12:46:12] [BTPI] [DEBUG][0m cortex health check attempt 10/12 failed, waiting 10s...
[0;34m[2025-09-05 12:46:22] [BTPI] [DEBUG][0m cortex health check attempt 11/12 failed, waiting 10s...
[0;34m[2025-09-05 12:46:32] [BTPI] [DEBUG][0m cortex health check attempt 12/12 failed, waiting 10s...
[0;31m[2025-09-05 12:46:42] [BTPI] [ERROR][0m cortex failed to become ready within 120s
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m === DEBUG INFO FOR cortex ===
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   cortex          Restarting (1) 50 seconds ago
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: ... 4 more
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: Using elasticsearch uri: http://172.20.240.4:9200,
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: config file is:
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: play.http.secret.key="obRrndpvQKkR7DvoRsuSYz40Yq0tenVx2Dea81KHVXypGH8t7gTLB3FmiGkUTpxc"
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: search.uri="http://172.20.240.4:9200,"
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: job.directory="/tmp/cortex-jobs"
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: analyzer.urls=["https://download.thehive-project.org/analyzers.json"]
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: responder.urls=["https://download.thehive-project.org/responders.json"]
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: include file("/etc/cortex/application.conf")
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m   LOG: chown: changing ownership of '/etc/cortex/application.conf': Read-only file system
[0;34m[2025-09-05 12:46:42] [BTPI] [DEBUG][0m === END DEBUG INFO FOR cortex ===
[0;31m[2025-09-05 12:46:42] [BTPI] [ERROR][0m Cortex did not become ready in time
[0;31m[2025-09-05 12:46:42] [cortex] [ERROR][0m Failed to deploy cortex using modern script
[0;32m[2025-09-05 12:46:42] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-05 12:46:42] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-05 12:46:42] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;34m[2025-09-05 12:46:42] [velociraptor] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/velociraptor/deploy.sh
[0;32m[2025-09-05 12:46:42] [velociraptor] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 12:46:42] [velociraptor] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-05 12:46:42] [velociraptor] [DEBUG][0m Current environment values:
[0;34m[2025-09-05 12:46:42] [velociraptor] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-05 12:46:42] [velociraptor] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-05 12:46:42] [velociraptor] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-05 12:46:42] [BTPI] [INFO][0m Starting Velociraptor deployment...
[0;32m[2025-09-05 12:46:42] [BTPI] [INFO][0m Creating Velociraptor configuration...
[0;32m[2025-09-05 12:46:43] [BTPI] [INFO][0m Generating SSL certificates for Velociraptor...
[0;36m[2025-09-05 12:46:45] [BTPI] [SUCCESS][0m Velociraptor configuration created
[0;32m[2025-09-05 12:46:45] [BTPI] [INFO][0m Deploying Velociraptor container...
[0;31m[2025-09-05 12:46:46] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-05 12:46:46] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-05 12:46:46] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-05 12:46:46] [kasm] [INFO][0m Deploying service: kasm
[0;34m[2025-09-05 12:46:46] [kasm] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/kasm/deploy.sh
[0;32m[2025-09-05 12:46:46] [KASM] [INFO][0m Starting Kasm deployment...
[0;31m[2025-09-05 12:46:46] [KASM] [ERROR][0m No deployment method available for Kasm
[0;31m[2025-09-05 12:46:46] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-05 12:46:46] [portainer] [INFO][0m === Deploying portainer ===
[0;32m[2025-09-05 12:46:46] [portainer] [INFO][0m Using modern deployment script for portainer
[0;32m[2025-09-05 12:46:46] [portainer] [INFO][0m Deploying service: portainer
[0;34m[2025-09-05 12:46:46] [portainer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/portainer/deploy.sh
[0;32m[2025-09-05 12:46:46] [PORTAINER] [INFO][0m Starting Portainer deployment...
[0;31m[2025-09-05 12:46:46] [PORTAINER] [ERROR][0m No deployment method available for Portainer
[0;31m[2025-09-05 12:46:46] [portainer] [ERROR][0m Failed to deploy portainer using modern script
[0;32m[2025-09-05 12:46:46] [BTPI] [INFO][0m === Beginning integration configuration phase ===
[0;32m[2025-09-05 12:46:46] [BTPI] [INFO][0m Configuring service integrations...
[0;36m[2025-09-05 12:46:46] [BTPI] [SUCCESS][0m Service integrations configured
[0;32m[2025-09-05 12:46:46] [BTPI] [INFO][0m === Beginning testing phase ===
[0;32m[2025-09-05 12:46:46] [BTPI] [INFO][0m Running deployment tests...
[0;32m[2025-09-05 12:46:46] [BTPI] [INFO][0m Running comprehensive integration tests...
[1;33m[2025-09-05 12:46:46] [BTPI] [WARN][0m Some integration tests failed
[0;32m[2025-09-05 12:46:46] [BTPI] [INFO][0m Generating deployment report...
[0;36m[2025-09-05 12:46:46] [BTPI] [SUCCESS][0m Deployment report saved to: /home/cmndcntrl/code/btpi-react/logs/deployment_report_20250905_124646.txt
[1;33m[2025-09-05 12:46:46] [BTPI] [WARN][0m BTPI-REACT deployment completed with warnings
[0;32m[2025-09-05 12:53:48] [velociraptor] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 12:53:48] [velociraptor] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 12:53:48] [velociraptor] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 12:53:48] [BTPI] [INFO][0m Starting Velociraptor deployment...
[0;32m[2025-09-05 12:53:48] [BTPI] [INFO][0m Creating Velociraptor configuration...
[0;32m[2025-09-05 12:53:48] [BTPI] [INFO][0m Generating SSL certificates for Velociraptor...
[0;36m[2025-09-05 12:53:56] [BTPI] [SUCCESS][0m Velociraptor configuration created
[0;32m[2025-09-05 12:53:56] [BTPI] [INFO][0m Deploying Velociraptor container...
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-05 15:35:09] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250905_153509.tar.gz
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m   Available Disk: 187GB
[0;36m[2025-09-05 15:35:09] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-05 15:35:09] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-05 15:35:11] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-05 15:35:11] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-05 15:35:11] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-05 15:35:20] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-05 15:35:20] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-05 15:35:20] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-05 15:35:20] [unified-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 15:35:20] [unified-deployment] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-05 15:35:20] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor thehive cortex nginx kasm portainer 
[0;32m[2025-09-05 15:35:20] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-05 15:35:20] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-05 15:35:20] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;32m[2025-09-05 15:35:20] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 15:35:20] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 15:35:20] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 15:35:20] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 15:35:23] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 15:35:23] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 15:35:23] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 15:35:43] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 15:35:43] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 15:35:43] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 15:35:43] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 15:35:43] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 15:35:43] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 15:35:43] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 15:35:43] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 15:35:43] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 15:35:43] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 15:35:44] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-05 15:35:46] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-05 15:35:46] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-05 15:35:46] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-05 15:35:46] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-05 15:35:46] [cassandra] [INFO][0m Deploying service: cassandra
[0;32m[2025-09-05 15:35:46] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 15:35:46] [cassandra] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 15:35:46] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 15:35:48] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 15:35:48] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 15:35:49] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 15:35:49] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 15:35:59] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 15:35:59] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 15:36:10] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 15:36:10] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 15:36:11] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 15:36:12] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 15:36:13] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 15:36:13] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 15:36:13] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 15:36:13] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 15:36:13] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 15:36:21] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 15:36:25] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 15:36:25] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 15:36:25] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 15:36:25] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 15:36:25] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 15:36:25] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;36m[2025-09-05 15:36:25] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 15:36:25] [cassandra] [SUCCESS][0m Service cassandra deployment completed
[0;32m[2025-09-05 15:36:25] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-05 15:36:26] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-05 15:36:26] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;32m[2025-09-05 15:36:26] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-05 15:36:26] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-05 15:36:26] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-05 15:36:26] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-05 15:36:26] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-05 15:36:26] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-05 15:36:27] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-05 15:36:27] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-05 15:36:27] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;36m[2025-09-05 15:36:47] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-05 15:36:47] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-05 15:36:47] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-05 15:36:48] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 300s)...
[0;36m[2025-09-05 15:36:48] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;36m[2025-09-05 15:36:48] [wazuh-indexer] [SUCCESS][0m Service wazuh-indexer deployment completed
[0;32m[2025-09-05 15:36:48] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-05 15:36:48] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[0;32m[2025-09-05 15:36:48] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;32m[2025-09-05 15:36:48] [wazuh-manager] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 15:36:48] [wazuh-manager] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Starting Wazuh Manager deployment...
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Waiting for Wazuh Indexer to be ready...
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 120s)...
[0;36m[2025-09-05 15:36:48] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Creating Wazuh Manager configuration...
[0;36m[2025-09-05 15:36:48] [BTPI] [SUCCESS][0m Wazuh Manager configuration created
[0;32m[2025-09-05 15:36:48] [BTPI] [INFO][0m Deploying Wazuh Manager container...
[0;32m[2025-09-05 15:37:30] [BTPI] [INFO][0m Wazuh Manager container deployed
[0;32m[2025-09-05 15:37:30] [BTPI] [INFO][0m Configuring Wazuh Manager post-deployment...
[0;32m[2025-09-05 15:37:30] [BTPI] [INFO][0m Waiting for wazuh-manager to be ready (max 180s)...
[0;31m[2025-09-05 15:40:31] [BTPI] [ERROR][0m wazuh-manager failed to become ready within 180s
[0;31m[2025-09-05 15:40:31] [BTPI] [ERROR][0m Wazuh Manager did not become ready in time
[0;31m[2025-09-05 15:40:31] [wazuh-manager] [ERROR][0m Failed to deploy wazuh-manager using modern script
[0;32m[2025-09-05 15:40:31] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-05 15:40:31] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-05 15:40:31] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;32m[2025-09-05 15:40:31] [velociraptor] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 15:40:31] [velociraptor] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 15:40:31] [BTPI] [INFO][0m Starting Velociraptor deployment...
[0;32m[2025-09-05 15:40:31] [BTPI] [INFO][0m Creating Velociraptor configuration...
[0;32m[2025-09-05 15:40:32] [BTPI] [INFO][0m Generating SSL certificates for Velociraptor...
[0;36m[2025-09-05 15:40:35] [BTPI] [SUCCESS][0m Velociraptor configuration created
[0;32m[2025-09-05 15:40:35] [BTPI] [INFO][0m Deploying Velociraptor container...
[0;31m[2025-09-05 15:40:35] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-05 15:40:35] [thehive] [INFO][0m === Deploying thehive ===
[0;32m[2025-09-05 15:40:35] [thehive] [INFO][0m Using modern deployment script for thehive
[0;32m[2025-09-05 15:40:36] [thehive] [INFO][0m Deploying service: thehive
[0;32m[2025-09-05 15:40:36] [BTPI] [INFO][0m Waiting for thehive to be ready (max 300s)...
[0;31m[2025-09-05 15:45:36] [BTPI] [ERROR][0m thehive failed to become ready within 300s
[0;31m[2025-09-05 15:45:36] [thehive] [ERROR][0m Service thehive failed to become ready
[0;32m[2025-09-05 15:45:36] [cortex] [INFO][0m === Deploying cortex ===
[0;32m[2025-09-05 15:45:36] [cortex] [INFO][0m Using modern deployment script for cortex
[0;32m[2025-09-05 15:45:36] [cortex] [INFO][0m Deploying service: cortex
[0;32m[2025-09-05 15:45:36] [cortex] [INFO][0m Validating environment configuration...
[0;36m[2025-09-05 15:45:36] [cortex] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 15:45:36] [BTPI] [INFO][0m Starting Cortex deployment...
[0;32m[2025-09-05 15:45:36] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-05 15:45:36] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 15:45:37] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 15:45:37] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 120s)...
[0;36m[2025-09-05 15:45:37] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-05 15:45:37] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-05 15:45:37] [BTPI] [INFO][0m Creating Cortex configuration...
[0;36m[2025-09-05 15:45:37] [BTPI] [SUCCESS][0m Cortex configuration created
[0;32m[2025-09-05 15:45:37] [BTPI] [INFO][0m Deploying analyzer configurations...
[0;36m[2025-09-05 15:45:37] [BTPI] [SUCCESS][0m Analyzer configurations deployed
[0;32m[2025-09-05 15:45:37] [BTPI] [INFO][0m Deploying responder configurations...
[0;36m[2025-09-05 15:45:37] [BTPI] [SUCCESS][0m Responder configurations deployed
[0;32m[2025-09-05 15:45:37] [BTPI] [INFO][0m Deploying Cortex container...
[0;32m[2025-09-05 15:45:39] [BTPI] [INFO][0m Cortex container deployed
[0;32m[2025-09-05 15:45:39] [BTPI] [INFO][0m Configuring Cortex dependencies...
[0;32m[2025-09-05 15:45:39] [BTPI] [INFO][0m Creating Cortex keyspace in Cassandra...
[0;32m[2025-09-05 15:45:40] [BTPI] [INFO][0m Creating Cortex index in Elasticsearch...
[1;33m[2025-09-05 15:45:40] [BTPI] [WARN][0m Failed to create Cortex Elasticsearch index
[0;36m[2025-09-05 15:45:40] [BTPI] [SUCCESS][0m Dependencies configured
[0;32m[2025-09-05 15:45:40] [BTPI] [INFO][0m Configuring Cortex post-deployment...
[0;32m[2025-09-05 15:45:40] [BTPI] [INFO][0m Waiting for cortex to be ready (max 120s)...
[0;31m[2025-09-05 15:47:40] [BTPI] [ERROR][0m cortex failed to become ready within 120s
[0;31m[2025-09-05 15:47:40] [BTPI] [ERROR][0m Cortex did not become ready in time
[0;31m[2025-09-05 15:47:40] [cortex] [ERROR][0m Failed to deploy cortex using modern script
[0;32m[2025-09-05 15:47:40] [nginx] [INFO][0m === Deploying nginx ===
[0;32m[2025-09-05 15:47:40] [nginx] [INFO][0m Using legacy deployment for nginx
[0;31m[2025-09-05 15:47:40] [nginx] [ERROR][0m No deployment method available for nginx
[0;32m[2025-09-05 15:55:10] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 15:55:10] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 15:55:10] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 15:55:10] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 15:55:10] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 15:55:10] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 15:55:10] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 15:55:12] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 15:55:12] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 15:55:12] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 15:55:32] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 15:55:32] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 15:55:32] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 15:55:32] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 15:55:32] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 15:55:32] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 15:55:32] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 15:55:32] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 15:55:32] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 15:55:32] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 15:55:33] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 15:55:35] [cassandra] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 15:55:35] [cassandra] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 15:55:35] [cassandra] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 15:55:35] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 15:55:38] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 15:55:38] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 15:55:39] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 15:55:39] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 15:55:50] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 15:55:50] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 15:56:01] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 15:56:01] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 15:56:01] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 15:56:03] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 15:56:03] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 15:56:03] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 15:56:03] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 15:56:03] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 15:56:03] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 15:56:17] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 15:56:22] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 15:56:22] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 15:56:22] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 15:56:22] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 15:56:22] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 15:56:23] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-05 15:56:23] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-05 15:56:23] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-05 15:56:23] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-05 15:56:23] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-05 15:56:23] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-05 17:09:48] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 17:09:48] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 17:09:48] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 17:09:48] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 17:09:48] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 17:09:48] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 17:09:48] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 17:09:50] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 17:09:50] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 17:09:50] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 17:10:11] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 17:10:11] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 17:10:11] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 17:10:11] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 17:10:11] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 17:10:11] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 17:10:11] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 17:10:11] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 17:10:11] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 17:10:11] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 17:10:12] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 17:10:13] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 17:10:14] [cassandra] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 17:10:14] [cassandra] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 17:10:14] [cassandra] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 17:10:14] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 17:10:17] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 17:10:17] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 17:10:18] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 17:10:18] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 17:10:28] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 17:10:28] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 17:10:39] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 17:10:39] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 17:10:40] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 17:10:41] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 17:10:42] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 17:10:42] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 17:10:42] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 17:10:42] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 17:10:42] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 17:10:52] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 17:10:58] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 17:10:58] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 17:10:58] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 17:10:58] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 17:10:58] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 17:10:59] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-05 17:10:59] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 17:10:59] [wazuh-indexer] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 17:10:59] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 17:10:59] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-05 17:10:59] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-05 17:10:59] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-05 17:10:59] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-05 17:10:59] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-05 17:11:00] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-05 17:11:00] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-05 17:11:00] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;36m[2025-09-05 17:11:31] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-05 17:11:31] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-05 17:11:31] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-05 17:13:07] [KASM] [INFO][0m Starting Kasm deployment...
[0;31m[2025-09-05 17:13:07] [KASM] [ERROR][0m No deployment method available for Kasm
[0;32m[2025-09-05 21:50:20] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 21:50:20] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 21:50:20] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 21:50:20] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 21:50:20] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 21:50:20] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 21:50:20] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 21:50:22] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 21:50:22] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 21:50:22] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 21:50:43] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 21:50:43] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 21:50:43] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 21:50:43] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 21:50:43] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 21:50:43] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 21:50:43] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 21:50:43] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 21:50:43] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 21:50:43] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 21:50:44] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 21:50:46] [cassandra] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 21:50:46] [cassandra] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 21:50:46] [cassandra] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 21:50:46] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 21:50:48] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 21:50:48] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 21:50:49] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 21:50:49] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 21:51:00] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 21:51:00] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 21:51:11] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 21:51:11] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 21:51:11] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 21:51:13] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 21:51:13] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 21:51:13] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 21:51:13] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 21:51:13] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 21:51:13] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 21:51:22] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 21:51:26] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 21:51:26] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 21:51:26] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 21:51:26] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 21:51:26] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 21:51:27] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-05 21:51:27] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 21:51:27] [wazuh-indexer] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 21:51:27] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 21:51:27] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-05 21:51:27] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-05 21:51:27] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-05 21:51:27] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-05 21:51:27] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-05 21:51:28] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-05 21:51:28] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-05 21:51:28] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;36m[2025-09-05 21:51:59] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-05 21:51:59] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-05 21:51:59] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-05 21:53:35] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-05 21:53:35] [kasm] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 21:53:35] [kasm] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 21:53:35] [kasm] [SUCCESS][0m All required environment variables are present
[0;31m[2025-09-05 21:53:35] [KASM] [ERROR][0m No deployment method available for Kasm
[0;32m[2025-09-05 22:23:48] [kasm] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 22:23:48] [kasm] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 22:23:48] [kasm] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 22:23:48] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-05 22:23:48] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-05 22:23:48] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-05 22:23:49] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-05 22:23:49] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-05 22:23:49] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-05 22:23:49] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-05 22:23:51] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-05 22:24:27] [KASM] [INFO][0m Starting Kasm containers...
[0;32m[2025-09-05 22:26:55] [kasm] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 22:26:55] [kasm] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 22:26:55] [kasm] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 22:26:55] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-05 22:26:55] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-05 22:26:55] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-05 22:26:57] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-05 22:26:57] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-05 22:26:57] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-05 22:26:57] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-05 22:26:57] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-05 22:26:59] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-05 22:27:08] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-05 22:27:08] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-05 22:27:08] [KASM] [INFO][0m Waiting for kasm-db...
[0;32m[2025-09-05 22:28:30] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 22:28:30] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 22:28:30] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 22:28:30] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 22:28:30] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 22:28:30] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 22:28:30] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 22:28:32] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 22:28:32] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 22:28:32] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 22:28:52] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 22:28:52] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 22:28:52] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 22:28:52] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 22:28:52] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 22:28:52] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 22:28:52] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 22:28:52] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 22:28:52] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 22:28:52] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 22:28:53] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 22:28:55] [cassandra] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 22:28:55] [cassandra] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 22:28:55] [cassandra] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 22:28:55] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 22:28:57] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 22:28:57] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 22:28:58] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 22:28:58] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 22:29:09] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 22:29:09] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 22:29:20] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 22:29:20] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 22:29:20] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 22:29:22] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 22:29:22] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 22:29:22] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 22:29:22] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 22:29:22] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 22:29:22] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;31m[2025-09-05 22:29:36] [BTPI] [ERROR][0m Cassandra read/write test failed
[0;31m[2025-09-05 22:29:36] [BTPI] [ERROR][0m Cassandra deployment completed with errors
[0;31m[2025-09-05 22:29:36] [BTPI] [ERROR][0m Script failed at line 316 with exit code 1
[0;31m[2025-09-05 22:29:36] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;32m[2025-09-05 23:17:07] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 23:17:07] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 23:17:07] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 23:17:07] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 23:17:07] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 23:17:07] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 23:17:07] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 23:17:09] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 23:17:09] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 23:17:09] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 23:17:29] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 23:17:29] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 23:17:29] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 23:17:29] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 23:17:29] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 23:17:29] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 23:17:29] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 23:17:29] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 23:17:29] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 23:17:29] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 23:17:31] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 23:17:32] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 23:17:32] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 23:17:32] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 23:17:32] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 23:17:32] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 23:17:32] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 23:17:32] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 23:17:33] [cassandra] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 23:17:33] [cassandra] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 23:17:33] [cassandra] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 23:17:33] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 23:17:33] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 23:17:33] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 23:17:33] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 23:17:34] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 23:17:34] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 23:17:35] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 23:17:35] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 23:17:46] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 23:17:46] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 23:17:56] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 23:17:56] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 23:17:57] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 23:17:58] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 23:17:59] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 23:17:59] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 23:17:59] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 23:17:59] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 23:17:59] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 23:18:07] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 23:18:11] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 23:18:11] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 23:18:11] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 23:18:11] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 23:18:11] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 23:18:12] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-05 23:18:12] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 23:18:12] [wazuh-indexer] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 23:18:12] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 23:18:12] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-05 23:18:12] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-05 23:18:12] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-05 23:18:12] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-05 23:18:12] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-05 23:18:13] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-05 23:18:14] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-05 23:18:14] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;36m[2025-09-05 23:18:44] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-05 23:18:44] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-05 23:18:44] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-05 23:20:20] [kasm] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 23:20:20] [kasm] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 23:20:20] [kasm] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 23:20:20] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-05 23:20:20] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-05 23:20:20] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-05 23:20:21] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-05 23:20:21] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-05 23:20:21] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-05 23:20:21] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-05 23:20:22] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-05 23:20:23] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-05 23:20:32] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-05 23:20:32] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-05 23:20:32] [KASM] [INFO][0m Waiting for kasm-db...
[0;32m[2025-09-05 23:43:50] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 23:43:50] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 23:43:50] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 23:43:50] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-05 23:43:50] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-05 23:43:50] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-05 23:43:50] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-05 23:43:52] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-05 23:43:52] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-05 23:43:52] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-05 23:44:12] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-05 23:44:12] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 23:44:12] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 23:44:12] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 23:44:12] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 23:44:12] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-05 23:44:12] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-05 23:44:12] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-05 23:44:12] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 23:44:12] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-05 23:44:13] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-05 23:44:15] [cassandra] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 23:44:15] [cassandra] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 23:44:15] [cassandra] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-05 23:44:15] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-05 23:44:21] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-05 23:44:21] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-05 23:44:22] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-05 23:44:22] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 23:44:33] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-05 23:44:33] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-05 23:44:44] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-05 23:44:44] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-05 23:44:45] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-05 23:44:46] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-05 23:44:47] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-05 23:44:47] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-05 23:44:47] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-05 23:44:47] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-05 23:44:47] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-05 23:45:00] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-05 23:45:04] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-05 23:45:04] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-05 23:45:04] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-05 23:45:04] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-05 23:45:04] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-05 23:45:05] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-05 23:45:05] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 23:45:05] [wazuh-indexer] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 23:45:05] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 23:45:05] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-05 23:45:05] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-05 23:45:05] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-05 23:45:05] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-05 23:45:05] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-05 23:45:07] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-05 23:45:07] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-05 23:45:07] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;36m[2025-09-05 23:45:37] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-05 23:45:37] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-05 23:45:37] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-05 23:45:37] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-05 23:45:37] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-05 23:45:37] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-05 23:45:38] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-05 23:45:38] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-05 23:47:13] [kasm] [INFO][0m Validating environment configuration...
[0;32m[2025-09-05 23:47:13] [kasm] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-05 23:47:13] [kasm] [SUCCESS][0m All required environment variables are present
[0;32m[2025-09-05 23:47:14] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-05 23:47:14] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-05 23:47:14] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-05 23:47:15] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-05 23:47:15] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-05 23:47:16] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-05 23:47:16] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-05 23:47:16] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-05 23:47:17] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-05 23:47:25] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-05 23:47:25] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-05 23:47:25] [KASM] [INFO][0m Waiting for kasm-db...
[0;32m[2025-09-06 00:19:18] [elasticsearch] [INFO][0m Validating environment configuration...
[0;32m[2025-09-06 00:19:18] [elasticsearch] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-06 00:19:18] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:19:18] [elasticsearch] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:19:18] [elasticsearch] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:19:18] [elasticsearch] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:19:18] [elasticsearch] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 00:19:18] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-06 00:19:18] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-06 00:19:18] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-06 00:19:18] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-06 00:19:19] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:19:20] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-06 00:19:20] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-06 00:19:20] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;34m[2025-09-06 00:19:20] [BTPI] [DEBUG][0m elasticsearch health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 00:19:30] [BTPI] [DEBUG][0m elasticsearch health check attempt 2/12 failed, waiting 10s...
[0;36m[2025-09-06 00:19:41] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 00:19:41] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 00:19:41] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 00:19:41] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 00:19:41] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 00:19:41] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-06 00:19:41] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-06 00:19:41] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-06 00:19:41] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 00:19:41] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-06 00:19:42] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-06 00:19:43] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-06 00:19:44] [cassandra] [INFO][0m Validating environment configuration...
[0;32m[2025-09-06 00:19:44] [cassandra] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-06 00:19:44] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:19:44] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:19:44] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:19:44] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:19:44] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-06 00:19:44] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:19:47] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-06 00:19:47] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-06 00:19:48] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-06 00:19:48] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 00:19:59] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-06 00:19:59] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 00:20:10] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-06 00:20:10] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-06 00:20:11] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-06 00:20:12] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-06 00:20:13] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-06 00:20:13] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-06 00:20:13] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-06 00:20:13] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-06 00:20:13] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-06 00:20:26] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-06 00:20:32] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-06 00:20:32] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-06 00:20:32] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-06 00:20:32] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-06 00:20:32] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-06 00:20:33] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-06 00:20:33] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;32m[2025-09-06 00:20:33] [wazuh-indexer] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-06 00:20:33] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:20:33] [wazuh-indexer] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:20:33] [wazuh-indexer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:20:33] [wazuh-indexer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:20:33] [wazuh-indexer] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 00:20:33] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-06 00:20:33] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-06 00:20:33] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-06 00:20:33] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-06 00:20:33] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-06 00:20:33] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:20:35] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-06 00:20:35] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-06 00:20:35] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;34m[2025-09-06 00:20:35] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 1/18 failed, waiting 10s...
[0;34m[2025-09-06 00:20:45] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 2/18 failed, waiting 10s...
[0;34m[2025-09-06 00:20:55] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 3/18 failed, waiting 10s...
[0;36m[2025-09-06 00:21:05] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-06 00:21:05] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-06 00:21:05] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 00:21:06] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;34m[2025-09-06 00:21:06] [BTPI] [DEBUG][0m Wazuh Indexer is running but security plugin not initialized (this is expected)
[0;32m[2025-09-06 00:21:06] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-06 00:21:06] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-06 00:21:06] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-06 00:21:06] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-06 00:21:06] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-06 00:21:06] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-06 00:21:06] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-06 00:21:06] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-06 00:22:41] [kasm] [INFO][0m Validating environment configuration...
[0;32m[2025-09-06 00:22:41] [kasm] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-06 00:22:41] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:22:41] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:22:41] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:22:41] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:22:41] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 00:22:41] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-06 00:22:41] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-06 00:22:41] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-06 00:22:43] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-06 00:22:43] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-06 00:22:43] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-06 00:22:43] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-06 00:22:43] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-06 00:22:45] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-06 00:22:54] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-06 00:22:54] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-06 00:22:54] [KASM] [INFO][0m Waiting for kasm-db...
[0;32m[2025-09-06 00:22:59] [portainer] [INFO][0m Validating environment configuration...
[0;32m[2025-09-06 00:22:59] [portainer] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-06 00:22:59] [portainer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:22:59] [portainer] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:22:59] [portainer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:22:59] [portainer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:22:59] [portainer] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 00:22:59] [PORTAINER] [INFO][0m Starting Portainer deployment...
[0;32m[2025-09-06 00:22:59] [PORTAINER] [INFO][0m Creating Portainer data directories...
[0;36m[2025-09-06 00:22:59] [PORTAINER] [SUCCESS][0m Data directories created
[0;32m[2025-09-06 00:22:59] [PORTAINER] [INFO][0m Deploying Portainer container...
[0;32m[2025-09-06 00:22:59] [PORTAINER] [INFO][0m Starting Portainer container...
[0;32m[2025-09-06 00:22:59] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:23:23] [cortex] [INFO][0m Validating environment configuration...
[0;32m[2025-09-06 00:23:23] [cortex] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-06 00:23:23] [cortex] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:23:23] [cortex] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:23:23] [cortex] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:23:23] [cortex] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:23:23] [cortex] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 00:23:23] [BTPI] [INFO][0m Starting Cortex deployment...
[0;32m[2025-09-06 00:23:23] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-06 00:23:23] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-06 00:23:23] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 00:23:23] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 120s)...
[0;36m[2025-09-06 00:23:24] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-06 00:23:24] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-06 00:23:24] [BTPI] [INFO][0m Creating Cortex configuration...
[0;36m[2025-09-06 00:23:24] [BTPI] [SUCCESS][0m Cortex configuration created
[0;32m[2025-09-06 00:23:24] [BTPI] [INFO][0m Deploying analyzer configurations...
[0;36m[2025-09-06 00:23:24] [BTPI] [SUCCESS][0m Analyzer configurations deployed
[0;32m[2025-09-06 00:23:24] [BTPI] [INFO][0m Deploying responder configurations...
[0;36m[2025-09-06 00:23:24] [BTPI] [SUCCESS][0m Responder configurations deployed
[0;32m[2025-09-06 00:23:24] [BTPI] [INFO][0m Deploying Cortex container...
[0;32m[2025-09-06 00:23:24] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:23:28] [BTPI] [INFO][0m Cortex container deployed
[0;32m[2025-09-06 00:23:28] [BTPI] [INFO][0m Configuring Cortex dependencies...
[0;32m[2025-09-06 00:23:28] [BTPI] [INFO][0m Creating Cortex keyspace in Cassandra...
[0;32m[2025-09-06 00:23:29] [BTPI] [INFO][0m Creating Cortex index in Elasticsearch...
[1;33m[2025-09-06 00:23:29] [BTPI] [WARN][0m Failed to create Cortex Elasticsearch index
[0;36m[2025-09-06 00:23:29] [BTPI] [SUCCESS][0m Dependencies configured
[0;32m[2025-09-06 00:23:29] [BTPI] [INFO][0m Configuring Cortex post-deployment...
[0;32m[2025-09-06 00:23:29] [BTPI] [INFO][0m Waiting for cortex to be ready (max 120s)...
[0;34m[2025-09-06 00:23:29] [BTPI] [DEBUG][0m cortex health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 00:23:39] [BTPI] [DEBUG][0m cortex health check attempt 2/12 failed, waiting 10s...
[0;34m[2025-09-06 00:23:49] [BTPI] [DEBUG][0m cortex health check attempt 3/12 failed, waiting 10s...
[0;34m[2025-09-06 00:23:59] [BTPI] [DEBUG][0m cortex health check attempt 4/12 failed, waiting 10s...
[0;34m[2025-09-06 00:24:09] [BTPI] [DEBUG][0m cortex health check attempt 5/12 failed, waiting 10s...
[0;34m[2025-09-06 00:24:19] [BTPI] [DEBUG][0m cortex health check attempt 6/12 failed, waiting 10s...
[0;34m[2025-09-06 00:24:29] [BTPI] [DEBUG][0m cortex health check attempt 7/12 failed, waiting 10s...
[0;34m[2025-09-06 00:24:39] [BTPI] [DEBUG][0m cortex health check attempt 8/12 failed, waiting 10s...
[0;34m[2025-09-06 00:24:49] [BTPI] [DEBUG][0m cortex health check attempt 9/12 failed, waiting 10s...
[0;34m[2025-09-06 00:24:59] [BTPI] [DEBUG][0m cortex health check attempt 10/12 failed, waiting 10s...
[0;34m[2025-09-06 00:25:10] [BTPI] [DEBUG][0m cortex health check attempt 11/12 failed, waiting 10s...
[0;34m[2025-09-06 00:25:20] [BTPI] [DEBUG][0m cortex health check attempt 12/12 failed, waiting 10s...
[0;31m[2025-09-06 00:25:30] [BTPI] [ERROR][0m cortex failed to become ready within 120s
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m === DEBUG INFO FOR cortex ===
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   cortex          Restarting (1) 9 seconds ago
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: at com.google.inject.internal.SingleParameterInjector.getAll(SingleParameterInjector.java:60)
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:113)
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:91)
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:300)
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:169)
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: at com.google.inject.internal.InternalInjectorCreator.loadEagerSingletons(InternalInjectorCreator.java:213)
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: at com.google.inject.internal.InternalInjectorCreator.injectDynamically(InternalInjectorCreator.java:186)
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m   LOG: ... 9 more
[0;34m[2025-09-06 00:25:30] [BTPI] [DEBUG][0m === END DEBUG INFO FOR cortex ===
[0;31m[2025-09-06 00:25:30] [BTPI] [ERROR][0m Cortex did not become ready in time
[0;32m[2025-09-06 00:26:36] [wazuh-manager] [INFO][0m Validating environment configuration...
[0;32m[2025-09-06 00:26:36] [wazuh-manager] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-06 00:26:36] [wazuh-manager] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:26:36] [wazuh-manager] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:26:36] [wazuh-manager] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:26:36] [wazuh-manager] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:26:36] [wazuh-manager] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 00:26:36] [BTPI] [INFO][0m Starting Wazuh Manager deployment...
[0;32m[2025-09-06 00:26:36] [BTPI] [INFO][0m Waiting for Wazuh Indexer to be ready...
[0;32m[2025-09-06 00:26:36] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 120s)...
[0;36m[2025-09-06 00:26:36] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-06 00:26:36] [BTPI] [INFO][0m Creating Wazuh Manager configuration...
[0;36m[2025-09-06 00:26:36] [BTPI] [SUCCESS][0m Wazuh Manager configuration created
[0;32m[2025-09-06 00:26:36] [BTPI] [INFO][0m Deploying Wazuh Manager container...
[0;32m[2025-09-06 00:26:36] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:26:38] [BTPI] [INFO][0m Wazuh Manager container deployed
[0;32m[2025-09-06 00:26:38] [BTPI] [INFO][0m Configuring Wazuh Manager post-deployment...
[0;32m[2025-09-06 00:26:38] [BTPI] [INFO][0m Waiting for wazuh-manager to be ready (max 180s)...
[0;34m[2025-09-06 00:26:38] [BTPI] [DEBUG][0m wazuh-manager health check attempt 1/18 failed, waiting 10s...
[0;34m[2025-09-06 00:26:48] [BTPI] [DEBUG][0m wazuh-manager health check attempt 2/18 failed, waiting 10s...
[0;34m[2025-09-06 00:26:58] [BTPI] [DEBUG][0m wazuh-manager health check attempt 3/18 failed, waiting 10s...
[0;34m[2025-09-06 00:27:08] [BTPI] [DEBUG][0m wazuh-manager health check attempt 4/18 failed, waiting 10s...
[0;34m[2025-09-06 00:27:18] [BTPI] [DEBUG][0m wazuh-manager health check attempt 5/18 failed, waiting 10s...
[0;34m[2025-09-06 00:27:28] [BTPI] [DEBUG][0m wazuh-manager health check attempt 6/18 failed, waiting 10s...
[0;34m[2025-09-06 00:27:38] [BTPI] [DEBUG][0m wazuh-manager health check attempt 7/18 failed, waiting 10s...
[0;34m[2025-09-06 00:27:48] [BTPI] [DEBUG][0m wazuh-manager health check attempt 8/18 failed, waiting 10s...
[0;34m[2025-09-06 00:27:58] [BTPI] [DEBUG][0m wazuh-manager health check attempt 9/18 failed, waiting 10s...
[0;34m[2025-09-06 00:28:08] [BTPI] [DEBUG][0m wazuh-manager health check attempt 10/18 failed, waiting 10s...
[0;34m[2025-09-06 00:28:19] [BTPI] [DEBUG][0m wazuh-manager health check attempt 11/18 failed, waiting 10s...
[0;34m[2025-09-06 00:28:29] [BTPI] [DEBUG][0m wazuh-manager health check attempt 12/18 failed, waiting 10s...
[0;34m[2025-09-06 00:28:39] [BTPI] [DEBUG][0m wazuh-manager health check attempt 13/18 failed, waiting 10s...
[0;34m[2025-09-06 00:28:49] [BTPI] [DEBUG][0m wazuh-manager health check attempt 14/18 failed, waiting 10s...
[0;34m[2025-09-06 00:28:59] [BTPI] [DEBUG][0m wazuh-manager health check attempt 15/18 failed, waiting 10s...
[0;34m[2025-09-06 00:29:09] [BTPI] [DEBUG][0m wazuh-manager health check attempt 16/18 failed, waiting 10s...
[0;34m[2025-09-06 00:29:19] [BTPI] [DEBUG][0m wazuh-manager health check attempt 17/18 failed, waiting 10s...
[0;34m[2025-09-06 00:29:29] [BTPI] [DEBUG][0m wazuh-manager health check attempt 18/18 failed, waiting 10s...
[0;31m[2025-09-06 00:29:39] [BTPI] [ERROR][0m wazuh-manager failed to become ready within 180s
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m === DEBUG INFO FOR wazuh-manager ===
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   wazuh-manager   Up 1 second (health: starting)   0.0.0.0:514->514/udp, [::]:514->514/udp, 1514/tcp, 0.0.0.0:1515->1515/tcp, [::]:1515->1515/tcp, 0.0.0.0:1514->1514/udp, [::]:1514->1514/udp, 1516/tcp, 0.0.0.0:55000->55000/tcp, [::]:55000->55000/tcp
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: /var/ossec/data_tmp/permanent/var/ossec/active-response/bin/
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: The path /var/ossec/active-response/bin is already mounted
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: /var/ossec/data_tmp/permanent/var/ossec/wodles/
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: The path /var/ossec/wodles is already mounted
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: /var/ossec/data_tmp/permanent/etc/filebeat/
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: The path /etc/filebeat is already mounted
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: find: '/proc/227/task/227/fd/6': No such file or directory
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: find: '/proc/227/task/227/fdinfo/6': No such file or directory
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: find: '/proc/227/fd/5': No such file or directory
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m   LOG: find: '/proc/227/fdinfo/5': No such file or directory
[0;34m[2025-09-06 00:29:39] [BTPI] [DEBUG][0m === END DEBUG INFO FOR wazuh-manager ===
[0;31m[2025-09-06 00:29:39] [BTPI] [ERROR][0m Wazuh Manager did not become ready in time
[0;32m[2025-09-06 00:29:39] [velociraptor] [INFO][0m Validating environment configuration...
[0;32m[2025-09-06 00:29:39] [velociraptor] [INFO][0m Sourcing environment file to load missing variables...
[0;36m[2025-09-06 00:29:39] [velociraptor] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:29:39] [velociraptor] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:29:39] [velociraptor] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:29:39] [velociraptor] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:29:39] [velociraptor] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 00:29:39] [BTPI] [INFO][0m Starting Velociraptor deployment...
[0;32m[2025-09-06 00:29:39] [BTPI] [INFO][0m Creating Velociraptor configuration...
[0;32m[2025-09-06 00:29:40] [BTPI] [INFO][0m Generating SSL certificates for Velociraptor...
[0;36m[2025-09-06 00:29:41] [BTPI] [SUCCESS][0m Velociraptor configuration created
[0;32m[2025-09-06 00:29:41] [BTPI] [INFO][0m Deploying Velociraptor container...
[0;32m[2025-09-06 00:29:41] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:45:41] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-06 00:45:41] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-06 00:45:41] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-06 00:45:42] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250906_004541.tar.gz
[0;32m[2025-09-06 00:45:42] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-06 00:45:42] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-06 00:45:42] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-06 00:45:42] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-06 00:45:42] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-06 00:45:42] [BTPI] [INFO][0m   Available Disk: 184GB
[0;36m[2025-09-06 00:45:42] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-06 00:45:42] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-09-06 00:45:42] [BTPI] [DEBUG][0m Validating existing cassandra service on port 9042...
[0;34m[2025-09-06 00:45:43] [BTPI] [DEBUG][0m cassandra is running and healthy - port conflict resolved
[0;32m[2025-09-06 00:45:43] [BTPI] [INFO][0m Port 9042 is in use by healthy cassandra - conflict resolved automatically
[0;34m[2025-09-06 00:45:43] [BTPI] [DEBUG][0m Validating existing kasm service on port 6443...
[0;34m[2025-09-06 00:45:43] [BTPI] [DEBUG][0m No healthy kasm found - port conflict remains
[1;33m[2025-09-06 00:45:43] [BTPI] [WARN][0m Port 6443 is already in use by docker-pr (required for kasm)
[0;34m[2025-09-06 00:45:44] [BTPI] [DEBUG][0m Validating existing thehive service on port 9000...
[0;34m[2025-09-06 00:45:44] [BTPI] [DEBUG][0m No healthy thehive found - port conflict remains
[1;33m[2025-09-06 00:45:44] [BTPI] [WARN][0m Port 9000 is already in use by docker-pr (required for thehive)
[0;34m[2025-09-06 00:45:44] [BTPI] [DEBUG][0m Validating existing portainer service on port 8000...
[0;34m[2025-09-06 00:45:46] [BTPI] [DEBUG][0m portainer is running but not healthy - port conflict remains
[1;33m[2025-09-06 00:45:46] [BTPI] [WARN][0m Port 8000 is already in use by docker-pr (required for portainer)
[0;34m[2025-09-06 00:45:46] [BTPI] [DEBUG][0m Validating existing portainer service on port 9443...
[0;34m[2025-09-06 00:45:46] [BTPI] [DEBUG][0m portainer is running but not healthy - port conflict remains
[1;33m[2025-09-06 00:45:46] [BTPI] [WARN][0m Port 9443 is already in use by docker-pr (required for portainer)
[0;34m[2025-09-06 00:45:46] [BTPI] [DEBUG][0m Validating existing elasticsearch service on port 9200...
[0;34m[2025-09-06 00:45:47] [BTPI] [DEBUG][0m elasticsearch is running and healthy - port conflict resolved
[0;32m[2025-09-06 00:45:47] [BTPI] [INFO][0m Port 9200 is in use by healthy elasticsearch - conflict resolved automatically
[0;34m[2025-09-06 00:45:47] [BTPI] [DEBUG][0m Validating existing wazuh-indexer service on port 9201...
[0;34m[2025-09-06 00:45:47] [BTPI] [DEBUG][0m wazuh-indexer is running and healthy - port conflict resolved
[0;32m[2025-09-06 00:45:47] [BTPI] [INFO][0m Port 9201 is in use by healthy wazuh-indexer - conflict resolved automatically
[0;34m[2025-09-06 00:45:47] [BTPI] [DEBUG][0m Validating existing wazuh-indexer service on port 9600...
[0;34m[2025-09-06 00:45:47] [BTPI] [DEBUG][0m wazuh-indexer is running and healthy - port conflict resolved
[0;32m[2025-09-06 00:45:47] [BTPI] [INFO][0m Port 9600 is in use by healthy wazuh-indexer - conflict resolved automatically
[0;34m[2025-09-06 00:45:48] [BTPI] [DEBUG][0m Validating existing velociraptor service on port 8000...
[0;34m[2025-09-06 00:45:48] [BTPI] [DEBUG][0m No healthy velociraptor found - port conflict remains
[1;33m[2025-09-06 00:45:48] [BTPI] [WARN][0m Port 8000 is already in use by docker-pr (required for velociraptor)
[0;32m[2025-09-06 00:45:48] [BTPI] [INFO][0m Resolved 4 port conflicts automatically
[1;33m[2025-09-06 00:45:48] [BTPI] [WARN][0m Found 5 unresolvable port conflicts
[1;33m[2025-09-06 00:45:48] [BTPI] [WARN][0m Port conflicts detected - consider resolving before deployment
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-06 00:50:30] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250906_005030.tar.gz
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m   Available Disk: 184GB
[0;36m[2025-09-06 00:50:30] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-06 00:50:30] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-06 00:50:31] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-06 00:50:31] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-06 00:50:31] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-06 00:50:54] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-06 00:50:54] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-06 00:50:54] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-06 00:50:54] [unified-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 00:50:54] [unified-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:50:54] [unified-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:50:54] [unified-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:50:54] [unified-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:50:54] [unified-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-06 00:50:54] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor thehive cortex nginx kasm portainer 
[0;32m[2025-09-06 00:50:54] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-06 00:50:54] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-06 00:50:54] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-06 00:50:54] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-06 00:50:54] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 00:50:54] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:50:54] [elasticsearch] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:50:54] [elasticsearch] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:50:54] [elasticsearch] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:50:54] [elasticsearch] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-06 00:50:54] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-06 00:50:54] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:50:57] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-06 00:50:57] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-06 00:50:57] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;34m[2025-09-06 00:50:58] [BTPI] [DEBUG][0m elasticsearch health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 00:51:08] [BTPI] [DEBUG][0m elasticsearch health check attempt 2/12 failed, waiting 10s...
[0;36m[2025-09-06 00:51:18] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 00:51:18] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 00:51:18] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 00:51:18] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 00:51:18] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 00:51:18] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-06 00:51:18] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-06 00:51:18] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-06 00:51:18] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 00:51:18] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-06 00:51:19] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-06 00:51:21] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-06 00:51:22] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-06 00:51:22] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-06 00:51:22] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-06 00:51:22] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-06 00:51:22] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-06 00:51:22] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-06 00:51:22] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 00:51:22] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:51:22] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:51:22] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:51:22] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:51:22] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-06 00:51:22] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:51:24] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-06 00:51:24] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-06 00:51:25] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-06 00:51:25] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 00:51:35] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-06 00:51:35] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 00:51:46] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-06 00:51:46] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-06 00:51:47] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-06 00:51:49] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-06 00:51:49] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-06 00:51:49] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-06 00:51:49] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-06 00:51:49] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-06 00:51:49] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-06 00:51:59] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;36m[2025-09-06 00:52:05] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-06 00:52:05] [cassandra] [SUCCESS][0m Service cassandra deployment completed
[0;32m[2025-09-06 00:52:05] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-06 00:52:05] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-06 00:52:05] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;34m[2025-09-06 00:52:05] [wazuh-indexer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-indexer/deploy.sh
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-06 00:52:05] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 00:52:05] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:52:05] [wazuh-indexer] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:52:05] [wazuh-indexer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:52:05] [wazuh-indexer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:52:05] [wazuh-indexer] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-06 00:52:05] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-06 00:52:05] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-06 00:52:05] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:52:08] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-06 00:52:08] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-06 00:52:08] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;34m[2025-09-06 00:52:08] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 1/18 failed, waiting 10s...
[0;34m[2025-09-06 00:52:18] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 2/18 failed, waiting 10s...
[0;34m[2025-09-06 00:52:28] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 3/18 failed, waiting 10s...
[0;36m[2025-09-06 00:52:38] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-06 00:52:38] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 00:52:38] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;34m[2025-09-06 00:52:39] [BTPI] [DEBUG][0m Wazuh Indexer is running but security plugin not initialized (this is expected)
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 300s)...
[0;36m[2025-09-06 00:52:39] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;36m[2025-09-06 00:52:39] [wazuh-indexer] [SUCCESS][0m Service wazuh-indexer deployment completed
[0;32m[2025-09-06 00:52:39] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-06 00:52:39] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[0;32m[2025-09-06 00:52:39] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;34m[2025-09-06 00:52:39] [wazuh-manager] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-manager/deploy.sh
[0;32m[2025-09-06 00:52:39] [wazuh-manager] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 00:52:39] [wazuh-manager] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:52:39] [wazuh-manager] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:52:39] [wazuh-manager] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:52:39] [wazuh-manager] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:52:39] [wazuh-manager] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Starting Wazuh Manager deployment...
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Waiting for Wazuh Indexer to be ready...
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 120s)...
[0;36m[2025-09-06 00:52:39] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Creating Wazuh Manager configuration...
[0;36m[2025-09-06 00:52:39] [BTPI] [SUCCESS][0m Wazuh Manager configuration created
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Deploying Wazuh Manager container...
[0;32m[2025-09-06 00:52:39] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 00:52:41] [BTPI] [INFO][0m Wazuh Manager container deployed
[0;32m[2025-09-06 00:52:41] [BTPI] [INFO][0m Configuring Wazuh Manager post-deployment...
[0;32m[2025-09-06 00:52:41] [BTPI] [INFO][0m Waiting for wazuh-manager to be ready (max 180s)...
[0;34m[2025-09-06 00:52:41] [BTPI] [DEBUG][0m wazuh-manager health check attempt 1/18 failed, waiting 10s...
[0;34m[2025-09-06 00:52:51] [BTPI] [DEBUG][0m wazuh-manager health check attempt 2/18 failed, waiting 10s...
[0;34m[2025-09-06 00:53:01] [BTPI] [DEBUG][0m wazuh-manager health check attempt 3/18 failed, waiting 10s...
[0;34m[2025-09-06 00:53:11] [BTPI] [DEBUG][0m wazuh-manager health check attempt 4/18 failed, waiting 10s...
[0;34m[2025-09-06 00:53:21] [BTPI] [DEBUG][0m wazuh-manager health check attempt 5/18 failed, waiting 10s...
[0;34m[2025-09-06 00:53:31] [BTPI] [DEBUG][0m wazuh-manager health check attempt 6/18 failed, waiting 10s...
[0;34m[2025-09-06 00:53:41] [BTPI] [DEBUG][0m wazuh-manager health check attempt 7/18 failed, waiting 10s...
[0;34m[2025-09-06 00:53:51] [BTPI] [DEBUG][0m wazuh-manager health check attempt 8/18 failed, waiting 10s...
[0;34m[2025-09-06 00:54:02] [BTPI] [DEBUG][0m wazuh-manager health check attempt 9/18 failed, waiting 10s...
[0;34m[2025-09-06 00:54:12] [BTPI] [DEBUG][0m wazuh-manager health check attempt 10/18 failed, waiting 10s...
[0;34m[2025-09-06 00:54:22] [BTPI] [DEBUG][0m wazuh-manager health check attempt 11/18 failed, waiting 10s...
[0;34m[2025-09-06 00:54:32] [BTPI] [DEBUG][0m wazuh-manager health check attempt 12/18 failed, waiting 10s...
[0;34m[2025-09-06 00:54:42] [BTPI] [DEBUG][0m wazuh-manager health check attempt 13/18 failed, waiting 10s...
[0;34m[2025-09-06 00:54:52] [BTPI] [DEBUG][0m wazuh-manager health check attempt 14/18 failed, waiting 10s...
[0;34m[2025-09-06 00:55:02] [BTPI] [DEBUG][0m wazuh-manager health check attempt 15/18 failed, waiting 10s...
[0;34m[2025-09-06 00:55:12] [BTPI] [DEBUG][0m wazuh-manager health check attempt 16/18 failed, waiting 10s...
[0;34m[2025-09-06 00:55:22] [BTPI] [DEBUG][0m wazuh-manager health check attempt 17/18 failed, waiting 10s...
[0;34m[2025-09-06 00:55:32] [BTPI] [DEBUG][0m wazuh-manager health check attempt 18/18 failed, waiting 10s...
[0;31m[2025-09-06 00:55:42] [BTPI] [ERROR][0m wazuh-manager failed to become ready within 180s
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m === DEBUG INFO FOR wazuh-manager ===
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   wazuh-manager   Restarting (0) 47 seconds ago
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: 2025-09-06T05:54:48.477Z	ERROR	[tls]	tlscommon/tls.go:154	Failed reading CA certificate: open /etc/ssl/root-ca.pem: no such file or directory
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: 2025-09-06T05:54:48.478Z	INFO	instance/beat.go:424	filebeat stopped.
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: 2025-09-06T05:54:48.478Z	ERROR	instance/beat.go:956	Exiting: error initializing publisher: 2 errors: open /etc/ssl/filebeat.pem: no such file or directory /etc/ssl/filebeat.pem; open /etc/ssl/root-ca.pem: no such file or directory reading <nil>
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: Exiting: error initializing publisher: 2 errors: open /etc/ssl/filebeat.pem: no such file or directory /etc/ssl/filebeat.pem; open /etc/ssl/root-ca.pem: no such file or directory reading <nil>
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: Filebeat exited. code=1
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: [cont-finish.d] executing container finish scripts...
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: [cont-finish.d] done.
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: [s6-finish] waiting for services.
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: [s6-finish] sending all processes the TERM signal.
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m   LOG: [s6-finish] sending all processes the KILL signal and exiting.
[0;34m[2025-09-06 00:55:42] [BTPI] [DEBUG][0m === END DEBUG INFO FOR wazuh-manager ===
[0;31m[2025-09-06 00:55:42] [BTPI] [ERROR][0m Wazuh Manager did not become ready in time
[0;31m[2025-09-06 00:55:42] [wazuh-manager] [ERROR][0m Failed to deploy wazuh-manager using modern script
[0;32m[2025-09-06 00:55:42] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-06 00:55:42] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-06 00:55:42] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;34m[2025-09-06 00:55:42] [velociraptor] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/velociraptor/deploy.sh
[0;32m[2025-09-06 00:55:42] [velociraptor] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 00:55:42] [velociraptor] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:55:42] [velociraptor] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:55:42] [velociraptor] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:55:42] [velociraptor] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:55:42] [velociraptor] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 00:55:42] [BTPI] [INFO][0m Starting Velociraptor deployment...
[0;32m[2025-09-06 00:55:42] [BTPI] [INFO][0m Creating Velociraptor configuration...
[0;32m[2025-09-06 00:55:42] [BTPI] [INFO][0m Generating SSL certificates for Velociraptor...
[0;36m[2025-09-06 00:55:43] [BTPI] [SUCCESS][0m Velociraptor configuration created
[0;32m[2025-09-06 00:55:43] [BTPI] [INFO][0m Deploying Velociraptor container...
[0;32m[2025-09-06 00:55:43] [BTPI] [INFO][0m Creating container...
[0;31m[2025-09-06 00:55:44] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-06 00:55:44] [thehive] [INFO][0m === Deploying thehive ===
[0;32m[2025-09-06 00:55:44] [thehive] [INFO][0m Using modern deployment script for thehive
[0;32m[2025-09-06 00:55:44] [thehive] [INFO][0m Deploying service: thehive
[0;34m[2025-09-06 00:55:44] [thehive] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/thehive/deploy.sh
[0;32m[2025-09-06 00:55:44] [thehive] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 00:55:44] [thehive] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 00:55:44] [thehive] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 00:55:44] [thehive] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 00:55:44] [thehive] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 00:55:44] [thehive] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 00:55:44] [BTPI] [INFO][0m Starting TheHive deployment...
[0;32m[2025-09-06 00:55:44] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-06 00:55:44] [BTPI] [INFO][0m Checking Elasticsearch...
[0;36m[2025-09-06 00:55:44] [BTPI] [SUCCESS][0m Elasticsearch is ready
[0;32m[2025-09-06 00:55:44] [BTPI] [INFO][0m Checking Cassandra...
[0;36m[2025-09-06 00:55:45] [BTPI] [SUCCESS][0m Cassandra is ready
[0;36m[2025-09-06 00:55:45] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-06 00:55:45] [BTPI] [INFO][0m Initializing Cassandra keyspace for TheHive...
[0;36m[2025-09-06 00:55:45] [BTPI] [SUCCESS][0m Cassandra keyspace initialized
[0;32m[2025-09-06 00:55:45] [BTPI] [INFO][0m Creating TheHive configuration...
[0;36m[2025-09-06 00:55:45] [BTPI] [SUCCESS][0m TheHive configuration created
[0;32m[2025-09-06 00:55:45] [BTPI] [INFO][0m Deploying TheHive container...
[0;32m[2025-09-06 00:55:46] [BTPI] [INFO][0m Creating TheHive container...
[0;32m[2025-09-06 00:56:22] [BTPI] [INFO][0m TheHive container deployed
[0;32m[2025-09-06 00:56:22] [BTPI] [INFO][0m Configuring TheHive post-deployment...
[0;32m[2025-09-06 00:56:22] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 1/60)
[0;32m[2025-09-06 00:56:27] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 2/60)
[0;32m[2025-09-06 00:56:32] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 3/60)
[0;32m[2025-09-06 00:56:37] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 4/60)
[0;32m[2025-09-06 00:56:42] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 5/60)
[0;32m[2025-09-06 00:56:47] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 6/60)
[0;32m[2025-09-06 00:56:52] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 7/60)
[0;32m[2025-09-06 00:56:57] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 8/60)
[0;32m[2025-09-06 00:57:02] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 9/60)
[0;32m[2025-09-06 00:57:07] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 10/60)
[0;32m[2025-09-06 00:57:12] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 11/60)
[0;32m[2025-09-06 00:57:17] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 12/60)
[0;32m[2025-09-06 00:57:22] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 13/60)
[0;32m[2025-09-06 00:57:27] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 14/60)
[0;32m[2025-09-06 00:57:32] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 15/60)
[0;32m[2025-09-06 00:57:37] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 16/60)
[0;32m[2025-09-06 00:57:42] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 17/60)
[0;32m[2025-09-06 00:57:47] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 18/60)
[0;32m[2025-09-06 00:57:52] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 19/60)
[0;32m[2025-09-06 00:57:57] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 20/60)
[0;32m[2025-09-06 00:58:02] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 21/60)
[0;32m[2025-09-06 00:58:07] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 22/60)
[0;32m[2025-09-06 00:58:12] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 23/60)
[0;32m[2025-09-06 00:58:17] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 24/60)
[0;32m[2025-09-06 00:58:22] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 25/60)
[0;32m[2025-09-06 00:58:27] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 26/60)
[0;32m[2025-09-06 00:58:32] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 27/60)
[0;32m[2025-09-06 00:58:37] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 28/60)
[0;32m[2025-09-06 00:58:42] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 29/60)
[0;32m[2025-09-06 00:58:47] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 30/60)
[0;32m[2025-09-06 00:58:52] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 31/60)
[0;32m[2025-09-06 00:58:57] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 32/60)
[0;32m[2025-09-06 00:59:02] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 33/60)
[0;32m[2025-09-06 00:59:07] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 34/60)
[0;32m[2025-09-06 00:59:12] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 35/60)
[0;32m[2025-09-06 00:59:17] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 36/60)
[0;32m[2025-09-06 00:59:22] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 37/60)
[0;32m[2025-09-06 00:59:27] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 38/60)
[0;32m[2025-09-06 00:59:32] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 39/60)
[0;32m[2025-09-06 00:59:37] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 40/60)
[0;32m[2025-09-06 00:59:42] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 41/60)
[0;32m[2025-09-06 00:59:47] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 42/60)
[0;32m[2025-09-06 00:59:52] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 43/60)
[0;32m[2025-09-06 00:59:57] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 44/60)
[0;32m[2025-09-06 01:00:02] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 45/60)
[0;32m[2025-09-06 01:00:07] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 46/60)
[0;32m[2025-09-06 01:00:12] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 47/60)
[0;32m[2025-09-06 01:00:17] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 48/60)
[0;32m[2025-09-06 01:00:22] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 49/60)
[0;32m[2025-09-06 01:00:27] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 50/60)
[0;32m[2025-09-06 01:00:32] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 51/60)
[0;32m[2025-09-06 01:00:37] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 52/60)
[0;32m[2025-09-06 01:00:42] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 53/60)
[0;32m[2025-09-06 01:00:47] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 54/60)
[0;32m[2025-09-06 01:00:52] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 55/60)
[0;32m[2025-09-06 01:00:57] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 56/60)
[0;32m[2025-09-06 01:01:02] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 57/60)
[0;32m[2025-09-06 01:01:08] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 58/60)
[0;32m[2025-09-06 01:01:13] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 59/60)
[0;32m[2025-09-06 01:01:18] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 60/60)
[0;31m[2025-09-06 01:01:23] [BTPI] [ERROR][0m TheHive did not become ready in time
[0;31m[2025-09-06 01:01:23] [thehive] [ERROR][0m Failed to deploy thehive using modern script
[0;32m[2025-09-06 01:01:23] [cortex] [INFO][0m === Deploying cortex ===
[0;32m[2025-09-06 01:01:23] [cortex] [INFO][0m Using modern deployment script for cortex
[0;32m[2025-09-06 01:01:23] [cortex] [INFO][0m Deploying service: cortex
[0;34m[2025-09-06 01:01:23] [cortex] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cortex/deploy.sh
[0;32m[2025-09-06 01:01:23] [cortex] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:01:23] [cortex] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:01:23] [cortex] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:01:23] [cortex] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:01:23] [cortex] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:01:23] [cortex] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 01:01:23] [BTPI] [INFO][0m Starting Cortex deployment...
[0;32m[2025-09-06 01:01:23] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-06 01:01:23] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-06 01:01:23] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 01:01:23] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 120s)...
[0;36m[2025-09-06 01:01:23] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-06 01:01:23] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-06 01:01:23] [BTPI] [INFO][0m Creating Cortex configuration...
[0;36m[2025-09-06 01:01:23] [BTPI] [SUCCESS][0m Cortex configuration created
[0;32m[2025-09-06 01:01:23] [BTPI] [INFO][0m Deploying analyzer configurations...
[0;36m[2025-09-06 01:01:23] [BTPI] [SUCCESS][0m Analyzer configurations deployed
[0;32m[2025-09-06 01:01:23] [BTPI] [INFO][0m Deploying responder configurations...
[0;36m[2025-09-06 01:01:23] [BTPI] [SUCCESS][0m Responder configurations deployed
[0;32m[2025-09-06 01:01:23] [BTPI] [INFO][0m Deploying Cortex container...
[0;32m[2025-09-06 01:01:23] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 01:01:25] [BTPI] [INFO][0m Cortex container deployed
[0;32m[2025-09-06 01:01:25] [BTPI] [INFO][0m Configuring Cortex dependencies...
[0;32m[2025-09-06 01:01:25] [BTPI] [INFO][0m Creating Cortex keyspace in Cassandra...
[0;32m[2025-09-06 01:01:26] [BTPI] [INFO][0m Creating Cortex index in Elasticsearch...
[1;33m[2025-09-06 01:01:26] [BTPI] [WARN][0m Failed to create Cortex Elasticsearch index
[0;36m[2025-09-06 01:01:26] [BTPI] [SUCCESS][0m Dependencies configured
[0;32m[2025-09-06 01:01:26] [BTPI] [INFO][0m Configuring Cortex post-deployment...
[0;32m[2025-09-06 01:01:26] [BTPI] [INFO][0m Waiting for cortex to be ready (max 120s)...
[0;34m[2025-09-06 01:01:26] [BTPI] [DEBUG][0m cortex health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 01:01:36] [BTPI] [DEBUG][0m cortex health check attempt 2/12 failed, waiting 10s...
[0;34m[2025-09-06 01:01:46] [BTPI] [DEBUG][0m cortex health check attempt 3/12 failed, waiting 10s...
[0;34m[2025-09-06 01:01:56] [BTPI] [DEBUG][0m cortex health check attempt 4/12 failed, waiting 10s...
[0;34m[2025-09-06 01:02:06] [BTPI] [DEBUG][0m cortex health check attempt 5/12 failed, waiting 10s...
[0;34m[2025-09-06 01:02:16] [BTPI] [DEBUG][0m cortex health check attempt 6/12 failed, waiting 10s...
[0;34m[2025-09-06 01:02:26] [BTPI] [DEBUG][0m cortex health check attempt 7/12 failed, waiting 10s...
[0;34m[2025-09-06 01:02:36] [BTPI] [DEBUG][0m cortex health check attempt 8/12 failed, waiting 10s...
[0;34m[2025-09-06 01:02:46] [BTPI] [DEBUG][0m cortex health check attempt 9/12 failed, waiting 10s...
[0;34m[2025-09-06 01:02:56] [BTPI] [DEBUG][0m cortex health check attempt 10/12 failed, waiting 10s...
[0;34m[2025-09-06 01:03:06] [BTPI] [DEBUG][0m cortex health check attempt 11/12 failed, waiting 10s...
[0;34m[2025-09-06 01:03:16] [BTPI] [DEBUG][0m cortex health check attempt 12/12 failed, waiting 10s...
[0;31m[2025-09-06 01:03:26] [BTPI] [ERROR][0m cortex failed to become ready within 120s
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m === DEBUG INFO FOR cortex ===
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   cortex          Restarting (1) 47 seconds ago
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.impl.SimpleIncluder.fromBasename(SimpleIncluder.java:172)
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.impl.ConfigImpl.parseFileAnySyntax(ConfigImpl.java:138)
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.ConfigFactory.parseFileAnySyntax(ConfigFactory.java:845)
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.ConfigFactory.parseFileAnySyntax(ConfigFactory.java:857)
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.$anonfun$load$5(Configuration.scala:68)
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: at scala.Option.map(Option.scala:230)
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.$anonfun$load$4(Configuration.scala:68)
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: at scala.Option.orElse(Option.scala:447)
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.load(Configuration.scala:68)
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m   LOG: ... 4 more
[0;34m[2025-09-06 01:03:26] [BTPI] [DEBUG][0m === END DEBUG INFO FOR cortex ===
[0;31m[2025-09-06 01:03:26] [BTPI] [ERROR][0m Cortex did not become ready in time
[0;31m[2025-09-06 01:03:26] [cortex] [ERROR][0m Failed to deploy cortex using modern script
[0;32m[2025-09-06 01:03:26] [nginx] [INFO][0m === Deploying nginx ===
[0;32m[2025-09-06 01:03:26] [nginx] [INFO][0m Using legacy deployment for nginx
[0;31m[2025-09-06 01:03:26] [nginx] [ERROR][0m No deployment method available for nginx
[0;32m[2025-09-06 01:14:12] [ORCHESTRATOR] [INFO][0m Starting BTPI-REACT Infrastructure-First Deployment
[0;32m[2025-09-06 01:14:12] [ORCHESTRATOR] [INFO][0m Ensuring Docker network exists...
[0;32m[2025-09-06 01:14:12] [ORCHESTRATOR] [INFO][0m Docker network already exists: btpi-network
[0;36m[2025-09-06 01:14:12] [ORCHESTRATOR] [SUCCESS][0m Docker network ready
[0;32m[2025-09-06 01:14:12] [ORCHESTRATOR] [INFO][0m Phase 1: Deploying Infrastructure Management Services
[0;32m[2025-09-06 01:14:12] [ORCHESTRATOR] [INFO][0m Deploying Portainer (Container Management)...
[0;32m[2025-09-06 01:14:12] [portainer] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:14:12] [portainer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:14:12] [portainer] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:14:12] [portainer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:14:12] [portainer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:14:12] [portainer] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 01:14:12] [PORTAINER] [INFO][0m Starting Portainer deployment...
[0;32m[2025-09-06 01:14:12] [PORTAINER] [INFO][0m Creating Portainer data directories...
[0;36m[2025-09-06 01:14:12] [PORTAINER] [SUCCESS][0m Data directories created
[0;32m[2025-09-06 01:14:12] [PORTAINER] [INFO][0m Deploying Portainer container...
[0;32m[2025-09-06 01:14:12] [PORTAINER] [INFO][0m Starting Portainer container...
[0;32m[2025-09-06 01:14:12] [BTPI] [INFO][0m Creating container...
[0;31m[2025-09-06 01:14:14] [ORCHESTRATOR] [ERROR][0m Portainer deployment failed
[0;31m[2025-09-06 01:14:14] [ORCHESTRATOR] [ERROR][0m Phase 1 failed - cannot continue with security services
[0;32m[2025-09-06 01:14:14] [ORCHESTRATOR] [INFO][0m BTPI-REACT Infrastructure-First Deployment Summary
[0;32m[2025-09-06 01:16:44] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-06 01:16:44] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-06 01:16:44] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-06 01:16:45] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250906_011644.tar.gz
[0;32m[2025-09-06 01:16:45] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-06 01:16:45] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-06 01:16:45] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-06 01:16:45] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-06 01:16:45] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-06 01:16:45] [BTPI] [INFO][0m   Available Disk: 182GB
[0;36m[2025-09-06 01:16:45] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-06 01:16:45] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-06 01:16:46] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-06 01:16:46] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-06 01:16:46] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-06 01:16:54] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-06 01:16:54] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-06 01:16:54] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-06 01:16:54] [unified-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:16:54] [unified-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:16:54] [unified-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:16:54] [unified-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:16:54] [unified-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:16:54] [unified-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-06 01:16:54] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-06 01:16:54] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor thehive cortex nginx kasm portainer 
[0;32m[2025-09-06 01:16:54] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-06 01:16:54] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-06 01:16:55] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-06 01:16:55] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-06 01:16:55] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:16:55] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:16:55] [elasticsearch] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:16:55] [elasticsearch] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:16:55] [elasticsearch] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:16:55] [elasticsearch] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 01:16:55] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-06 01:16:55] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-06 01:16:55] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-06 01:16:55] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-06 01:16:55] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 01:16:58] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-06 01:16:58] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-06 01:16:58] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;34m[2025-09-06 01:16:58] [BTPI] [DEBUG][0m elasticsearch health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 01:17:08] [BTPI] [DEBUG][0m elasticsearch health check attempt 2/12 failed, waiting 10s...
[0;36m[2025-09-06 01:17:18] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 01:17:18] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 01:17:18] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 01:17:18] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 01:17:18] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 01:17:18] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-06 01:17:18] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-06 01:17:18] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-06 01:17:18] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 01:17:18] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-06 01:17:19] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-06 01:17:21] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-06 01:17:21] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-06 01:17:21] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-06 01:17:21] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-06 01:17:21] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-06 01:17:21] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-06 01:17:21] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:17:21] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:17:21] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:17:21] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:17:21] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:17:21] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-06 01:17:21] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 01:17:23] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-06 01:17:23] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-06 01:17:24] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-06 01:17:24] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 01:17:35] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-06 01:17:35] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 01:17:45] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-06 01:17:45] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-06 01:17:46] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-06 01:17:47] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-06 01:17:48] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-06 01:17:48] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-06 01:17:48] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-06 01:17:48] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-06 01:17:48] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;31m[2025-09-06 01:17:58] [BTPI] [ERROR][0m Cassandra read/write test failed
[0;31m[2025-09-06 01:17:58] [BTPI] [ERROR][0m Cassandra deployment completed with errors
[0;31m[2025-09-06 01:17:58] [BTPI] [ERROR][0m Script failed at line 321 with exit code 1
[0;31m[2025-09-06 01:17:58] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-06 01:17:58] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-06 01:17:58] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-06 01:17:58] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-06 01:17:58] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;34m[2025-09-06 01:17:58] [wazuh-indexer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-indexer/deploy.sh
[0;32m[2025-09-06 01:17:58] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-06 01:17:58] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:17:58] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:17:58] [wazuh-indexer] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:17:58] [wazuh-indexer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:17:58] [wazuh-indexer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:17:58] [wazuh-indexer] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 01:17:58] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-06 01:17:58] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-06 01:17:58] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-06 01:17:58] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-06 01:17:58] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-06 01:17:58] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 01:18:00] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-06 01:18:00] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-06 01:18:00] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;34m[2025-09-06 01:18:00] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 1/18 failed, waiting 10s...
[0;34m[2025-09-06 01:18:10] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 2/18 failed, waiting 10s...
[0;34m[2025-09-06 01:18:20] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 3/18 failed, waiting 10s...
[0;36m[2025-09-06 01:18:30] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-06 01:18:30] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-06 01:18:30] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;34m[2025-09-06 01:18:31] [BTPI] [DEBUG][0m Wazuh Indexer is running but security plugin not initialized (this is expected)
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 300s)...
[0;36m[2025-09-06 01:18:31] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;36m[2025-09-06 01:18:31] [wazuh-indexer] [SUCCESS][0m Service wazuh-indexer deployment completed
[0;32m[2025-09-06 01:18:31] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-06 01:18:31] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[0;32m[2025-09-06 01:18:31] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;34m[2025-09-06 01:18:31] [wazuh-manager] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-manager/deploy.sh
[0;32m[2025-09-06 01:18:31] [wazuh-manager] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:18:31] [wazuh-manager] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:18:31] [wazuh-manager] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:18:31] [wazuh-manager] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:18:31] [wazuh-manager] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:18:31] [wazuh-manager] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Starting Wazuh Manager deployment...
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Waiting for Wazuh Indexer to be ready...
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 120s)...
[0;36m[2025-09-06 01:18:31] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Creating Wazuh Manager configuration...
[0;36m[2025-09-06 01:18:31] [BTPI] [SUCCESS][0m Wazuh Manager configuration created
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Deploying Wazuh Manager container...
[0;32m[2025-09-06 01:18:31] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 01:18:33] [BTPI] [INFO][0m Wazuh Manager container deployed
[0;32m[2025-09-06 01:18:33] [BTPI] [INFO][0m Configuring Wazuh Manager post-deployment...
[0;32m[2025-09-06 01:18:33] [BTPI] [INFO][0m Waiting for wazuh-manager to be ready (max 180s)...
[0;34m[2025-09-06 01:18:33] [BTPI] [DEBUG][0m wazuh-manager health check attempt 1/18 failed, waiting 10s...
[0;34m[2025-09-06 01:18:43] [BTPI] [DEBUG][0m wazuh-manager health check attempt 2/18 failed, waiting 10s...
[0;34m[2025-09-06 01:18:53] [BTPI] [DEBUG][0m wazuh-manager health check attempt 3/18 failed, waiting 10s...
[0;34m[2025-09-06 01:19:03] [BTPI] [DEBUG][0m wazuh-manager health check attempt 4/18 failed, waiting 10s...
[0;34m[2025-09-06 01:19:13] [BTPI] [DEBUG][0m wazuh-manager health check attempt 5/18 failed, waiting 10s...
[0;34m[2025-09-06 01:19:23] [BTPI] [DEBUG][0m wazuh-manager health check attempt 6/18 failed, waiting 10s...
[0;34m[2025-09-06 01:19:33] [BTPI] [DEBUG][0m wazuh-manager health check attempt 7/18 failed, waiting 10s...
[0;34m[2025-09-06 01:19:43] [BTPI] [DEBUG][0m wazuh-manager health check attempt 8/18 failed, waiting 10s...
[0;34m[2025-09-06 01:19:53] [BTPI] [DEBUG][0m wazuh-manager health check attempt 9/18 failed, waiting 10s...
[0;34m[2025-09-06 01:20:03] [BTPI] [DEBUG][0m wazuh-manager health check attempt 10/18 failed, waiting 10s...
[0;34m[2025-09-06 01:20:13] [BTPI] [DEBUG][0m wazuh-manager health check attempt 11/18 failed, waiting 10s...
[0;34m[2025-09-06 01:20:23] [BTPI] [DEBUG][0m wazuh-manager health check attempt 12/18 failed, waiting 10s...
[0;34m[2025-09-06 01:20:33] [BTPI] [DEBUG][0m wazuh-manager health check attempt 13/18 failed, waiting 10s...
[0;34m[2025-09-06 01:20:43] [BTPI] [DEBUG][0m wazuh-manager health check attempt 14/18 failed, waiting 10s...
[0;34m[2025-09-06 01:20:53] [BTPI] [DEBUG][0m wazuh-manager health check attempt 15/18 failed, waiting 10s...
[0;34m[2025-09-06 01:21:03] [BTPI] [DEBUG][0m wazuh-manager health check attempt 16/18 failed, waiting 10s...
[0;34m[2025-09-06 01:21:13] [BTPI] [DEBUG][0m wazuh-manager health check attempt 17/18 failed, waiting 10s...
[0;34m[2025-09-06 01:21:23] [BTPI] [DEBUG][0m wazuh-manager health check attempt 18/18 failed, waiting 10s...
[0;31m[2025-09-06 01:21:33] [BTPI] [ERROR][0m wazuh-manager failed to become ready within 180s
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m === DEBUG INFO FOR wazuh-manager ===
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   wazuh-manager   Up 7 seconds (health: starting)   0.0.0.0:514->514/udp, [::]:514->514/udp, 1514/tcp, 0.0.0.0:1515->1515/tcp, [::]:1515->1515/tcp, 0.0.0.0:1514->1514/udp, [::]:1514->1514/udp, 1516/tcp, 0.0.0.0:55000->55000/tcp, [::]:55000->55000/tcp
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: 2025-09-06T06:21:29.562Z	ERROR	[tls]	tlscommon/tls.go:154	Failed reading CA certificate: open /etc/ssl/root-ca.pem: no such file or directory
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: 2025-09-06T06:21:29.562Z	INFO	instance/beat.go:424	filebeat stopped.
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: 2025-09-06T06:21:29.562Z	ERROR	instance/beat.go:956	Exiting: error initializing publisher: 2 errors: open /etc/ssl/filebeat.pem: no such file or directory /etc/ssl/filebeat.pem; open /etc/ssl/root-ca.pem: no such file or directory reading <nil>
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: Exiting: error initializing publisher: 2 errors: open /etc/ssl/filebeat.pem: no such file or directory /etc/ssl/filebeat.pem; open /etc/ssl/root-ca.pem: no such file or directory reading <nil>
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: Filebeat exited. code=1
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: [cont-finish.d] executing container finish scripts...
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: [cont-finish.d] done.
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: [s6-finish] waiting for services.
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: [s6-finish] sending all processes the TERM signal.
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m   LOG: [s6-finish] sending all processes the KILL signal and exiting.
[0;34m[2025-09-06 01:21:34] [BTPI] [DEBUG][0m === END DEBUG INFO FOR wazuh-manager ===
[0;31m[2025-09-06 01:21:34] [BTPI] [ERROR][0m Wazuh Manager did not become ready in time
[0;31m[2025-09-06 01:21:34] [wazuh-manager] [ERROR][0m Failed to deploy wazuh-manager using modern script
[0;32m[2025-09-06 01:21:34] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-06 01:21:34] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-06 01:21:34] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;34m[2025-09-06 01:21:34] [velociraptor] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/velociraptor/deploy.sh
[0;32m[2025-09-06 01:21:34] [velociraptor] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:21:34] [velociraptor] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:21:34] [velociraptor] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:21:34] [velociraptor] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:21:34] [velociraptor] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:21:34] [velociraptor] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 01:21:34] [VELOCIRAPTOR] [INFO][0m Starting Velociraptor deployment...
[0;32m[2025-09-06 01:21:34] [VELOCIRAPTOR] [INFO][0m Creating Velociraptor Docker Compose configuration...
[0;36m[2025-09-06 01:21:34] [VELOCIRAPTOR] [SUCCESS][0m Docker Compose configuration created
[0;32m[2025-09-06 01:21:34] [VELOCIRAPTOR] [INFO][0m Deploying Velociraptor using Docker Compose...
[0;32m[2025-09-06 01:21:34] [VELOCIRAPTOR] [INFO][0m Pulling Velociraptor Docker image...
[0;32m[2025-09-06 01:21:42] [VELOCIRAPTOR] [INFO][0m Starting Velociraptor container...
[0;36m[2025-09-06 01:21:48] [VELOCIRAPTOR] [SUCCESS][0m Velociraptor container deployed
[0;32m[2025-09-06 01:21:48] [VELOCIRAPTOR] [INFO][0m Waiting for Velociraptor to be ready...
[0;31m[2025-09-06 01:21:53] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-06 01:21:53] [thehive] [INFO][0m === Deploying thehive ===
[0;32m[2025-09-06 01:21:53] [thehive] [INFO][0m Using modern deployment script for thehive
[0;32m[2025-09-06 01:21:53] [thehive] [INFO][0m Deploying service: thehive
[0;34m[2025-09-06 01:21:53] [thehive] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/thehive/deploy.sh
[0;32m[2025-09-06 01:21:53] [thehive] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:21:53] [thehive] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:21:53] [thehive] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:21:53] [thehive] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:21:53] [thehive] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:21:53] [thehive] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 01:21:53] [BTPI] [INFO][0m Starting TheHive deployment...
[0;32m[2025-09-06 01:21:53] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-06 01:21:53] [BTPI] [INFO][0m Checking Elasticsearch...
[0;36m[2025-09-06 01:21:53] [BTPI] [SUCCESS][0m Elasticsearch is ready
[0;32m[2025-09-06 01:21:53] [BTPI] [INFO][0m Checking Cassandra...
[0;36m[2025-09-06 01:21:54] [BTPI] [SUCCESS][0m Cassandra is ready
[0;36m[2025-09-06 01:21:54] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-06 01:21:54] [BTPI] [INFO][0m Initializing Cassandra keyspace for TheHive...
[0;36m[2025-09-06 01:21:55] [BTPI] [SUCCESS][0m Cassandra keyspace initialized
[0;32m[2025-09-06 01:21:55] [BTPI] [INFO][0m Creating TheHive configuration...
[0;36m[2025-09-06 01:21:55] [BTPI] [SUCCESS][0m TheHive configuration created
[0;32m[2025-09-06 01:21:55] [BTPI] [INFO][0m Deploying TheHive container...
[0;32m[2025-09-06 01:21:55] [THEHIVE] [INFO][0m Creating TheHive container...
[0;32m[2025-09-06 01:22:00] [BTPI] [INFO][0m TheHive container deployed
[0;32m[2025-09-06 01:22:00] [BTPI] [INFO][0m Configuring TheHive post-deployment...
[0;32m[2025-09-06 01:22:00] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 1/60)
[0;32m[2025-09-06 01:22:05] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 2/60)
[0;32m[2025-09-06 01:22:10] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 3/60)
[0;32m[2025-09-06 01:22:15] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 4/60)
[0;32m[2025-09-06 01:22:20] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 5/60)
[0;32m[2025-09-06 01:22:25] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 6/60)
[0;32m[2025-09-06 01:22:30] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 7/60)
[0;32m[2025-09-06 01:22:35] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 8/60)
[0;32m[2025-09-06 01:22:40] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 9/60)
[0;32m[2025-09-06 01:22:45] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 10/60)
[0;32m[2025-09-06 01:22:50] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 11/60)
[0;32m[2025-09-06 01:22:55] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 12/60)
[0;32m[2025-09-06 01:23:00] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 13/60)
[0;32m[2025-09-06 01:23:05] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 14/60)
[0;32m[2025-09-06 01:23:10] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 15/60)
[0;32m[2025-09-06 01:23:15] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 16/60)
[0;32m[2025-09-06 01:23:20] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 17/60)
[0;32m[2025-09-06 01:23:25] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 18/60)
[0;32m[2025-09-06 01:23:30] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 19/60)
[0;32m[2025-09-06 01:23:35] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 20/60)
[0;32m[2025-09-06 01:23:40] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 21/60)
[0;32m[2025-09-06 01:23:45] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 22/60)
[0;32m[2025-09-06 01:23:50] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 23/60)
[0;32m[2025-09-06 01:23:55] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 24/60)
[0;32m[2025-09-06 01:24:00] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 25/60)
[0;32m[2025-09-06 01:24:05] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 26/60)
[0;32m[2025-09-06 01:24:10] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 27/60)
[0;32m[2025-09-06 01:24:16] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 28/60)
[0;32m[2025-09-06 01:24:21] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 29/60)
[0;32m[2025-09-06 01:24:26] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 30/60)
[0;32m[2025-09-06 01:24:31] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 31/60)
[0;32m[2025-09-06 01:24:36] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 32/60)
[0;32m[2025-09-06 01:24:41] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 33/60)
[0;32m[2025-09-06 01:24:46] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 34/60)
[0;32m[2025-09-06 01:24:51] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 35/60)
[0;32m[2025-09-06 01:24:56] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 36/60)
[0;32m[2025-09-06 01:25:01] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 37/60)
[0;32m[2025-09-06 01:25:06] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 38/60)
[0;32m[2025-09-06 01:25:11] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 39/60)
[0;32m[2025-09-06 01:25:16] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 40/60)
[0;32m[2025-09-06 01:25:21] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 41/60)
[0;32m[2025-09-06 01:25:26] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 42/60)
[0;32m[2025-09-06 01:25:31] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 43/60)
[0;32m[2025-09-06 01:25:36] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 44/60)
[0;32m[2025-09-06 01:25:41] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 45/60)
[0;32m[2025-09-06 01:25:46] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 46/60)
[0;32m[2025-09-06 01:25:51] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 47/60)
[0;32m[2025-09-06 01:25:56] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 48/60)
[0;32m[2025-09-06 01:26:01] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 49/60)
[0;32m[2025-09-06 01:26:06] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 50/60)
[0;32m[2025-09-06 01:26:11] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 51/60)
[0;32m[2025-09-06 01:26:16] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 52/60)
[0;32m[2025-09-06 01:26:21] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 53/60)
[0;32m[2025-09-06 01:26:26] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 54/60)
[0;32m[2025-09-06 01:26:31] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 55/60)
[0;32m[2025-09-06 01:26:36] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 56/60)
[0;32m[2025-09-06 01:26:41] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 57/60)
[0;32m[2025-09-06 01:26:46] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 58/60)
[0;32m[2025-09-06 01:26:51] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 59/60)
[0;32m[2025-09-06 01:26:56] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 60/60)
[0;31m[2025-09-06 01:27:01] [BTPI] [ERROR][0m TheHive did not become ready in time
[0;31m[2025-09-06 01:27:01] [thehive] [ERROR][0m Failed to deploy thehive using modern script
[0;32m[2025-09-06 01:27:01] [cortex] [INFO][0m === Deploying cortex ===
[0;32m[2025-09-06 01:27:01] [cortex] [INFO][0m Using modern deployment script for cortex
[0;32m[2025-09-06 01:27:01] [cortex] [INFO][0m Deploying service: cortex
[0;34m[2025-09-06 01:27:01] [cortex] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cortex/deploy.sh
[0;32m[2025-09-06 01:27:01] [cortex] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 01:27:01] [cortex] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 01:27:01] [cortex] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 01:27:01] [cortex] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 01:27:01] [cortex] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 01:27:01] [cortex] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 01:27:01] [BTPI] [INFO][0m Starting Cortex deployment...
[0;32m[2025-09-06 01:27:01] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-06 01:27:01] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-06 01:27:01] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 01:27:01] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 120s)...
[0;36m[2025-09-06 01:27:02] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-06 01:27:02] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-06 01:27:02] [BTPI] [INFO][0m Creating Cortex configuration...
[0;36m[2025-09-06 01:27:02] [BTPI] [SUCCESS][0m Cortex configuration created
[0;32m[2025-09-06 01:27:02] [BTPI] [INFO][0m Deploying analyzer configurations...
[0;36m[2025-09-06 01:27:02] [BTPI] [SUCCESS][0m Analyzer configurations deployed
[0;32m[2025-09-06 01:27:02] [BTPI] [INFO][0m Deploying responder configurations...
[0;36m[2025-09-06 01:27:02] [BTPI] [SUCCESS][0m Responder configurations deployed
[0;32m[2025-09-06 01:27:02] [BTPI] [INFO][0m Deploying Cortex container...
[0;32m[2025-09-06 01:27:02] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 01:27:04] [BTPI] [INFO][0m Cortex container deployed
[0;32m[2025-09-06 01:27:04] [BTPI] [INFO][0m Configuring Cortex dependencies...
[0;32m[2025-09-06 01:27:04] [BTPI] [INFO][0m Creating Cortex keyspace in Cassandra...
[0;32m[2025-09-06 01:27:05] [BTPI] [INFO][0m Creating Cortex index in Elasticsearch...
[1;33m[2025-09-06 01:27:05] [BTPI] [WARN][0m Failed to create Cortex Elasticsearch index
[0;36m[2025-09-06 01:27:05] [BTPI] [SUCCESS][0m Dependencies configured
[0;32m[2025-09-06 01:27:05] [BTPI] [INFO][0m Configuring Cortex post-deployment...
[0;32m[2025-09-06 01:27:05] [BTPI] [INFO][0m Waiting for cortex to be ready (max 120s)...
[0;34m[2025-09-06 01:27:05] [BTPI] [DEBUG][0m cortex health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 01:27:15] [BTPI] [DEBUG][0m cortex health check attempt 2/12 failed, waiting 10s...
[0;34m[2025-09-06 01:27:25] [BTPI] [DEBUG][0m cortex health check attempt 3/12 failed, waiting 10s...
[0;34m[2025-09-06 01:27:35] [BTPI] [DEBUG][0m cortex health check attempt 4/12 failed, waiting 10s...
[0;34m[2025-09-06 01:27:45] [BTPI] [DEBUG][0m cortex health check attempt 5/12 failed, waiting 10s...
[0;34m[2025-09-06 01:27:55] [BTPI] [DEBUG][0m cortex health check attempt 6/12 failed, waiting 10s...
[0;34m[2025-09-06 01:28:05] [BTPI] [DEBUG][0m cortex health check attempt 7/12 failed, waiting 10s...
[0;34m[2025-09-06 01:28:15] [BTPI] [DEBUG][0m cortex health check attempt 8/12 failed, waiting 10s...
[0;34m[2025-09-06 01:28:25] [BTPI] [DEBUG][0m cortex health check attempt 9/12 failed, waiting 10s...
[0;34m[2025-09-06 01:28:35] [BTPI] [DEBUG][0m cortex health check attempt 10/12 failed, waiting 10s...
[0;34m[2025-09-06 01:28:45] [BTPI] [DEBUG][0m cortex health check attempt 11/12 failed, waiting 10s...
[0;34m[2025-09-06 01:28:55] [BTPI] [DEBUG][0m cortex health check attempt 12/12 failed, waiting 10s...
[0;31m[2025-09-06 01:29:05] [BTPI] [ERROR][0m cortex failed to become ready within 120s
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m === DEBUG INFO FOR cortex ===
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   cortex          Restarting (1) 49 seconds ago
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.impl.SimpleIncluder.fromBasename(SimpleIncluder.java:172)
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.impl.ConfigImpl.parseFileAnySyntax(ConfigImpl.java:138)
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.ConfigFactory.parseFileAnySyntax(ConfigFactory.java:845)
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.ConfigFactory.parseFileAnySyntax(ConfigFactory.java:857)
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.$anonfun$load$5(Configuration.scala:68)
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: at scala.Option.map(Option.scala:230)
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.$anonfun$load$4(Configuration.scala:68)
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: at scala.Option.orElse(Option.scala:447)
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.load(Configuration.scala:68)
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m   LOG: ... 4 more
[0;34m[2025-09-06 01:29:05] [BTPI] [DEBUG][0m === END DEBUG INFO FOR cortex ===
[0;31m[2025-09-06 01:29:05] [BTPI] [ERROR][0m Cortex did not become ready in time
[0;31m[2025-09-06 01:29:05] [cortex] [ERROR][0m Failed to deploy cortex using modern script
[0;32m[2025-09-06 01:29:05] [nginx] [INFO][0m === Deploying nginx ===
[0;32m[2025-09-06 01:29:05] [nginx] [INFO][0m Using legacy deployment for nginx
[0;31m[2025-09-06 01:29:05] [nginx] [ERROR][0m No deployment method available for nginx
[0;32m[2025-09-06 02:58:00] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-06 02:58:00] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-06 02:58:00] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-06 02:58:01] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250906_025800.tar.gz
[0;32m[2025-09-06 02:58:01] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-06 02:58:01] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-06 02:58:01] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-06 02:58:01] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-06 02:58:01] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-06 02:58:01] [BTPI] [INFO][0m   Available Disk: 181GB
[0;36m[2025-09-06 02:58:01] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-06 02:58:01] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-09-06 02:58:02] [BTPI] [DEBUG][0m Validating existing cassandra service on port 9042...
[0;34m[2025-09-06 02:58:03] [BTPI] [DEBUG][0m cassandra is running and healthy - port conflict resolved
[0;32m[2025-09-06 02:58:03] [BTPI] [INFO][0m Port 9042 is in use by healthy cassandra - conflict resolved automatically
[0;34m[2025-09-06 02:58:10] [BTPI] [DEBUG][0m Validating existing portainer service on port 8000...
[0;34m[2025-09-06 02:58:10] [BTPI] [DEBUG][0m No healthy portainer found - port conflict remains
[1;33m[2025-09-06 02:58:10] [BTPI] [WARN][0m Port 8000 is already in use by docker-pr (required for portainer)
[0;34m[2025-09-06 02:58:16] [BTPI] [DEBUG][0m Validating existing elasticsearch service on port 9200...
[0;34m[2025-09-06 02:58:16] [BTPI] [DEBUG][0m elasticsearch is running and healthy - port conflict resolved
[0;32m[2025-09-06 02:58:16] [BTPI] [INFO][0m Port 9200 is in use by healthy elasticsearch - conflict resolved automatically
[0;34m[2025-09-06 02:58:18] [BTPI] [DEBUG][0m Validating existing wazuh-indexer service on port 9201...
[0;34m[2025-09-06 02:58:18] [BTPI] [DEBUG][0m wazuh-indexer is running and healthy - port conflict resolved
[0;32m[2025-09-06 02:58:18] [BTPI] [INFO][0m Port 9201 is in use by healthy wazuh-indexer - conflict resolved automatically
[0;34m[2025-09-06 02:58:19] [BTPI] [DEBUG][0m Validating existing wazuh-indexer service on port 9600...
[0;34m[2025-09-06 02:58:20] [BTPI] [DEBUG][0m wazuh-indexer is running and healthy - port conflict resolved
[0;32m[2025-09-06 02:58:20] [BTPI] [INFO][0m Port 9600 is in use by healthy wazuh-indexer - conflict resolved automatically
[0;34m[2025-09-06 02:58:21] [BTPI] [DEBUG][0m Validating existing velociraptor service on port 8000...
[0;34m[2025-09-06 02:58:21] [BTPI] [DEBUG][0m velociraptor is running and healthy - port conflict resolved
[0;32m[2025-09-06 02:58:22] [BTPI] [INFO][0m Port 8000 is in use by healthy velociraptor - conflict resolved automatically
[0;34m[2025-09-06 02:58:23] [BTPI] [DEBUG][0m Validating existing velociraptor service on port 8889...
[0;34m[2025-09-06 02:58:24] [BTPI] [DEBUG][0m velociraptor is running and healthy - port conflict resolved
[0;32m[2025-09-06 02:58:24] [BTPI] [INFO][0m Port 8889 is in use by healthy velociraptor - conflict resolved automatically
[0;32m[2025-09-06 02:58:24] [BTPI] [INFO][0m Resolved 6 port conflicts automatically
[1;33m[2025-09-06 02:58:24] [BTPI] [WARN][0m Found 1 unresolvable port conflicts
[1;33m[2025-09-06 02:58:24] [BTPI] [WARN][0m Port conflicts detected - consider resolving before deployment
[0;36m[2025-09-06 03:00:01] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-06 03:00:01] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-06 03:00:06] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-06 03:00:06] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-06 03:00:06] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-06 03:00:06] [unified-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 03:00:06] [unified-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 03:00:06] [unified-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 03:00:06] [unified-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 03:00:06] [unified-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 03:00:06] [unified-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-06 03:00:06] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor thehive cortex nginx kasm portainer 
[0;32m[2025-09-06 03:00:06] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-06 03:00:06] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-06 03:00:06] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-06 03:00:06] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-06 03:00:06] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 03:00:06] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 03:00:06] [elasticsearch] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 03:00:06] [elasticsearch] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 03:00:06] [elasticsearch] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 03:00:06] [elasticsearch] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-06 03:00:06] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-06 03:00:06] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 03:00:09] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-06 03:00:09] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-06 03:00:09] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;34m[2025-09-06 03:00:09] [BTPI] [DEBUG][0m elasticsearch health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 03:00:19] [BTPI] [DEBUG][0m elasticsearch health check attempt 2/12 failed, waiting 10s...
[0;36m[2025-09-06 03:00:30] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 03:00:30] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 03:00:30] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 03:00:30] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 03:00:30] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 03:00:30] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-06 03:00:30] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-06 03:00:30] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-06 03:00:30] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 03:00:30] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-06 03:00:31] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-06 03:00:33] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-06 03:00:33] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-06 03:00:33] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-06 03:00:33] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-06 03:00:33] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-06 03:00:33] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-06 03:00:33] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 03:00:33] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 03:00:33] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 03:00:33] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 03:00:33] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 03:00:33] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-06 03:00:33] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 03:00:35] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-06 03:00:35] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-06 03:00:36] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-06 03:00:36] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 03:00:47] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-06 03:00:47] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 03:00:58] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-06 03:00:58] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-06 03:00:58] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-06 03:01:00] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-06 03:01:00] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-06 03:01:00] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-06 03:01:00] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-06 03:01:01] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-06 03:01:01] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;32m[2025-09-06 03:01:12] [BTPI] [INFO][0m Cassandra read/write test passed
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m All Cassandra tests passed
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Cassandra deployment completed successfully
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Cassandra is accessible at: 192.168.1.184:9042
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Keyspaces created: thehive, cortex
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Status script: /home/cmndcntrl/code/btpi-react/../../data/cassandra/scripts/status.sh
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 300s)...
[0;36m[2025-09-06 03:01:18] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-06 03:01:18] [cassandra] [SUCCESS][0m Service cassandra deployment completed
[0;32m[2025-09-06 03:01:18] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-06 03:01:18] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-06 03:01:18] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;34m[2025-09-06 03:01:18] [wazuh-indexer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-indexer/deploy.sh
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-06 03:01:18] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 03:01:18] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 03:01:18] [wazuh-indexer] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 03:01:18] [wazuh-indexer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 03:01:18] [wazuh-indexer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 03:01:18] [wazuh-indexer] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-06 03:01:18] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-06 03:01:18] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-06 03:01:18] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 03:01:20] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-06 03:01:20] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-06 03:01:20] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;34m[2025-09-06 03:01:20] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 1/18 failed, waiting 10s...
[0;34m[2025-09-06 03:01:30] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 2/18 failed, waiting 10s...
[0;34m[2025-09-06 03:01:40] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 3/18 failed, waiting 10s...
[0;36m[2025-09-06 03:01:51] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-06 03:01:51] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;34m[2025-09-06 03:01:51] [BTPI] [DEBUG][0m Wazuh Indexer is running but security plugin not initialized (this is expected)
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 300s)...
[0;36m[2025-09-06 03:01:51] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;36m[2025-09-06 03:01:51] [wazuh-indexer] [SUCCESS][0m Service wazuh-indexer deployment completed
[0;32m[2025-09-06 03:01:51] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-06 03:01:51] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[0;32m[2025-09-06 03:01:51] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;34m[2025-09-06 03:01:51] [wazuh-manager] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-manager/deploy.sh
[0;32m[2025-09-06 03:01:51] [wazuh-manager] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 03:01:51] [wazuh-manager] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 03:01:51] [wazuh-manager] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 03:01:51] [wazuh-manager] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 03:01:51] [wazuh-manager] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 03:01:51] [wazuh-manager] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Starting Wazuh Manager deployment...
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Waiting for Wazuh Indexer to be ready...
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 120s)...
[0;36m[2025-09-06 03:01:51] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Creating Wazuh Manager configuration...
[0;36m[2025-09-06 03:01:51] [BTPI] [SUCCESS][0m Wazuh Manager configuration created
[0;32m[2025-09-06 03:01:51] [BTPI] [INFO][0m Deploying Wazuh Manager container...
[0;32m[2025-09-06 03:01:52] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 03:01:54] [BTPI] [INFO][0m Wazuh Manager container deployed
[0;32m[2025-09-06 03:01:54] [BTPI] [INFO][0m Configuring Wazuh Manager post-deployment...
[0;32m[2025-09-06 03:01:54] [BTPI] [INFO][0m Waiting for wazuh-manager to be ready (max 180s)...
[0;34m[2025-09-06 03:01:54] [BTPI] [DEBUG][0m wazuh-manager health check attempt 1/18 failed, waiting 10s...
[0;34m[2025-09-06 03:02:04] [BTPI] [DEBUG][0m wazuh-manager health check attempt 2/18 failed, waiting 10s...
[0;34m[2025-09-06 03:02:14] [BTPI] [DEBUG][0m wazuh-manager health check attempt 3/18 failed, waiting 10s...
[0;34m[2025-09-06 03:02:24] [BTPI] [DEBUG][0m wazuh-manager health check attempt 4/18 failed, waiting 10s...
[0;34m[2025-09-06 03:02:34] [BTPI] [DEBUG][0m wazuh-manager health check attempt 5/18 failed, waiting 10s...
[0;34m[2025-09-06 03:02:44] [BTPI] [DEBUG][0m wazuh-manager health check attempt 6/18 failed, waiting 10s...
[0;34m[2025-09-06 03:02:54] [BTPI] [DEBUG][0m wazuh-manager health check attempt 7/18 failed, waiting 10s...
[0;34m[2025-09-06 03:03:04] [BTPI] [DEBUG][0m wazuh-manager health check attempt 8/18 failed, waiting 10s...
[0;34m[2025-09-06 03:03:14] [BTPI] [DEBUG][0m wazuh-manager health check attempt 9/18 failed, waiting 10s...
[0;34m[2025-09-06 03:03:24] [BTPI] [DEBUG][0m wazuh-manager health check attempt 10/18 failed, waiting 10s...
[0;34m[2025-09-06 03:03:34] [BTPI] [DEBUG][0m wazuh-manager health check attempt 11/18 failed, waiting 10s...
[0;34m[2025-09-06 03:03:44] [BTPI] [DEBUG][0m wazuh-manager health check attempt 12/18 failed, waiting 10s...
[0;34m[2025-09-06 03:03:54] [BTPI] [DEBUG][0m wazuh-manager health check attempt 13/18 failed, waiting 10s...
[0;34m[2025-09-06 03:04:04] [BTPI] [DEBUG][0m wazuh-manager health check attempt 14/18 failed, waiting 10s...
[0;34m[2025-09-06 03:04:15] [BTPI] [DEBUG][0m wazuh-manager health check attempt 15/18 failed, waiting 10s...
[0;34m[2025-09-06 03:04:25] [BTPI] [DEBUG][0m wazuh-manager health check attempt 16/18 failed, waiting 10s...
[0;34m[2025-09-06 03:04:35] [BTPI] [DEBUG][0m wazuh-manager health check attempt 17/18 failed, waiting 10s...
[0;34m[2025-09-06 03:04:45] [BTPI] [DEBUG][0m wazuh-manager health check attempt 18/18 failed, waiting 10s...
[0;31m[2025-09-06 03:04:55] [BTPI] [ERROR][0m wazuh-manager failed to become ready within 180s
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m === DEBUG INFO FOR wazuh-manager ===
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   wazuh-manager   Up 1 second (health: starting)    0.0.0.0:514->514/udp, [::]:514->514/udp, 1514/tcp, 0.0.0.0:1515->1515/tcp, [::]:1515->1515/tcp, 0.0.0.0:1514->1514/udp, [::]:1514->1514/udp, 1516/tcp, 0.0.0.0:55000->55000/tcp, [::]:55000->55000/tcp
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: find: '/var/ossec/data_tmp/permanent/var/ossec/var/multigroups/': No such file or directory
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: The path /var/ossec/var/multigroups is empty, skiped
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: /var/ossec/data_tmp/permanent/var/ossec/integrations/
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: The path /var/ossec/integrations is already mounted
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: /var/ossec/data_tmp/permanent/var/ossec/active-response/bin/
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: The path /var/ossec/active-response/bin is already mounted
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: /var/ossec/data_tmp/permanent/var/ossec/wodles/
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: The path /var/ossec/wodles is already mounted
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: /var/ossec/data_tmp/permanent/etc/filebeat/
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m   LOG: The path /etc/filebeat is already mounted
[0;34m[2025-09-06 03:04:55] [BTPI] [DEBUG][0m === END DEBUG INFO FOR wazuh-manager ===
[0;31m[2025-09-06 03:04:55] [BTPI] [ERROR][0m Wazuh Manager did not become ready in time
[0;31m[2025-09-06 03:04:55] [wazuh-manager] [ERROR][0m Failed to deploy wazuh-manager using modern script
[0;32m[2025-09-06 03:04:55] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-06 03:04:55] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-06 03:04:55] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;34m[2025-09-06 03:04:55] [velociraptor] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/velociraptor/deploy.sh
[0;32m[2025-09-06 03:04:55] [velociraptor] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 03:04:55] [velociraptor] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 03:04:55] [velociraptor] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 03:04:55] [velociraptor] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 03:04:55] [velociraptor] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 03:04:55] [velociraptor] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 03:04:55] [VELOCIRAPTOR] [INFO][0m Starting Velociraptor deployment...
[0;32m[2025-09-06 03:04:55] [VELOCIRAPTOR] [INFO][0m Creating Velociraptor Docker Compose configuration...
[0;36m[2025-09-06 03:04:55] [VELOCIRAPTOR] [SUCCESS][0m Docker Compose configuration created
[0;32m[2025-09-06 03:04:55] [VELOCIRAPTOR] [INFO][0m Deploying Velociraptor using Docker Compose...
[0;32m[2025-09-06 03:04:55] [VELOCIRAPTOR] [INFO][0m Pulling Velociraptor Docker image...
[0;32m[2025-09-06 03:04:56] [VELOCIRAPTOR] [INFO][0m Starting Velociraptor container...
[0;36m[2025-09-06 03:04:58] [VELOCIRAPTOR] [SUCCESS][0m Velociraptor container deployed
[0;32m[2025-09-06 03:04:58] [VELOCIRAPTOR] [INFO][0m Waiting for Velociraptor to be ready...
[0;31m[2025-09-06 03:05:03] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-06 03:05:03] [thehive] [INFO][0m === Deploying thehive ===
[0;32m[2025-09-06 03:05:03] [thehive] [INFO][0m Using modern deployment script for thehive
[0;32m[2025-09-06 03:05:03] [thehive] [INFO][0m Deploying service: thehive
[0;34m[2025-09-06 03:05:03] [thehive] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/thehive/deploy.sh
[0;32m[2025-09-06 03:05:03] [thehive] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 03:05:03] [thehive] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 03:05:03] [thehive] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 03:05:03] [thehive] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 03:05:03] [thehive] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 03:05:03] [thehive] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 03:05:03] [BTPI] [INFO][0m Starting TheHive deployment...
[0;32m[2025-09-06 03:05:03] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-06 03:05:03] [BTPI] [INFO][0m Checking Elasticsearch...
[0;36m[2025-09-06 03:05:03] [BTPI] [SUCCESS][0m Elasticsearch is ready
[0;32m[2025-09-06 03:05:03] [BTPI] [INFO][0m Checking Cassandra...
[0;36m[2025-09-06 03:05:04] [BTPI] [SUCCESS][0m Cassandra is ready
[0;36m[2025-09-06 03:05:04] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-06 03:05:04] [BTPI] [INFO][0m Initializing Cassandra keyspace for TheHive...
[0;36m[2025-09-06 03:05:05] [BTPI] [SUCCESS][0m Cassandra keyspace initialized
[0;32m[2025-09-06 03:05:05] [BTPI] [INFO][0m Creating TheHive configuration...
[0;36m[2025-09-06 03:05:05] [BTPI] [SUCCESS][0m TheHive configuration created
[0;32m[2025-09-06 03:05:05] [BTPI] [INFO][0m Deploying TheHive container...
[0;32m[2025-09-06 03:05:05] [THEHIVE] [INFO][0m Creating TheHive container...
[0;32m[2025-09-06 03:05:07] [BTPI] [INFO][0m TheHive container deployed
[0;32m[2025-09-06 03:05:07] [BTPI] [INFO][0m Configuring TheHive post-deployment...
[0;32m[2025-09-06 03:05:07] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 1/60)
[0;32m[2025-09-06 03:05:12] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 2/60)
[0;32m[2025-09-06 03:05:17] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 3/60)
[0;32m[2025-09-06 03:05:22] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 4/60)
[0;32m[2025-09-06 03:05:27] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 5/60)
[0;32m[2025-09-06 03:05:32] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 6/60)
[0;32m[2025-09-06 03:05:37] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 7/60)
[0;32m[2025-09-06 03:05:42] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 8/60)
[0;32m[2025-09-06 03:05:47] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 9/60)
[0;32m[2025-09-06 03:05:52] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 10/60)
[0;32m[2025-09-06 03:05:57] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 11/60)
[0;32m[2025-09-06 03:06:02] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 12/60)
[0;32m[2025-09-06 03:06:07] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 13/60)
[0;32m[2025-09-06 03:06:12] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 14/60)
[0;32m[2025-09-06 03:06:17] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 15/60)
[0;32m[2025-09-06 03:06:22] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 16/60)
[0;32m[2025-09-06 03:06:28] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 17/60)
[0;32m[2025-09-06 03:06:33] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 18/60)
[0;32m[2025-09-06 03:06:38] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 19/60)
[0;32m[2025-09-06 03:06:43] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 20/60)
[0;32m[2025-09-06 03:06:48] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 21/60)
[0;32m[2025-09-06 03:06:53] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 22/60)
[0;32m[2025-09-06 03:06:58] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 23/60)
[0;32m[2025-09-06 03:07:03] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 24/60)
[0;32m[2025-09-06 03:07:08] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 25/60)
[0;32m[2025-09-06 03:07:13] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 26/60)
[0;32m[2025-09-06 03:07:18] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 27/60)
[0;32m[2025-09-06 03:07:23] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 28/60)
[0;32m[2025-09-06 03:07:28] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 29/60)
[0;32m[2025-09-06 03:07:33] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 30/60)
[0;32m[2025-09-06 03:07:38] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 31/60)
[0;32m[2025-09-06 03:07:43] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 32/60)
[0;32m[2025-09-06 03:07:48] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 33/60)
[0;32m[2025-09-06 03:07:53] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 34/60)
[0;32m[2025-09-06 03:07:58] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 35/60)
[0;32m[2025-09-06 03:08:03] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 36/60)
[0;32m[2025-09-06 03:08:08] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 37/60)
[0;32m[2025-09-06 03:08:13] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 38/60)
[0;32m[2025-09-06 03:08:18] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 39/60)
[0;32m[2025-09-06 03:08:23] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 40/60)
[0;32m[2025-09-06 03:08:28] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 41/60)
[0;32m[2025-09-06 03:08:33] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 42/60)
[0;32m[2025-09-06 03:08:38] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 43/60)
[0;32m[2025-09-06 03:08:43] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 44/60)
[0;32m[2025-09-06 03:08:48] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 45/60)
[0;32m[2025-09-06 03:08:53] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 46/60)
[0;32m[2025-09-06 03:08:58] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 47/60)
[0;32m[2025-09-06 03:09:03] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 48/60)
[0;32m[2025-09-06 03:09:08] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 49/60)
[0;32m[2025-09-06 03:09:13] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 50/60)
[0;32m[2025-09-06 03:09:18] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 51/60)
[0;32m[2025-09-06 03:09:23] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 52/60)
[0;32m[2025-09-06 03:09:28] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 53/60)
[0;32m[2025-09-06 03:09:33] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 54/60)
[0;32m[2025-09-06 03:09:38] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 55/60)
[0;32m[2025-09-06 03:09:43] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 56/60)
[0;32m[2025-09-06 03:09:48] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 57/60)
[0;32m[2025-09-06 03:09:53] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 58/60)
[0;32m[2025-09-06 03:09:58] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 59/60)
[0;32m[2025-09-06 03:10:03] [BTPI] [INFO][0m Waiting for TheHive to start... (attempt 60/60)
[0;31m[2025-09-06 03:10:08] [BTPI] [ERROR][0m TheHive did not become ready in time
[0;31m[2025-09-06 03:10:08] [thehive] [ERROR][0m Failed to deploy thehive using modern script
[0;32m[2025-09-06 03:10:08] [cortex] [INFO][0m === Deploying cortex ===
[0;32m[2025-09-06 03:10:08] [cortex] [INFO][0m Using modern deployment script for cortex
[0;32m[2025-09-06 03:10:08] [cortex] [INFO][0m Deploying service: cortex
[0;34m[2025-09-06 03:10:08] [cortex] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cortex/deploy.sh
[0;32m[2025-09-06 03:10:08] [cortex] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 03:10:08] [cortex] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 03:10:08] [cortex] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 03:10:08] [cortex] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 03:10:08] [cortex] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 03:10:08] [cortex] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 03:10:08] [BTPI] [INFO][0m Starting Cortex deployment...
[0;32m[2025-09-06 03:10:08] [BTPI] [INFO][0m Waiting for infrastructure services...
[0;32m[2025-09-06 03:10:08] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;36m[2025-09-06 03:10:08] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 03:10:08] [BTPI] [INFO][0m Waiting for cassandra to be ready (max 120s)...
[0;36m[2025-09-06 03:10:09] [BTPI] [SUCCESS][0m cassandra is ready and healthy
[0;36m[2025-09-06 03:10:09] [BTPI] [SUCCESS][0m Infrastructure services are ready
[0;32m[2025-09-06 03:10:09] [BTPI] [INFO][0m Creating Cortex configuration...
[0;36m[2025-09-06 03:10:09] [BTPI] [SUCCESS][0m Cortex configuration created
[0;32m[2025-09-06 03:10:09] [BTPI] [INFO][0m Deploying analyzer configurations...
[0;36m[2025-09-06 03:10:09] [BTPI] [SUCCESS][0m Analyzer configurations deployed
[0;32m[2025-09-06 03:10:09] [BTPI] [INFO][0m Deploying responder configurations...
[0;36m[2025-09-06 03:10:09] [BTPI] [SUCCESS][0m Responder configurations deployed
[0;32m[2025-09-06 03:10:09] [BTPI] [INFO][0m Deploying Cortex container...
[0;32m[2025-09-06 03:10:09] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 03:10:11] [BTPI] [INFO][0m Cortex container deployed
[0;32m[2025-09-06 03:10:11] [BTPI] [INFO][0m Configuring Cortex dependencies...
[0;32m[2025-09-06 03:10:11] [BTPI] [INFO][0m Creating Cortex keyspace in Cassandra...
[0;32m[2025-09-06 03:10:12] [BTPI] [INFO][0m Creating Cortex index in Elasticsearch...
[1;33m[2025-09-06 03:10:12] [BTPI] [WARN][0m Failed to create Cortex Elasticsearch index
[0;36m[2025-09-06 03:10:12] [BTPI] [SUCCESS][0m Dependencies configured
[0;32m[2025-09-06 03:10:12] [BTPI] [INFO][0m Configuring Cortex post-deployment...
[0;32m[2025-09-06 03:10:12] [BTPI] [INFO][0m Waiting for cortex to be ready (max 120s)...
[0;34m[2025-09-06 03:10:12] [BTPI] [DEBUG][0m cortex health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 03:10:22] [BTPI] [DEBUG][0m cortex health check attempt 2/12 failed, waiting 10s...
[0;34m[2025-09-06 03:10:32] [BTPI] [DEBUG][0m cortex health check attempt 3/12 failed, waiting 10s...
[0;34m[2025-09-06 03:10:42] [BTPI] [DEBUG][0m cortex health check attempt 4/12 failed, waiting 10s...
[0;34m[2025-09-06 03:10:52] [BTPI] [DEBUG][0m cortex health check attempt 5/12 failed, waiting 10s...
[0;34m[2025-09-06 03:11:02] [BTPI] [DEBUG][0m cortex health check attempt 6/12 failed, waiting 10s...
[0;34m[2025-09-06 03:11:12] [BTPI] [DEBUG][0m cortex health check attempt 7/12 failed, waiting 10s...
[0;34m[2025-09-06 03:11:22] [BTPI] [DEBUG][0m cortex health check attempt 8/12 failed, waiting 10s...
[0;34m[2025-09-06 03:11:32] [BTPI] [DEBUG][0m cortex health check attempt 9/12 failed, waiting 10s...
[0;34m[2025-09-06 03:11:42] [BTPI] [DEBUG][0m cortex health check attempt 10/12 failed, waiting 10s...
[0;34m[2025-09-06 03:11:53] [BTPI] [DEBUG][0m cortex health check attempt 11/12 failed, waiting 10s...
[0;34m[2025-09-06 03:12:03] [BTPI] [DEBUG][0m cortex health check attempt 12/12 failed, waiting 10s...
[0;31m[2025-09-06 03:12:13] [BTPI] [ERROR][0m cortex failed to become ready within 120s
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m === DEBUG INFO FOR cortex ===
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m Container status:
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   cortex          Restarting (1) 50 seconds ago
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.impl.SimpleIncluder.fromBasename(SimpleIncluder.java:172)
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.impl.ConfigImpl.parseFileAnySyntax(ConfigImpl.java:138)
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.ConfigFactory.parseFileAnySyntax(ConfigFactory.java:845)
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: at com.typesafe.config.ConfigFactory.parseFileAnySyntax(ConfigFactory.java:857)
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.$anonfun$load$5(Configuration.scala:68)
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: at scala.Option.map(Option.scala:230)
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.$anonfun$load$4(Configuration.scala:68)
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: at scala.Option.orElse(Option.scala:447)
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: at play.api.Configuration$.load(Configuration.scala:68)
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m   LOG: ... 4 more
[0;34m[2025-09-06 03:12:13] [BTPI] [DEBUG][0m === END DEBUG INFO FOR cortex ===
[0;31m[2025-09-06 03:12:13] [BTPI] [ERROR][0m Cortex did not become ready in time
[0;31m[2025-09-06 03:12:13] [cortex] [ERROR][0m Failed to deploy cortex using modern script
[0;32m[2025-09-06 03:12:13] [nginx] [INFO][0m === Deploying nginx ===
[0;32m[2025-09-06 03:12:13] [nginx] [INFO][0m Using legacy deployment for nginx
[0;31m[2025-09-06 03:12:13] [nginx] [ERROR][0m No deployment method available for nginx
[0;32m[2025-09-06 09:48:55] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-06 09:48:55] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-06 09:48:55] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-06 09:48:56] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250906_094855.tar.gz
[0;32m[2025-09-06 09:48:56] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-06 09:48:56] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-06 09:48:56] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-06 09:48:56] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-06 09:48:56] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-06 09:48:56] [BTPI] [INFO][0m   Available Disk: 181GB
[0;36m[2025-09-06 09:48:56] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-06 09:48:56] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-06 09:48:57] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-06 09:48:57] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-06 09:48:57] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-06 09:49:10] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-06 09:49:10] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-06 09:49:10] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-06 09:49:10] [unified-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:49:10] [unified-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:49:10] [unified-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:49:10] [unified-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:49:10] [unified-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:49:10] [unified-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-06 09:49:10] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-06 09:49:10] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx kasm portainer 
[0;32m[2025-09-06 09:49:10] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-06 09:49:10] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-06 09:49:10] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-06 09:49:10] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-06 09:49:11] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:49:11] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:49:11] [elasticsearch] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:49:11] [elasticsearch] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:49:11] [elasticsearch] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:49:11] [elasticsearch] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 09:49:11] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-06 09:49:11] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-06 09:49:11] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-06 09:49:11] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-06 09:49:11] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 09:49:14] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-06 09:49:14] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-06 09:49:14] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;34m[2025-09-06 09:49:14] [BTPI] [DEBUG][0m elasticsearch health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 09:49:24] [BTPI] [DEBUG][0m elasticsearch health check attempt 2/12 failed, waiting 10s...
[0;36m[2025-09-06 09:49:34] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 09:49:34] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 09:49:34] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 09:49:34] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 09:49:34] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 09:49:35] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-06 09:49:35] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-06 09:49:35] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-06 09:49:35] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 09:49:35] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-06 09:49:36] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-06 09:49:38] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-06 09:49:38] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-06 09:49:38] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-06 09:49:38] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-06 09:49:38] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-06 09:49:38] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-06 09:49:38] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:49:38] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:49:38] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:49:38] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:49:38] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:49:38] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-06 09:49:38] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 09:49:40] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-06 09:49:40] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-06 09:49:41] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-06 09:49:41] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 09:49:52] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-06 09:49:52] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 09:50:03] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-06 09:50:03] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-06 09:50:04] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-06 09:50:05] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-06 09:50:06] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-06 09:50:06] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-06 09:50:06] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-06 09:50:06] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-06 09:50:06] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;31m[2025-09-06 09:50:13] [BTPI] [ERROR][0m Cassandra read/write test failed
[0;31m[2025-09-06 09:50:13] [BTPI] [ERROR][0m Cassandra deployment completed with errors
[0;31m[2025-09-06 09:50:13] [BTPI] [ERROR][0m Script failed at line 321 with exit code 1
[0;31m[2025-09-06 09:50:13] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-06 09:50:13] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-06 09:50:13] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-06 09:50:13] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-06 09:50:13] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;34m[2025-09-06 09:50:13] [wazuh-indexer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-indexer/deploy.sh
[0;32m[2025-09-06 09:50:13] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-06 09:50:13] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:50:13] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:50:13] [wazuh-indexer] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:50:13] [wazuh-indexer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:50:13] [wazuh-indexer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:50:13] [wazuh-indexer] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 09:50:13] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-06 09:50:13] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-06 09:50:13] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-06 09:50:14] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-06 09:50:14] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-06 09:50:14] [BTPI] [INFO][0m Creating container...
[0;31m[2025-09-06 09:50:15] [wazuh-indexer] [ERROR][0m Failed to deploy wazuh-indexer using modern script
[0;32m[2025-09-06 09:50:15] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-06 09:50:15] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[1;33m[2025-09-06 09:50:15] [BTPI] [WARN][0m Service wazuh-manager has unmet dependencies: wazuh-indexer 
[1;33m[2025-09-06 09:50:15] [wazuh-manager] [WARN][0m Deploying wazuh-manager despite missing dependencies
[0;32m[2025-09-06 09:50:15] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;34m[2025-09-06 09:50:15] [wazuh-manager] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-manager/deploy.sh
[0;32m[2025-09-06 09:50:15] [wazuh-manager] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:50:15] [wazuh-manager] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:50:15] [wazuh-manager] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:50:15] [wazuh-manager] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:50:15] [wazuh-manager] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:50:15] [wazuh-manager] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 09:50:15] [BTPI] [INFO][0m Starting Wazuh Manager deployment...
[0;32m[2025-09-06 09:50:15] [BTPI] [INFO][0m Waiting for Wazuh Indexer to be ready...
[0;32m[2025-09-06 09:50:15] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 120s)...
[0;34m[2025-09-06 09:50:15] [BTPI] [DEBUG][0m wazuh-indexer container is not running
[0;34m[2025-09-06 09:50:15] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 1/12 failed, waiting 10s...
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m Starting BTPI-REACT unified deployment v2.0.0
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-06 09:57:58] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250906_095758.tar.gz
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m   Available Disk: 181GB
[0;36m[2025-09-06 09:57:58] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-06 09:57:58] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-09-06 09:57:58] [BTPI] [DEBUG][0m Validating existing cassandra service on port 9042...
[0;34m[2025-09-06 09:57:59] [BTPI] [DEBUG][0m cassandra is running and healthy - port conflict resolved
[0;32m[2025-09-06 09:57:59] [BTPI] [INFO][0m Port 9042 is in use by healthy cassandra - conflict resolved automatically
[0;34m[2025-09-06 09:58:00] [BTPI] [DEBUG][0m Validating existing elasticsearch service on port 9200...
[0;34m[2025-09-06 09:58:00] [BTPI] [DEBUG][0m elasticsearch is running and healthy - port conflict resolved
[0;32m[2025-09-06 09:58:00] [BTPI] [INFO][0m Port 9200 is in use by healthy elasticsearch - conflict resolved automatically
[0;36m[2025-09-06 09:58:00] [BTPI] [SUCCESS][0m Resolved 2 port conflicts automatically
[0;36m[2025-09-06 09:58:00] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-06 09:58:00] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-06 09:58:05] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-06 09:58:05] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-06 09:58:05] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-06 09:58:05] [unified-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:58:05] [unified-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:58:05] [unified-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:58:05] [unified-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:58:05] [unified-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:58:05] [unified-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-06 09:58:05] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx kasm portainer 
[0;32m[2025-09-06 09:58:05] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-06 09:58:05] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-06 09:58:05] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-06 09:58:05] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-06 09:58:05] [elasticsearch] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:58:05] [elasticsearch] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:58:05] [elasticsearch] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:58:05] [elasticsearch] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:58:05] [elasticsearch] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:58:05] [elasticsearch] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Starting Elasticsearch deployment...
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Creating Elasticsearch configuration...
[0;36m[2025-09-06 09:58:05] [BTPI] [SUCCESS][0m Elasticsearch configuration created
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Deploying Elasticsearch container...
[0;32m[2025-09-06 09:58:05] [BTPI] [INFO][0m Removing existing Elasticsearch container...
[0;32m[2025-09-06 09:58:11] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 09:58:12] [BTPI] [INFO][0m Elasticsearch container deployed
[0;32m[2025-09-06 09:58:12] [BTPI] [INFO][0m Configuring Elasticsearch indices and templates...
[0;32m[2025-09-06 09:58:12] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 120s)...
[0;34m[2025-09-06 09:58:12] [BTPI] [DEBUG][0m elasticsearch health check attempt 1/12 failed, waiting 10s...
[0;34m[2025-09-06 09:58:22] [BTPI] [DEBUG][0m elasticsearch health check attempt 2/12 failed, waiting 10s...
[0;36m[2025-09-06 09:58:32] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-06 09:58:32] [BTPI] [INFO][0m Creating index template: cortex-template
[0;32m[2025-09-06 09:58:32] [BTPI] [INFO][0m Creating index template: thehive-template
[0;32m[2025-09-06 09:58:32] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-06 09:58:32] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-06 09:58:32] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;36m[2025-09-06 09:58:32] [BTPI] [SUCCESS][0m Elasticsearch indices and templates configured
[0;32m[2025-09-06 09:58:32] [BTPI] [INFO][0m Creating Elasticsearch management scripts...
[0;32m[2025-09-06 09:58:32] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-06 09:58:32] [BTPI] [INFO][0m Testing Elasticsearch functionality...
[0;32m[2025-09-06 09:58:34] [BTPI] [INFO][0m Index creation test passed
[0;32m[2025-09-06 09:58:35] [BTPI] [INFO][0m Document indexing test passed
[0;32m[2025-09-06 09:58:35] [BTPI] [INFO][0m All Elasticsearch tests passed
[0;32m[2025-09-06 09:58:35] [BTPI] [INFO][0m Elasticsearch deployment completed successfully
[0;32m[2025-09-06 09:58:35] [BTPI] [INFO][0m Elasticsearch is accessible at: http://192.168.1.184:9200
[0;32m[2025-09-06 09:58:35] [BTPI] [INFO][0m Network: btpi-core-network (isolated)
[0;32m[2025-09-06 09:58:35] [BTPI] [INFO][0m Cluster name: btpi-cluster
[0;32m[2025-09-06 09:58:35] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/elasticsearch/scripts/
[0;32m[2025-09-06 09:58:35] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-06 09:58:36] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;36m[2025-09-06 09:58:36] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-06 09:58:36] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-06 09:58:36] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-06 09:58:36] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-06 09:58:36] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-06 09:58:36] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:58:36] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:58:36] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:58:36] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:58:36] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:58:36] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 09:58:36] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-06 09:58:36] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-06 09:58:36] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-06 09:58:36] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-06 09:58:36] [BTPI] [INFO][0m Removing existing Cassandra container...
[0;32m[2025-09-06 09:58:44] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-06 09:58:45] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-06 09:58:45] [BTPI] [INFO][0m Initializing Cassandra keyspaces...
[0;32m[2025-09-06 09:58:46] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 1/60)
[0;32m[2025-09-06 09:58:46] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 09:58:57] [BTPI] [INFO][0m Waiting for Cassandra to be ready... (attempt 2/60)
[0;32m[2025-09-06 09:58:57] [BTPI] [INFO][0m Container status: running, health: starting
[0;32m[2025-09-06 09:59:07] [BTPI] [INFO][0m Cassandra is ready for keyspace initialization (attempt 3/60)
[0;32m[2025-09-06 09:59:07] [BTPI] [INFO][0m Executing initialization script: 01-thehive-keyspace.cql
[0;32m[2025-09-06 09:59:08] [BTPI] [INFO][0m Executing initialization script: 02-cortex-keyspace.cql
[0;32m[2025-09-06 09:59:10] [BTPI] [INFO][0m TheHive keyspace created successfully
[0;32m[2025-09-06 09:59:10] [BTPI] [INFO][0m Cortex keyspace created successfully
[0;32m[2025-09-06 09:59:10] [BTPI] [INFO][0m Cassandra keyspaces initialized successfully
[0;32m[2025-09-06 09:59:10] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-06 09:59:10] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-06 09:59:10] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;31m[2025-09-06 09:59:16] [BTPI] [ERROR][0m Cassandra read/write test failed
[0;31m[2025-09-06 09:59:16] [BTPI] [ERROR][0m Cassandra deployment completed with errors
[0;31m[2025-09-06 09:59:16] [BTPI] [ERROR][0m Script failed at line 321 with exit code 1
[0;31m[2025-09-06 09:59:16] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-06 09:59:16] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-06 09:59:16] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-06 09:59:16] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-06 09:59:16] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;34m[2025-09-06 09:59:16] [wazuh-indexer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-indexer/deploy.sh
[0;32m[2025-09-06 09:59:16] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-06 09:59:16] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:59:16] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:59:16] [wazuh-indexer] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:59:16] [wazuh-indexer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:59:16] [wazuh-indexer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:59:16] [wazuh-indexer] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 09:59:16] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-06 09:59:16] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-06 09:59:16] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-06 09:59:16] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-06 09:59:16] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-06 09:59:16] [BTPI] [INFO][0m Removing existing Wazuh Indexer container...
[0;32m[2025-09-06 09:59:16] [BTPI] [INFO][0m Creating container...
[0;31m[2025-09-06 09:59:16] [wazuh-indexer] [ERROR][0m Failed to deploy wazuh-indexer using modern script
[0;32m[2025-09-06 09:59:16] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-06 09:59:17] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[1;33m[2025-09-06 09:59:17] [BTPI] [WARN][0m Service wazuh-manager has unmet dependencies: wazuh-indexer 
[1;33m[2025-09-06 09:59:17] [wazuh-manager] [WARN][0m Deploying wazuh-manager despite missing dependencies
[0;32m[2025-09-06 09:59:17] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;34m[2025-09-06 09:59:17] [wazuh-manager] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-manager/deploy.sh
[0;32m[2025-09-06 09:59:17] [wazuh-manager] [INFO][0m Validating environment configuration...
[0;36m[2025-09-06 09:59:17] [wazuh-manager] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-06 09:59:17] [wazuh-manager] [DEBUG][0m Current environment values:
[0;34m[2025-09-06 09:59:17] [wazuh-manager] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-06 09:59:17] [wazuh-manager] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-06 09:59:17] [wazuh-manager] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-06 09:59:17] [BTPI] [INFO][0m Starting Wazuh Manager deployment...
[0;32m[2025-09-06 09:59:17] [BTPI] [INFO][0m Waiting for Wazuh Indexer to be ready...
[0;32m[2025-09-06 09:59:17] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 120s)...
[0;34m[2025-09-06 09:59:17] [BTPI] [DEBUG][0m wazuh-indexer container is not running
[0;34m[2025-09-06 09:59:17] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 1/12 failed, waiting 10s...
[0;32m[2025-09-12 01:22:24] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 01:22:24] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 01:22:24] [BTPI] [INFO][0m Deployment ID: c8d96f6d-22e0-4674-9362-db8ef71f93b4
[0;32m[2025-09-12 01:22:25] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 01:22:30] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_012225.tar.gz
[0;32m[2025-09-12 01:22:30] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 01:22:30] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 01:22:30] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 01:22:30] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 01:22:30] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 01:22:30] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 01:22:30] [BTPI] [INFO][0m   Available Disk: 181GB
[0;36m[2025-09-12 01:22:38] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 01:22:38] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-09-12 01:22:38] [BTPI] [DEBUG][0m Validating existing cassandra service on port 9042...
[0;34m[2025-09-12 01:22:39] [BTPI] [DEBUG][0m cassandra is running and healthy - port conflict resolved
[0;32m[2025-09-12 01:22:39] [BTPI] [INFO][0m Port 9042 is in use by healthy cassandra - conflict resolved automatically
[0;34m[2025-09-12 01:22:40] [BTPI] [DEBUG][0m Validating existing elasticsearch service on port 9200...
[0;34m[2025-09-12 01:22:40] [BTPI] [DEBUG][0m elasticsearch is running and healthy - port conflict resolved
[0;32m[2025-09-12 01:22:40] [BTPI] [INFO][0m Port 9200 is in use by healthy elasticsearch - conflict resolved automatically
[0;36m[2025-09-12 01:22:41] [BTPI] [SUCCESS][0m Resolved 2 port conflicts automatically
[0;36m[2025-09-12 01:22:41] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 01:22:41] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 01:23:06] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 01:23:06] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 01:23:06] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 01:23:06] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 01:23:06] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 01:23:06] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 01:23:06] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 01:23:06] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 01:23:06] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 01:23:06] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx kasm portainer 
[0;32m[2025-09-12 01:23:06] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 01:23:06] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 01:23:06] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-12 01:23:06] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;31m[2025-09-12 01:23:06] [BTPI] [ERROR][0m Environment file not found. Run the main deployment script first.
[0;31m[2025-09-12 01:23:06] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-12 01:23:06] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-12 01:23:06] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-12 01:23:06] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-12 01:23:06] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-12 01:23:06] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 01:23:06] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 01:23:06] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 01:23:06] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 01:23:06] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 01:23:06] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-12 01:23:06] [BTPI] [INFO][0m Removing existing Cassandra container...
[0;32m[2025-09-12 01:23:18] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-12 01:23:21] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-12 01:23:21] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-12 01:23:21] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-12 01:23:21] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;34m[2025-09-12 01:23:23] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 1/30)
[0;34m[2025-09-12 01:23:33] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 2/30)
[0;34m[2025-09-12 01:23:44] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 3/30)
[0;34m[2025-09-12 01:23:54] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 4/30)
[0;34m[2025-09-12 01:24:06] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 5/30)
[0;34m[2025-09-12 01:24:17] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 6/30)
[0;34m[2025-09-12 01:24:27] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 7/30)
[0;34m[2025-09-12 01:24:37] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 8/30)
[0;34m[2025-09-12 01:24:47] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 9/30)
[0;34m[2025-09-12 01:24:57] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 10/30)
[0;34m[2025-09-12 01:25:07] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 11/30)
[0;34m[2025-09-12 01:25:17] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 12/30)
[0;34m[2025-09-12 01:25:28] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 13/30)
[0;34m[2025-09-12 01:25:38] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 14/30)
[0;34m[2025-09-12 01:25:48] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 15/30)
[0;34m[2025-09-12 01:25:58] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 16/30)
[0;34m[2025-09-12 01:26:08] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 17/30)
[0;34m[2025-09-12 01:26:18] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 18/30)
[0;34m[2025-09-12 01:26:29] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 19/30)
[0;34m[2025-09-12 01:26:39] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 20/30)
[0;34m[2025-09-12 01:26:49] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 21/30)
[0;34m[2025-09-12 01:26:59] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 22/30)
[0;34m[2025-09-12 01:27:09] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 23/30)
[0;34m[2025-09-12 01:27:19] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 24/30)
[0;34m[2025-09-12 01:27:29] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 25/30)
[0;34m[2025-09-12 01:27:40] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 26/30)
[0;34m[2025-09-12 01:27:50] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 27/30)
[0;34m[2025-09-12 01:28:00] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 28/30)
[0;34m[2025-09-12 01:28:10] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 29/30)
[0;34m[2025-09-12 01:28:20] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 30/30)
[0;31m[2025-09-12 01:28:30] [BTPI] [ERROR][0m Cassandra connectivity test failed
[0;31m[2025-09-12 01:28:30] [BTPI] [ERROR][0m Cassandra deployment completed with errors
[0;31m[2025-09-12 01:28:30] [BTPI] [ERROR][0m Script failed at line 205 with exit code 1
[0;31m[2025-09-12 01:28:30] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-12 01:28:30] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-12 01:28:30] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-12 01:28:30] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;34m[2025-09-12 01:28:30] [BTPI] [DEBUG][0m Performing health check for elasticsearch...
[0;36m[2025-09-12 01:28:30] [BTPI] [SUCCESS][0m elasticsearch is ready and healthy
[0;32m[2025-09-12 01:28:30] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-12 01:28:30] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;34m[2025-09-12 01:28:30] [wazuh-indexer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-indexer/deploy.sh
[0;32m[2025-09-12 01:28:30] [BTPI] [INFO][0m Starting Wazuh Indexer deployment...
[0;32m[2025-09-12 01:28:30] [wazuh-indexer] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 01:28:30] [wazuh-indexer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 01:28:30] [wazuh-indexer] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 01:28:30] [wazuh-indexer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 01:28:30] [wazuh-indexer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 01:28:30] [wazuh-indexer] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 01:28:30] [BTPI] [INFO][0m Creating Wazuh Indexer configuration...
[0;36m[2025-09-12 01:28:30] [BTPI] [SUCCESS][0m Wazuh Indexer configuration created
[0;32m[2025-09-12 01:28:30] [BTPI] [INFO][0m Creating Wazuh index templates...
[0;36m[2025-09-12 01:28:30] [BTPI] [SUCCESS][0m Wazuh index templates created
[0;32m[2025-09-12 01:28:30] [BTPI] [INFO][0m Deploying Wazuh Indexer container...
[0;32m[2025-09-12 01:28:30] [BTPI] [INFO][0m Removing existing Wazuh Indexer container...
[0;32m[2025-09-12 01:28:30] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-12 01:28:32] [BTPI] [INFO][0m Wazuh Indexer container deployed
[0;32m[2025-09-12 01:28:32] [BTPI] [INFO][0m Configuring Wazuh Indexer indices and templates...
[0;32m[2025-09-12 01:28:32] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 180s)...
[0;34m[2025-09-12 01:28:33] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 1/18 failed, waiting 10s...
[0;34m[2025-09-12 01:28:43] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 2/18 failed, waiting 10s...
[0;34m[2025-09-12 01:28:53] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 3/18 failed, waiting 10s...
[0;34m[2025-09-12 01:29:03] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 4/18 failed, waiting 10s...
[0;34m[2025-09-12 01:29:13] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 5/18 failed, waiting 10s...
[0;34m[2025-09-12 01:29:23] [BTPI] [DEBUG][0m wazuh-indexer health check attempt 6/18 failed, waiting 10s...
[0;36m[2025-09-12 01:29:33] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Using HTTPS endpoint for Wazuh Indexer
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Creating index template: wazuh-alerts
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Creating index template: wazuh-monitoring
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Creating index template: wazuh-statistics
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Creating index: wazuh-alerts-2025.09
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Creating index: wazuh-monitoring-2025.09
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Creating index: wazuh-statistics-2025.09
[0;36m[2025-09-12 01:29:33] [BTPI] [SUCCESS][0m Wazuh Indexer indices and templates configured
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Creating Wazuh Indexer management scripts...
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Management scripts created
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Testing Wazuh Indexer functionality...
[0;34m[2025-09-12 01:29:33] [BTPI] [DEBUG][0m Wazuh Indexer is running but security plugin not initialized (this is expected)
[0;32m[2025-09-12 01:29:33] [BTPI] [INFO][0m Enhanced health check passed
[0;32m[2025-09-12 01:29:34] [BTPI] [INFO][0m Index creation test skipped (service functional but may need security initialization)
[0;32m[2025-09-12 01:29:34] [BTPI] [INFO][0m All Wazuh Indexer tests passed
[0;32m[2025-09-12 01:29:34] [BTPI] [INFO][0m Wazuh Indexer deployment completed successfully
[0;32m[2025-09-12 01:29:34] [BTPI] [INFO][0m Wazuh Indexer is accessible at: http://192.168.1.184:9300
[0;32m[2025-09-12 01:29:34] [BTPI] [INFO][0m Network: btpi-wazuh-network (isolated)
[0;32m[2025-09-12 01:29:34] [BTPI] [INFO][0m Cluster name: wazuh-cluster
[0;32m[2025-09-12 01:29:34] [BTPI] [INFO][0m Management scripts: /home/cmndcntrl/code/btpi-react/../../data/wazuh-indexer/scripts/
[0;32m[2025-09-12 01:29:34] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 300s)...
[0;34m[2025-09-12 01:31:24] [BTPI] [DEBUG][0m Performing health check for wazuh-indexer...
[0;36m[2025-09-12 01:31:29] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;36m[2025-09-12 01:31:29] [wazuh-indexer] [SUCCESS][0m Service wazuh-indexer deployment completed
[0;32m[2025-09-12 01:31:29] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-12 01:31:29] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 60s)...
[0;34m[2025-09-12 01:33:20] [BTPI] [DEBUG][0m Performing health check for wazuh-indexer...
[0;36m[2025-09-12 01:33:25] [BTPI] [SUCCESS][0m wazuh-indexer is ready and healthy
[0;32m[2025-09-12 01:33:25] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[0;32m[2025-09-12 01:33:25] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;34m[2025-09-12 01:33:25] [wazuh-manager] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/wazuh-manager/deploy.sh
[0;31m[2025-09-12 01:33:25] [BTPI] [ERROR][0m Environment file not found. Run the main deployment script first.
[0;31m[2025-09-12 01:33:25] [wazuh-manager] [ERROR][0m Failed to deploy wazuh-manager using modern script
[0;32m[2025-09-12 01:33:25] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-12 01:33:25] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-12 01:33:25] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;34m[2025-09-12 01:33:25] [velociraptor] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/velociraptor/deploy.sh
[0;31m[2025-09-12 01:33:25] [BTPI] [ERROR][0m Environment file not found. Run the main deployment script first.
[0;31m[2025-09-12 01:33:25] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-12 01:33:25] [nginx] [INFO][0m === Deploying nginx ===
[0;32m[2025-09-12 01:33:25] [BTPI] [INFO][0m Waiting for wazuh-manager to be ready (max 60s)...
[0;31m[2025-09-12 01:34:25] [BTPI] [ERROR][0m wazuh-manager container is not running or doesn't exist
[0;31m[2025-09-12 01:34:25] [BTPI] [ERROR][0m Dependency wazuh-manager not ready for nginx
[0;32m[2025-09-12 01:34:25] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 01:34:25] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 01:34:25] [kasm] [INFO][0m Deploying service: kasm
[0;34m[2025-09-12 01:34:25] [kasm] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/kasm/deploy.sh
[0;32m[2025-09-12 01:34:25] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 01:34:25] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 01:34:25] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 01:34:25] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 01:34:25] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 01:34:26] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 01:34:26] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 01:34:26] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 01:34:26] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 01:34:35] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 01:34:35] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 01:34:35] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 01:34:35] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 01:34:37] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 01:34:48] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 01:35:03] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 01:35:03] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 01:35:03] [KASM] [INFO][0m Waiting for kasm-db...
[0;31m[2025-09-12 01:35:08] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 01:35:08] [portainer] [INFO][0m === Deploying portainer ===
[0;32m[2025-09-12 01:35:08] [portainer] [INFO][0m Using modern deployment script for portainer
[0;32m[2025-09-12 01:35:08] [portainer] [INFO][0m Deploying service: portainer
[0;34m[2025-09-12 01:35:08] [portainer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/portainer/deploy.sh
[0;32m[2025-09-12 01:35:08] [portainer] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 01:35:08] [portainer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 01:35:08] [portainer] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 01:35:08] [portainer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 01:35:08] [portainer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 01:35:08] [portainer] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 01:35:08] [PORTAINER] [INFO][0m Starting Portainer deployment...
[0;32m[2025-09-12 01:35:08] [PORTAINER] [INFO][0m Creating Portainer data directories...
[0;36m[2025-09-12 01:35:08] [PORTAINER] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 01:35:08] [PORTAINER] [INFO][0m Deploying Portainer container...
[0;32m[2025-09-12 01:35:08] [PORTAINER] [INFO][0m Starting Portainer container...
[0;32m[2025-09-12 01:35:08] [BTPI] [INFO][0m Creating container...
[0;31m[2025-09-12 01:35:13] [portainer] [ERROR][0m Failed to deploy portainer using modern script
[0;32m[2025-09-12 01:35:13] [BTPI] [INFO][0m === Beginning integration configuration phase ===
[0;32m[2025-09-12 01:35:13] [BTPI] [INFO][0m Configuring service integrations...
[0;36m[2025-09-12 01:35:13] [BTPI] [SUCCESS][0m Service integrations configured
[0;32m[2025-09-12 01:35:13] [BTPI] [INFO][0m === Beginning testing phase ===
[0;32m[2025-09-12 01:35:13] [BTPI] [INFO][0m Running deployment tests...
[0;32m[2025-09-12 01:35:13] [BTPI] [INFO][0m Running comprehensive integration tests...
[1;33m[2025-09-12 01:35:13] [BTPI] [WARN][0m Some integration tests failed
[0;32m[2025-09-12 01:35:13] [BTPI] [INFO][0m Generating deployment report...
[0;36m[2025-09-12 01:35:14] [BTPI] [SUCCESS][0m Deployment report saved to: /home/cmndcntrl/code/btpi-react/logs/deployment_report_20250721_093729.txt
[1;33m[2025-09-12 01:35:14] [BTPI] [WARN][0m BTPI-REACT deployment completed with warnings
[0;32m[2025-09-12 04:37:08] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 04:37:08] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 04:37:08] [BTPI] [INFO][0m Deployment ID: 2bb6a95d-9445-483c-9a53-f09a625e0f6d
[0;32m[2025-09-12 04:37:08] [BTPI] [INFO][0m Backing up existing deployment...
[0;32m[2025-09-12 04:39:14] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 04:39:14] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 04:39:14] [BTPI] [INFO][0m Deployment ID: 588c1999-4fae-44ab-85d0-fbb203c8b69b
[0;32m[2025-09-12 04:39:14] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 04:39:24] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_043914.tar.gz
[0;32m[2025-09-12 04:39:24] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;31m[2025-09-12 04:39:24] [BTPI] [ERROR][0m This script must be run as root or with sudo
[0;32m[2025-09-12 04:39:35] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 04:39:35] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 04:39:35] [BTPI] [INFO][0m Deployment ID: 3243bccc-ac3a-4606-9f1f-fea26bf9148b
[0;32m[2025-09-12 04:39:35] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 04:40:12] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_043935.tar.gz
[0;32m[2025-09-12 04:40:12] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 04:40:12] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 04:40:12] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 04:40:12] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 04:40:12] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 04:40:12] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 04:40:12] [BTPI] [INFO][0m   Available Disk: 177GB
[0;36m[2025-09-12 04:40:12] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 04:40:12] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-09-12 04:40:13] [BTPI] [DEBUG][0m Validating existing portainer service on port 8000...
[0;34m[2025-09-12 04:40:13] [BTPI] [DEBUG][0m portainer is running and healthy - port conflict resolved
[0;32m[2025-09-12 04:40:13] [BTPI] [INFO][0m Port 8000 is in use by healthy portainer - conflict resolved automatically
[0;34m[2025-09-12 04:40:13] [BTPI] [DEBUG][0m Validating existing portainer service on port 9443...
[0;34m[2025-09-12 04:40:14] [BTPI] [DEBUG][0m portainer is running and healthy - port conflict resolved
[0;32m[2025-09-12 04:40:14] [BTPI] [INFO][0m Port 9443 is in use by healthy portainer - conflict resolved automatically
[0;34m[2025-09-12 04:40:14] [BTPI] [DEBUG][0m Validating existing elasticsearch service on port 9200...
[0;34m[2025-09-12 04:40:14] [BTPI] [DEBUG][0m elasticsearch is running and healthy - port conflict resolved
[0;32m[2025-09-12 04:40:14] [BTPI] [INFO][0m Port 9200 is in use by healthy elasticsearch - conflict resolved automatically
[0;34m[2025-09-12 04:40:15] [BTPI] [DEBUG][0m Validating existing wazuh-indexer service on port 9201...
[0;34m[2025-09-12 04:40:15] [BTPI] [DEBUG][0m wazuh-indexer is running and healthy - port conflict resolved
[0;32m[2025-09-12 04:40:15] [BTPI] [INFO][0m Port 9201 is in use by healthy wazuh-indexer - conflict resolved automatically
[0;34m[2025-09-12 04:40:15] [BTPI] [DEBUG][0m Validating existing wazuh-indexer service on port 9600...
[0;34m[2025-09-12 04:40:15] [BTPI] [DEBUG][0m wazuh-indexer is running and healthy - port conflict resolved
[0;32m[2025-09-12 04:40:15] [BTPI] [INFO][0m Port 9600 is in use by healthy wazuh-indexer - conflict resolved automatically
[0;34m[2025-09-12 04:40:15] [BTPI] [DEBUG][0m Validating existing velociraptor service on port 8000...
[0;34m[2025-09-12 04:40:15] [BTPI] [DEBUG][0m No healthy velociraptor found - port conflict remains
[1;33m[2025-09-12 04:40:15] [BTPI] [WARN][0m Port 8000 is already in use by docker-pr (required for velociraptor)
[0;32m[2025-09-12 04:40:16] [BTPI] [INFO][0m Resolved 5 port conflicts automatically
[1;33m[2025-09-12 04:40:16] [BTPI] [WARN][0m Found 1 unresolvable port conflicts
[1;33m[2025-09-12 04:40:16] [BTPI] [WARN][0m Port conflicts detected - consider resolving before deployment
[0;32m[2025-09-12 04:41:30] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 04:41:30] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 04:41:30] [BTPI] [INFO][0m Deployment ID: d7b6d44a-3962-441f-83a4-64d481b0f550
[0;32m[2025-09-12 04:41:30] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 04:41:59] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_044130.tar.gz
[0;32m[2025-09-12 04:41:59] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 04:41:59] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 04:41:59] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 04:41:59] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 04:41:59] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 04:41:59] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 04:41:59] [BTPI] [INFO][0m   Available Disk: 176GB
[0;36m[2025-09-12 04:41:59] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 04:41:59] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-12 04:42:01] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-12 04:42:01] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 04:42:01] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 04:42:10] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 04:42:10] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 04:42:10] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 04:42:11] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 04:42:11] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 04:42:11] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 04:42:11] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 04:42:11] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 04:42:11] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 04:42:11] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 04:42:11] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 04:42:11] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-12 04:42:11] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 04:42:11] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 04:42:11] [kasm] [INFO][0m Deploying service: kasm
[0;34m[2025-09-12 04:42:11] [kasm] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/kasm/deploy.sh
[0;32m[2025-09-12 04:42:11] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 04:42:11] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 04:42:11] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 04:42:11] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 04:42:11] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 04:42:11] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 04:42:11] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 04:42:11] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 04:42:11] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 04:42:15] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 04:42:15] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 04:42:15] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 04:42:15] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 04:42:15] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 04:42:17] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 04:42:30] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 04:42:30] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 04:42:30] [KASM] [INFO][0m Waiting for kasm-db...
[0;36m[2025-09-12 04:42:30] [KASM] [SUCCESS][0m kasm-db is healthy
[0;32m[2025-09-12 04:42:30] [KASM] [INFO][0m Waiting for kasm-redis...
[0;31m[2025-09-12 04:42:35] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 04:42:35] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 04:42:35] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 04:42:35] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-12 04:42:35] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;31m[2025-09-12 04:42:35] [BTPI] [ERROR][0m Environment file not found. Run the main deployment script first.
[0;31m[2025-09-12 04:42:35] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-12 04:42:35] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-12 04:42:35] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-12 04:42:35] [cassandra] [INFO][0m Deploying service: cassandra
[0;34m[2025-09-12 04:42:35] [cassandra] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/cassandra/deploy.sh
[0;32m[2025-09-12 04:42:35] [cassandra] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 04:42:35] [cassandra] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 04:42:35] [cassandra] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 04:42:35] [cassandra] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 04:42:35] [cassandra] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 04:42:35] [cassandra] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 04:42:35] [BTPI] [INFO][0m Starting Cassandra deployment...
[0;32m[2025-09-12 04:42:35] [BTPI] [INFO][0m Creating Cassandra initialization scripts...
[0;32m[2025-09-12 04:42:35] [BTPI] [INFO][0m Cassandra initialization scripts created
[0;32m[2025-09-12 04:42:35] [BTPI] [INFO][0m Deploying Cassandra container...
[0;32m[2025-09-12 04:42:35] [BTPI] [INFO][0m Creating container...
[0;32m[2025-09-12 04:42:40] [BTPI] [INFO][0m Cassandra container deployed
[0;32m[2025-09-12 04:42:40] [BTPI] [INFO][0m Configuring Cassandra post-deployment settings...
[0;32m[2025-09-12 04:42:40] [BTPI] [INFO][0m Cassandra configuration completed
[0;32m[2025-09-12 04:42:40] [BTPI] [INFO][0m Testing Cassandra connectivity...
[0;34m[2025-09-12 04:42:42] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 1/30)
[0;34m[2025-09-12 04:42:53] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 2/30)
[0;34m[2025-09-12 04:43:04] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 3/30)
[0;34m[2025-09-12 04:43:15] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 4/30)
[0;34m[2025-09-12 04:43:25] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 5/30)
[0;34m[2025-09-12 04:43:35] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 6/30)
[0;34m[2025-09-12 04:43:45] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 7/30)
[0;34m[2025-09-12 04:43:56] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 8/30)
[0;34m[2025-09-12 04:44:06] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 9/30)
[0;34m[2025-09-12 04:44:17] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 10/30)
[0;34m[2025-09-12 04:44:27] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 11/30)
[0;34m[2025-09-12 04:44:37] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 12/30)
[0;34m[2025-09-12 04:44:48] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 13/30)
[0;34m[2025-09-12 04:44:58] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 14/30)
[0;34m[2025-09-12 04:45:08] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 15/30)
[0;34m[2025-09-12 04:45:18] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 16/30)
[0;34m[2025-09-12 04:45:28] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 17/30)
[0;34m[2025-09-12 04:45:38] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 18/30)
[0;34m[2025-09-12 04:45:48] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 19/30)
[0;34m[2025-09-12 04:45:59] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 20/30)
[0;34m[2025-09-12 04:46:09] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 21/30)
[0;34m[2025-09-12 04:46:19] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 22/30)
[0;34m[2025-09-12 04:46:29] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 23/30)
[0;34m[2025-09-12 04:46:39] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 24/30)
[0;34m[2025-09-12 04:46:49] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 25/30)
[0;34m[2025-09-12 04:46:59] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 26/30)
[0;34m[2025-09-12 04:47:09] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 27/30)
[0;34m[2025-09-12 04:47:19] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 28/30)
[0;34m[2025-09-12 04:47:29] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 29/30)
[0;34m[2025-09-12 04:47:39] [BTPI] [DEBUG][0m Waiting for Cassandra... (attempt 30/30)
[0;31m[2025-09-12 04:47:49] [BTPI] [ERROR][0m Cassandra connectivity test failed
[0;31m[2025-09-12 04:47:49] [BTPI] [ERROR][0m Cassandra deployment completed with errors
[0;31m[2025-09-12 04:47:49] [BTPI] [ERROR][0m Script failed at line 205 with exit code 1
[0;31m[2025-09-12 04:47:49] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-12 04:47:49] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-12 04:47:49] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-12 04:47:49] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;31m[2025-09-12 04:48:49] [BTPI] [ERROR][0m elasticsearch container is not running or doesn't exist
[0;31m[2025-09-12 04:48:49] [BTPI] [ERROR][0m Dependency elasticsearch not ready for wazuh-indexer
[0;32m[2025-09-12 04:48:49] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-12 04:48:49] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 60s)...
[0;31m[2025-09-12 04:49:50] [BTPI] [ERROR][0m wazuh-indexer container is not running or doesn't exist
[0;31m[2025-09-12 04:49:50] [BTPI] [ERROR][0m Dependency wazuh-indexer not ready for wazuh-manager
[0;32m[2025-09-12 04:49:50] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-12 04:49:50] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-12 04:49:50] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;34m[2025-09-12 04:49:50] [velociraptor] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/velociraptor/deploy.sh
[0;31m[2025-09-12 04:49:50] [BTPI] [ERROR][0m Environment file not found. Run the main deployment script first.
[0;31m[2025-09-12 04:49:50] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-12 04:49:50] [nginx] [INFO][0m === Deploying nginx ===
[0;32m[2025-09-12 04:49:50] [BTPI] [INFO][0m Waiting for wazuh-manager to be ready (max 60s)...
[0;31m[2025-09-12 04:50:50] [BTPI] [ERROR][0m wazuh-manager container is not running or doesn't exist
[0;31m[2025-09-12 04:50:50] [BTPI] [ERROR][0m Dependency wazuh-manager not ready for nginx
[0;32m[2025-09-12 04:50:50] [portainer] [INFO][0m === Deploying portainer ===
[0;32m[2025-09-12 04:50:50] [portainer] [INFO][0m Using modern deployment script for portainer
[0;32m[2025-09-12 04:50:50] [portainer] [INFO][0m Deploying service: portainer
[0;34m[2025-09-12 04:50:50] [portainer] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/portainer/deploy.sh
[0;32m[2025-09-12 04:50:50] [portainer] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 04:50:50] [portainer] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 04:50:50] [portainer] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 04:50:50] [portainer] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 04:50:50] [portainer] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 04:50:50] [portainer] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 04:50:50] [PORTAINER] [INFO][0m Starting Portainer deployment...
[0;32m[2025-09-12 04:50:50] [PORTAINER] [INFO][0m Creating Portainer data directories...
[0;36m[2025-09-12 04:50:50] [PORTAINER] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 04:50:50] [PORTAINER] [INFO][0m Deploying Portainer container...
[0;32m[2025-09-12 04:50:50] [PORTAINER] [INFO][0m Starting Portainer container...
[0;32m[2025-09-12 04:50:50] [BTPI] [INFO][0m Creating container...
[0;31m[2025-09-12 04:50:52] [portainer] [ERROR][0m Failed to deploy portainer using modern script
[0;32m[2025-09-12 04:50:52] [BTPI] [INFO][0m === Beginning integration configuration phase ===
[0;32m[2025-09-12 04:50:52] [BTPI] [INFO][0m Configuring service integrations...
[0;36m[2025-09-12 04:50:52] [BTPI] [SUCCESS][0m Service integrations configured
[0;32m[2025-09-12 04:50:52] [BTPI] [INFO][0m === Beginning testing phase ===
[0;32m[2025-09-12 04:50:52] [BTPI] [INFO][0m Running deployment tests...
[0;32m[2025-09-12 04:50:52] [BTPI] [INFO][0m Running comprehensive integration tests...
[1;33m[2025-09-12 04:50:52] [BTPI] [WARN][0m Some integration tests failed
[0;32m[2025-09-12 04:50:52] [BTPI] [INFO][0m Generating deployment report...
[0;36m[2025-09-12 04:50:52] [BTPI] [SUCCESS][0m Deployment report saved to: /home/cmndcntrl/code/btpi-react/logs/deployment_report_20250721_093729.txt
[1;33m[2025-09-12 04:50:52] [BTPI] [WARN][0m BTPI-REACT deployment completed with warnings
[0;32m[2025-09-12 05:09:53] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 05:09:53] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 05:09:53] [BTPI] [INFO][0m Deployment ID: 1e777f22-83f6-44ad-a46f-5bc2a2ec8add
[0;32m[2025-09-12 05:09:53] [BTPI] [INFO][0m Backing up existing deployment...
[0;32m[2025-09-12 05:10:04] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 05:10:04] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 05:10:04] [BTPI] [INFO][0m Deployment ID: f54a61f1-725d-43fe-935a-e9fc65e35420
[0;32m[2025-09-12 05:10:04] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 05:10:33] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_051004.tar.gz
[0;32m[2025-09-12 05:10:33] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 05:10:34] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 05:10:34] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 05:10:34] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 05:10:34] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 05:10:34] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 05:10:34] [BTPI] [INFO][0m   Available Disk: 176GB
[0;36m[2025-09-12 05:10:34] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 05:10:34] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-12 05:10:35] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-12 05:10:35] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 05:10:35] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 05:10:39] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 05:10:39] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 05:10:39] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 05:10:39] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 05:10:39] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 05:10:39] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 05:10:39] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 05:10:39] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 05:10:39] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 05:10:39] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 05:10:39] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-12 05:10:39] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 05:10:39] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 05:10:39] [kasm] [INFO][0m Deploying service: kasm
[0;34m[2025-09-12 05:10:39] [kasm] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/kasm/deploy.sh
[0;32m[2025-09-12 05:10:39] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 05:10:39] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 05:10:39] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 05:10:39] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 05:10:39] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 05:10:39] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 05:10:39] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 05:10:39] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 05:10:39] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 05:10:41] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 05:10:41] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 05:10:41] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 05:10:41] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 05:10:42] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 05:10:43] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 05:10:55] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 05:10:55] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 05:10:55] [KASM] [INFO][0m Waiting for kasm-db...
[0;31m[2025-09-12 05:11:00] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 05:11:00] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 05:11:00] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 05:11:00] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-12 05:11:00] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-12 05:11:04] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;32m[2025-09-12 05:48:45] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 05:48:45] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 05:48:45] [BTPI] [INFO][0m Deployment ID: 20eade1b-b847-435d-b3c2-baec596388e7
[0;32m[2025-09-12 05:48:45] [BTPI] [INFO][0m Backing up existing deployment...
[0;32m[2025-09-12 05:49:42] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 05:49:42] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 05:49:42] [BTPI] [INFO][0m Deployment ID: 4ca459af-2a09-4aa3-a67a-d1e4532b9b57
[0;32m[2025-09-12 05:49:42] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 05:50:13] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_054942.tar.gz
[0;32m[2025-09-12 05:50:13] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 05:50:13] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 05:50:13] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 05:50:13] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 05:50:13] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 05:50:13] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 05:50:13] [BTPI] [INFO][0m   Available Disk: 176GB
[0;36m[2025-09-12 05:50:13] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 05:50:13] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-12 05:50:15] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-12 05:50:15] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 05:50:15] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 05:50:19] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 05:50:19] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 05:50:19] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 05:50:19] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 05:50:19] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 05:50:19] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 05:50:19] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 05:50:19] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 05:50:19] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 05:50:19] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 05:50:19] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-12 05:50:19] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 05:50:19] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 05:50:19] [kasm] [INFO][0m Deploying service: kasm
[0;34m[2025-09-12 05:50:19] [kasm] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/kasm/deploy.sh
[0;32m[2025-09-12 05:50:19] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 05:50:19] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 05:50:19] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 05:50:19] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 05:50:19] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 05:50:19] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 05:50:19] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 05:50:19] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 05:50:19] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 05:50:21] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 05:50:21] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 05:50:21] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 05:50:21] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 05:50:21] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 05:50:23] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 05:50:33] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 05:50:33] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 05:50:33] [KASM] [INFO][0m Waiting for kasm-db...
[0;31m[2025-09-12 05:50:38] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 05:50:38] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 05:50:38] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 05:50:38] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-12 05:50:38] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-12 05:50:43] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;32m[2025-09-12 06:02:08] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 06:02:08] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 06:02:08] [BTPI] [INFO][0m Deployment ID: 1d3fed37-cafd-4fe1-86e8-098c525ac6cb
[0;32m[2025-09-12 06:02:08] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 06:02:18] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_060208.tar.gz
[0;32m[2025-09-12 06:02:18] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;31m[2025-09-12 06:02:18] [BTPI] [ERROR][0m This script must be run as root or with sudo
[0;32m[2025-09-12 06:02:24] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 06:02:24] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 06:02:24] [BTPI] [INFO][0m Deployment ID: 3ebabaab-9fcb-4f61-b216-a0f2200f74ef
[0;32m[2025-09-12 06:02:24] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 06:02:55] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_060224.tar.gz
[0;32m[2025-09-12 06:02:55] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 06:02:55] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 06:02:55] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 06:02:55] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 06:02:55] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 06:02:55] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 06:02:55] [BTPI] [INFO][0m   Available Disk: 176GB
[0;36m[2025-09-12 06:02:55] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 06:02:55] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-12 06:02:57] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-12 06:02:57] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 06:02:57] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 06:03:00] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 06:03:00] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 06:03:00] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 06:03:00] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 06:03:00] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 06:03:00] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 06:03:00] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 06:03:00] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 06:03:00] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 06:03:00] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 06:03:00] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-12 06:03:00] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 06:03:00] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 06:03:00] [kasm] [INFO][0m Deploying service: kasm
[0;34m[2025-09-12 06:03:00] [kasm] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/kasm/deploy.sh
[0;32m[2025-09-12 06:03:00] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 06:03:00] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 06:03:00] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 06:03:00] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 06:03:00] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 06:03:00] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 06:03:00] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 06:03:00] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 06:03:00] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 06:03:02] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 06:03:02] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 06:03:02] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 06:03:02] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 06:03:02] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 06:03:05] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 06:03:15] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 06:03:15] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 06:03:15] [KASM] [INFO][0m Waiting for kasm-db...
[0;31m[2025-09-12 06:03:20] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 06:03:20] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 06:03:20] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 06:03:20] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;34m[2025-09-12 06:03:20] [elasticsearch] [DEBUG][0m Using service deployment script: /home/cmndcntrl/code/btpi-react/services/elasticsearch/deploy.sh
[0;32m[2025-09-12 06:03:27] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;31m[2025-09-12 06:08:06] [BTPI] [ERROR][0m Script failed at line 713 with exit code 127
[0;31m[2025-09-12 06:08:06] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-12 07:40:23] [BTPI] [ERROR][0m Script failed at line 714 with exit code 127
[0;31m[2025-09-12 07:40:23] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-12 07:40:35] [BTPI] [ERROR][0m Script failed at line 714 with exit code 127
[0;31m[2025-09-12 07:40:35] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;31m[2025-09-12 07:40:46] [BTPI] [ERROR][0m Script failed at line 714 with exit code 127
[0;31m[2025-09-12 07:40:46] [BTPI] [ERROR][0m Check logs in /home/cmndcntrl/code/btpi-react/logs for details
[0;32m[2025-09-12 08:52:08] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 08:52:08] [BTPI] [INFO][0m Deployment mode: simple
[0;32m[2025-09-12 08:52:08] [BTPI] [INFO][0m Deployment ID: eb8c9e3b-d381-453c-9790-d315452c4b0b
[0;32m[2025-09-12 08:52:08] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 08:52:38] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_085208.tar.gz
[0;32m[2025-09-12 08:52:38] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 08:52:38] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 08:52:38] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 08:52:38] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 08:52:38] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 08:52:38] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 08:52:38] [BTPI] [INFO][0m   Available Disk: 176GB
[0;36m[2025-09-12 08:52:38] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 08:52:38] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-09-12 08:52:38] [BTPI] [DEBUG][0m Validating existing kasm service on port 6443...
[0;34m[2025-09-12 08:52:38] [BTPI] [DEBUG][0m No healthy kasm found - port conflict remains
[1;33m[2025-09-12 08:52:38] [BTPI] [WARN][0m Port 6443 is already in use by docker-pr (required for kasm)
[0;34m[2025-09-12 08:52:39] [BTPI] [DEBUG][0m Validating existing elasticsearch service on port 9200...
[0;34m[2025-09-12 08:52:40] [BTPI] [DEBUG][0m elasticsearch is running but not healthy - port conflict remains
[1;33m[2025-09-12 08:52:40] [BTPI] [WARN][0m Port 9200 is already in use by docker-pr (required for elasticsearch)
[0;31m[2025-09-12 08:52:40] [BTPI] [ERROR][0m Found 2 port conflicts
[1;33m[2025-09-12 08:52:40] [BTPI] [WARN][0m Port conflicts detected - consider resolving before deployment
[0;36m[2025-09-12 08:53:50] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Skipping additional package installation in simple mode
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Skipping system optimization
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 08:53:50] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 08:53:50] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 08:53:50] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 08:53:50] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 08:53:50] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 08:53:50] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 08:53:50] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 08:53:50] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 08:53:50] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra velociraptor kasm portainer
[0;32m[2025-09-12 08:53:50] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 08:53:50] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 08:53:50] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-12 08:53:50] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-12 08:53:52] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-12 08:53:52] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;32m[2025-09-12 09:37:19] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 09:37:19] [BTPI] [INFO][0m Deployment mode: simple
[0;32m[2025-09-12 09:37:19] [BTPI] [INFO][0m Deployment ID: 7cd4daca-f406-4895-87fb-9cefee42225b
[0;32m[2025-09-12 09:37:19] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 09:37:52] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_093719.tar.gz
[0;32m[2025-09-12 09:37:52] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 09:37:52] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 09:37:52] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 09:37:52] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 09:37:52] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 09:37:52] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 09:37:52] [BTPI] [INFO][0m   Available Disk: 175GB
[0;36m[2025-09-12 09:37:52] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 09:37:52] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-09-12 09:37:53] [BTPI] [DEBUG][0m Validating existing elasticsearch service on port 9200...
[0;34m[2025-09-12 09:37:54] [BTPI] [DEBUG][0m Elasticsearch requires auth but is responding - considered healthy
[0;34m[2025-09-12 09:37:54] [BTPI] [DEBUG][0m elasticsearch is running and healthy - port conflict resolved
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Port 9200 is in use by healthy elasticsearch - conflict resolved automatically
[0;36m[2025-09-12 09:37:54] [BTPI] [SUCCESS][0m Resolved 1 port conflicts automatically
[0;36m[2025-09-12 09:37:54] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Skipping additional package installation in simple mode
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Skipping system optimization
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 09:37:54] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 09:37:54] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 09:37:54] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 09:37:54] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 09:37:54] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 09:37:54] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 09:37:54] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 09:37:54] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 09:37:54] [BTPI] [INFO][0m Deploying services: elasticsearch cassandra velociraptor kasm portainer
[0;32m[2025-09-12 09:37:54] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 09:37:55] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 09:37:55] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-12 09:37:55] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-12 09:37:55] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-12 09:37:55] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;32m[2025-09-12 10:19:14] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 10:19:14] [BTPI] [INFO][0m Deployment mode: simple
[0;32m[2025-09-12 10:19:14] [BTPI] [INFO][0m Deployment ID: 899549c6-a5e1-4792-877b-41237a50896b
[0;32m[2025-09-12 10:19:14] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 10:19:46] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_101914.tar.gz
[0;32m[2025-09-12 10:19:46] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 10:19:46] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 10:19:46] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 10:19:46] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 10:19:46] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 10:19:46] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 10:19:46] [BTPI] [INFO][0m   Available Disk: 175GB
[0;36m[2025-09-12 10:19:46] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 10:19:46] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-09-12 10:19:47] [BTPI] [DEBUG][0m Validating existing elasticsearch service on port 9200...
[0;34m[2025-09-12 10:19:48] [BTPI] [DEBUG][0m Elasticsearch requires auth but is responding - considered healthy
[0;34m[2025-09-12 10:19:48] [BTPI] [DEBUG][0m elasticsearch is running and healthy - port conflict resolved
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Port 9200 is in use by healthy elasticsearch - conflict resolved automatically
[0;36m[2025-09-12 10:19:48] [BTPI] [SUCCESS][0m Resolved 1 port conflicts automatically
[0;36m[2025-09-12 10:19:48] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Skipping additional package installation in simple mode
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Skipping system optimization
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 10:19:48] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 10:19:48] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 10:19:48] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 10:19:48] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 10:19:48] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 10:19:48] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 10:19:48] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 10:19:48] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 10:19:48] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra velociraptor portainer
[0;32m[2025-09-12 10:19:48] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 10:19:48] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 10:19:48] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-12 10:19:48] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-12 10:19:48] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 10:19:48] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 10:19:48] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 10:19:48] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 10:19:48] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 10:19:48] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 10:19:48] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 10:19:48] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 10:19:48] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 10:19:52] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 10:19:52] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 10:19:52] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 10:19:52] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 10:19:52] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 10:19:54] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 10:20:03] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 10:20:03] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 10:20:03] [KASM] [INFO][0m Waiting for kasm-db...
[0;31m[2025-09-12 10:20:08] [kasm] [ERROR][0m Service kasm deployment failed
[0;31m[2025-09-12 10:20:08] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 10:20:08] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 10:20:08] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 10:20:08] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-12 10:20:08] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-12 10:20:08] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-12 10:20:08] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;36m[2025-09-12 10:20:08] [BTPI] [SUCCESS][0m elasticsearch is already healthy - skipping wait
[0;36m[2025-09-12 10:20:08] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-12 10:20:08] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-12 10:20:08] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-12 10:20:08] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-12 10:20:08] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-12 10:25:17] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-12 10:25:17] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-12 10:25:17] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-12 10:25:17] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-12 10:25:17] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;36m[2025-09-12 10:25:17] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-12 10:25:18] [velociraptor] [ERROR][0m Service velociraptor deployment failed
[0;31m[2025-09-12 10:25:18] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-12 10:25:18] [portainer] [INFO][0m === Deploying portainer ===
[0;32m[2025-09-12 10:25:18] [portainer] [INFO][0m Using modern deployment script for portainer
[0;32m[2025-09-12 10:25:18] [portainer] [INFO][0m Deploying service: portainer
[0;36m[2025-09-12 10:25:18] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-12 10:25:35] [portainer] [SUCCESS][0m Service portainer deployed successfully
[0;32m[2025-09-12 10:25:35] [BTPI] [INFO][0m Waiting for portainer to be ready (max 300s)...
[0;36m[2025-09-12 10:25:35] [BTPI] [SUCCESS][0m portainer is already healthy - skipping wait
[0;36m[2025-09-12 10:25:35] [portainer] [SUCCESS][0m Service portainer deployment completed
[0;32m[2025-09-12 10:25:35] [BTPI] [INFO][0m === Beginning integration configuration phase ===
[0;32m[2025-09-12 10:25:35] [BTPI] [INFO][0m Configuring service integrations...
[0;36m[2025-09-12 10:25:35] [BTPI] [SUCCESS][0m Service integrations configured
[0;32m[2025-09-12 10:25:35] [BTPI] [INFO][0m === Beginning testing phase ===
[0;32m[2025-09-12 10:25:35] [BTPI] [INFO][0m Running deployment tests...
[0;32m[2025-09-12 10:25:35] [BTPI] [INFO][0m Running comprehensive integration tests...
[1;33m[2025-09-12 10:25:35] [BTPI] [WARN][0m Some integration tests failed
[0;32m[2025-09-12 10:25:35] [BTPI] [INFO][0m Generating deployment report...
[0;36m[2025-09-12 10:25:35] [BTPI] [SUCCESS][0m Deployment report saved to: /home/cmndcntrl/code/btpi-react/logs/deployment_report_20250912_045647.txt
[1;33m[2025-09-12 10:25:35] [BTPI] [WARN][0m BTPI-REACT deployment completed with warnings
[0;32m[2025-09-12 11:25:56] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 11:25:56] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 11:25:56] [BTPI] [INFO][0m Deployment ID: 58403c6e-a31e-47ea-afec-ddc3ff2d88a2
[0;32m[2025-09-12 11:25:56] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 11:26:27] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_112556.tar.gz
[0;32m[2025-09-12 11:26:27] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 11:26:27] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 11:26:27] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 11:26:27] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 11:26:27] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 11:26:27] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 11:26:27] [BTPI] [INFO][0m   Available Disk: 175GB
[0;36m[2025-09-12 11:26:27] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 11:26:27] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-12 11:26:28] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-12 11:26:28] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 11:26:28] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 11:26:36] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 11:26:36] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 11:26:36] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 11:26:36] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 11:26:36] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 11:26:36] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 11:26:36] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 11:26:36] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 11:26:36] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 11:26:36] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 11:26:36] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-12 11:26:36] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 11:26:36] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 11:26:36] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-12 11:26:36] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-12 11:26:36] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 11:26:36] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 11:26:36] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 11:26:36] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 11:26:36] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 11:26:36] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 11:26:36] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 11:26:36] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 11:26:36] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 11:26:38] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 11:26:38] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 11:26:38] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 11:26:38] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 11:26:38] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 11:26:40] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 11:26:50] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 11:26:50] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 11:26:50] [KASM] [INFO][0m Waiting for kasm-db...
[0;31m[2025-09-12 11:26:55] [kasm] [ERROR][0m Service kasm deployment failed
[0;31m[2025-09-12 11:26:55] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 11:26:55] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 11:26:55] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 11:26:55] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-12 11:26:55] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-12 11:27:00] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-12 11:27:00] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;31m[2025-09-12 11:30:04] [BTPI] [ERROR][0m elasticsearch container is not running or doesn't exist
[0;31m[2025-09-12 11:30:04] [elasticsearch] [ERROR][0m Service elasticsearch failed to become ready
[0;34m[2025-09-12 11:30:04] [BTPI] [DEBUG][0m === DEBUG INFO FOR elasticsearch ===
[0;34m[2025-09-12 11:30:05] [BTPI] [DEBUG][0m Container 'elasticsearch' not found
[0;34m[2025-09-12 11:30:05] [BTPI] [DEBUG][0m Recent container logs:
[0;34m[2025-09-12 11:30:05] [BTPI] [DEBUG][0m   Could not retrieve logs for elasticsearch
[0;34m[2025-09-12 11:30:05] [BTPI] [DEBUG][0m === END DEBUG INFO FOR elasticsearch ===
[0;32m[2025-09-12 11:30:05] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-12 11:30:05] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-12 11:30:05] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-12 11:30:05] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-12 11:32:31] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 11:32:31] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 11:32:31] [BTPI] [INFO][0m Deployment ID: a5422dc8-e140-4f09-8af1-28a134270956
[0;32m[2025-09-12 11:32:31] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 11:33:01] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_113231.tar.gz
[0;32m[2025-09-12 11:33:01] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 11:33:01] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 11:33:01] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 11:33:01] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 11:33:01] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 11:33:01] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 11:33:01] [BTPI] [INFO][0m   Available Disk: 175GB
[0;36m[2025-09-12 11:33:01] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 11:33:01] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-12 11:33:02] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-12 11:33:02] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 11:33:02] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 11:33:05] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 11:33:05] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 11:33:05] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 11:33:05] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 11:33:05] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 11:33:05] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 11:33:05] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 11:33:05] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 11:33:05] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 11:33:05] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 11:33:05] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 11:33:05] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 11:33:05] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 11:33:05] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 11:33:05] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 11:33:05] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 11:33:05] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 11:33:05] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 11:33:06] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-12 11:33:06] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 11:33:06] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-12 11:33:06] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 11:33:06] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 11:33:06] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-12 11:33:06] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-12 11:33:06] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 11:33:06] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 11:33:06] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 11:33:06] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 11:33:06] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 11:33:06] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 11:33:06] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 11:33:06] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 11:33:06] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 11:33:07] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 11:33:07] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 11:33:07] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 11:33:07] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 11:33:07] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 11:33:09] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 11:33:21] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 11:33:21] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 11:33:21] [KASM] [INFO][0m Waiting for kasm-db...
[0;31m[2025-09-12 11:33:26] [kasm] [ERROR][0m Service kasm deployment failed
[0;31m[2025-09-12 11:33:26] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 11:33:26] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 11:33:26] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 11:33:26] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-12 11:33:26] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-12 11:33:31] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-12 11:33:31] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;32m[2025-09-12 13:08:03] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 13:08:03] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 13:08:03] [BTPI] [INFO][0m Deployment ID: e2723161-6fca-49fc-88ff-c25b73fa4827
[0;32m[2025-09-12 13:08:03] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 13:08:18] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_130803.tar.gz
[0;32m[2025-09-12 13:08:18] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;31m[2025-09-12 13:08:18] [BTPI] [ERROR][0m This script must be run as root or with sudo
[0;32m[2025-09-12 13:08:23] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 13:08:23] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 13:08:23] [BTPI] [INFO][0m Deployment ID: 2732e37a-7863-4dae-b70f-2bed05755f31
[0;32m[2025-09-12 13:08:23] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 13:09:00] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_130823.tar.gz
[0;32m[2025-09-12 13:09:00] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 13:09:00] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 13:09:00] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 13:09:00] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 13:09:00] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 13:09:00] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 13:09:00] [BTPI] [INFO][0m   Available Disk: 133GB
[0;36m[2025-09-12 13:09:01] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 13:09:01] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-12 13:09:02] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-12 13:09:02] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 13:09:02] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 13:09:06] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 13:09:06] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 13:09:06] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 13:09:06] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 13:09:06] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 13:09:06] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 13:09:06] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 13:09:06] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 13:09:06] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 13:09:06] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 13:09:06] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 13:09:06] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 13:09:06] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 13:09:06] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 13:09:06] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 13:09:06] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 13:09:06] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 13:09:06] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-12 13:10:45] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 13:10:45] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 13:10:45] [BTPI] [INFO][0m Deployment ID: 8934ea48-d09d-473a-aefb-1e30be3d0d23
[0;32m[2025-09-12 13:10:45] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 13:11:16] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_131045.tar.gz
[0;32m[2025-09-12 13:11:16] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 13:11:16] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 13:11:16] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 13:11:16] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 13:11:16] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 13:11:16] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 13:11:16] [BTPI] [INFO][0m   Available Disk: 133GB
[0;36m[2025-09-12 13:11:16] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 13:11:16] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-12 13:11:17] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-12 13:11:17] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 13:11:17] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 13:11:20] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 13:11:20] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 13:11:20] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 13:11:20] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 13:11:21] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 13:11:21] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 13:11:21] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 13:11:21] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 13:11:21] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 13:11:21] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 13:11:21] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 13:11:21] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 13:11:21] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 13:11:21] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 13:11:21] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 13:11:21] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 13:11:21] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 13:11:21] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;36m[2025-09-12 13:11:21] [BTPI] [SUCCESS][0m Docker network 'btpi-network' created
[0;32m[2025-09-12 13:11:21] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 13:11:21] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-12 13:11:21] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 13:11:21] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 13:11:21] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-12 13:11:21] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-12 13:11:21] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 13:11:21] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 13:11:21] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 13:11:21] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 13:11:21] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 13:11:21] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 13:11:21] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 13:11:21] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 13:11:21] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 13:11:24] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 13:11:24] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 13:11:24] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 13:11:24] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 13:11:25] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 13:11:26] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 13:11:39] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 13:11:39] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 13:11:39] [KASM] [INFO][0m Waiting for kasm-db...
[0;31m[2025-09-12 13:11:44] [kasm] [ERROR][0m Service kasm deployment failed
[0;31m[2025-09-12 13:11:44] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 13:11:44] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 13:11:44] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 13:11:44] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-12 13:11:44] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-12 13:11:50] [elasticsearch] [ERROR][0m Service elasticsearch deployment failed
[0;31m[2025-09-12 13:11:50] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-12 13:11:50] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-12 13:11:50] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-12 13:11:50] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-12 13:11:50] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-12 13:11:56] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-12 13:11:56] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-12 13:11:56] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-12 13:11:56] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;32m[2025-09-12 13:42:44] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 13:42:44] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 13:42:44] [BTPI] [INFO][0m Deployment ID: 2fcd130d-acda-4e58-91c0-dbb6925c363d
[0;32m[2025-09-12 13:42:44] [BTPI] [INFO][0m Backing up existing deployment...
[0;32m[2025-09-12 13:42:50] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-12 13:42:50] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-12 13:42:50] [BTPI] [INFO][0m Deployment ID: 3790bd9e-a312-4c38-b1c8-fd6e273c9e67
[0;32m[2025-09-12 13:42:50] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-12 13:43:20] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250912_134250.tar.gz
[0;32m[2025-09-12 13:43:20] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-12 13:43:20] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-12 13:43:20] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-12 13:43:20] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-12 13:43:20] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-12 13:43:20] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-12 13:43:20] [BTPI] [INFO][0m   Available Disk: 133GB
[0;36m[2025-09-12 13:43:21] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-12 13:43:21] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-12 13:43:22] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-12 13:43:22] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-12 13:43:22] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-12 13:43:25] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-12 13:43:25] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-12 13:43:25] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-12 13:43:25] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-12 13:43:25] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-12 13:43:25] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-12 13:43:25] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-12 13:43:25] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 13:43:25] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 13:43:25] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 13:43:25] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 13:43:25] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 13:43:25] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-12 13:43:25] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-12 13:43:25] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-12 13:43:25] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-12 13:43:26] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-12 13:43:26] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;36m[2025-09-12 13:43:26] [BTPI] [SUCCESS][0m Docker network 'btpi-network' created
[0;32m[2025-09-12 13:43:26] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-12 13:43:26] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-12 13:43:26] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-12 13:43:26] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-12 13:43:26] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-12 13:43:26] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-12 13:43:26] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-12 13:43:26] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-12 13:43:26] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-12 13:43:26] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-12 13:43:26] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-12 13:43:26] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-12 13:43:26] [KASM] [INFO][0m Starting Kasm deployment...
[0;32m[2025-09-12 13:43:26] [KASM] [INFO][0m Creating Kasm configuration...
[0;32m[2025-09-12 13:43:27] [KASM] [INFO][0m Generating SSL certificates for Kasm...
[0;36m[2025-09-12 13:43:30] [KASM] [SUCCESS][0m Kasm configuration created
[0;32m[2025-09-12 13:43:30] [KASM] [INFO][0m Creating Kasm data directories...
[0;36m[2025-09-12 13:43:30] [KASM] [SUCCESS][0m Data directories created
[0;32m[2025-09-12 13:43:30] [KASM] [INFO][0m Deploying Kasm containers...
[0;32m[2025-09-12 13:43:30] [KASM] [INFO][0m Pulling Kasm Docker images...
[0;32m[2025-09-12 13:43:32] [KASM] [INFO][0m Starting Kasm containers...
[0;36m[2025-09-12 13:43:43] [KASM] [SUCCESS][0m Kasm containers deployed
[0;32m[2025-09-12 13:43:43] [KASM] [INFO][0m Waiting for Kasm services to be ready...
[0;32m[2025-09-12 13:43:43] [KASM] [INFO][0m Waiting for kasm-db...
[0;31m[2025-09-12 13:43:48] [kasm] [ERROR][0m Service kasm deployment failed
[0;31m[2025-09-12 13:43:48] [kasm] [ERROR][0m Failed to deploy kasm using modern script
[0;32m[2025-09-12 13:43:48] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-12 13:43:48] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-12 13:43:48] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-12 13:43:48] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-12 13:43:53] [elasticsearch] [ERROR][0m Service elasticsearch deployment failed
[0;31m[2025-09-12 13:43:53] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-12 13:43:53] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-12 13:43:53] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-12 13:43:53] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-12 13:43:53] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-12 13:43:58] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-12 13:43:58] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-12 13:43:58] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-12 13:43:58] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;32m[2025-09-15 16:05:03] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-15 16:05:03] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-15 16:05:03] [BTPI] [INFO][0m Deployment ID: 2341cf12-8bbf-47ef-84ca-35e17c3178f0
[0;32m[2025-09-15 16:05:03] [BTPI] [INFO][0m Backing up existing deployment...
[0;32m[2025-09-15 16:06:14] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-15 16:06:14] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-15 16:06:14] [BTPI] [INFO][0m Deployment ID: 5d778a99-f466-45d4-a21a-d9113d51d8ef
[0;32m[2025-09-15 16:06:14] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-15 16:06:52] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250915_160614.tar.gz
[0;32m[2025-09-15 16:06:52] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-15 16:06:52] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-15 16:06:52] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-15 16:06:52] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-15 16:06:52] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-15 16:06:52] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-15 16:06:52] [BTPI] [INFO][0m   Available Disk: 160GB
[0;36m[2025-09-15 16:06:54] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-15 16:06:54] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-15 16:06:55] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-15 16:06:55] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-15 16:06:55] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-15 16:06:58] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-15 16:06:58] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-15 16:06:58] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-15 16:06:58] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-15 16:06:58] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-15 16:06:58] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-15 16:06:58] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-15 16:06:58] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-15 16:06:58] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-15 16:06:58] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-15 16:06:58] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-15 16:06:58] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-15 16:06:58] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-15 16:06:58] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-15 16:06:58] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-15 16:06:58] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-15 16:06:58] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-15 16:06:58] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;36m[2025-09-15 16:06:59] [BTPI] [SUCCESS][0m Docker network 'btpi-network' created
[0;32m[2025-09-15 16:06:59] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-15 16:06:59] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-15 16:06:59] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-15 16:06:59] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-15 16:06:59] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-15 16:06:59] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-15 16:06:59] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-15 16:06:59] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-15 16:06:59] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-15 16:06:59] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-15 16:06:59] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-15 16:06:59] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-15 16:06:59] [KASM] [INFO][0m KASM deployment redirected to native installation method...
[0;32m[2025-09-15 16:06:59] [KASM] [INFO][0m This prevents conflicts between Docker and native KASM installations.
[0;32m[2025-09-15 16:06:59] [KASM] [INFO][0m Native KASM installation will be handled by fresh-btpi-react.sh
[0;36m[2025-09-15 16:06:59] [KASM] [SUCCESS][0m KASM service deployment delegated to native installation method
[0;32m[2025-09-15 16:06:59] [KASM] [INFO][0m Access KASM at: https://localhost:8443 (after native installation)
[0;36m[2025-09-15 16:06:59] [kasm] [SUCCESS][0m Service kasm deployed successfully
[0;32m[2025-09-15 16:06:59] [BTPI] [INFO][0m Waiting for kasm to be ready (max 300s)...
[0;34m[2025-09-15 16:06:59] [BTPI] [DEBUG][0m Performing health check for kasm...
[0;34m[2025-09-15 16:06:59] [kasm] [DEBUG][0m Health check attempt 1/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:07:09] [kasm] [DEBUG][0m Health check attempt 2/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:07:19] [kasm] [DEBUG][0m Health check attempt 3/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:07:29] [kasm] [DEBUG][0m Health check attempt 4/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:07:39] [kasm] [DEBUG][0m Health check attempt 5/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:07:49] [kasm] [DEBUG][0m Health check attempt 6/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:07:59] [kasm] [DEBUG][0m Health check attempt 7/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:08:09] [kasm] [DEBUG][0m Health check attempt 8/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:08:19] [kasm] [DEBUG][0m Health check attempt 9/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:08:29] [kasm] [DEBUG][0m Health check attempt 10/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:08:39] [kasm] [DEBUG][0m Health check attempt 11/30 for kasm failed, waiting 10s...
[0;34m[2025-09-15 16:08:49] [kasm] [DEBUG][0m Health check attempt 12/30 for kasm failed, waiting 10s...
[0;32m[2025-09-15 16:11:40] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-15 16:11:40] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-15 16:11:40] [BTPI] [INFO][0m Deployment ID: 66636120-4863-4db6-b9a5-d3aa3c8bc486
[0;32m[2025-09-15 16:11:40] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-15 16:12:10] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250915_161140.tar.gz
[0;32m[2025-09-15 16:12:10] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-15 16:12:10] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-15 16:12:10] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-15 16:12:10] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-15 16:12:10] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-15 16:12:10] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-15 16:12:10] [BTPI] [INFO][0m   Available Disk: 160GB
[0;36m[2025-09-15 16:12:10] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-15 16:12:10] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-15 16:12:11] [BTPI] [SUCCESS][0m No port conflicts detected
[0;36m[2025-09-15 16:12:12] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-15 16:12:12] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-15 16:12:15] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-15 16:12:15] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-15 16:12:15] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-15 16:12:15] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-15 16:12:15] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-15 16:12:15] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-15 16:12:15] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-15 16:12:15] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-15 16:12:15] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-15 16:12:15] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-15 16:12:15] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-15 16:12:15] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-15 16:12:15] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-15 16:12:15] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-15 16:12:15] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-15 16:12:15] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-15 16:12:15] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-15 16:12:15] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-15 16:12:15] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-15 16:12:15] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-15 16:12:15] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-15 16:12:15] [KASM] [INFO][0m KASM deployment redirected to native installation method...
[0;32m[2025-09-15 16:12:15] [KASM] [INFO][0m This prevents conflicts between Docker and native KASM installations.
[0;32m[2025-09-15 16:12:15] [KASM] [INFO][0m Native KASM installation will be handled by fresh-btpi-react.sh
[0;36m[2025-09-15 16:12:15] [KASM] [SUCCESS][0m KASM service deployment delegated to native installation method
[0;32m[2025-09-15 16:12:15] [KASM] [INFO][0m Access KASM at: https://localhost:8443 (after native installation)
[0;36m[2025-09-15 16:12:15] [kasm] [SUCCESS][0m Service kasm deployed successfully
[0;36m[2025-09-15 16:13:15] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-15 16:13:15] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-15 16:13:15] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-15 16:13:15] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-15 16:13:15] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-15 16:13:17] [elasticsearch] [ERROR][0m Service elasticsearch deployment failed
[0;31m[2025-09-15 16:13:17] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-15 16:13:17] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-15 16:13:17] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-15 16:13:17] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-15 16:13:17] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-15 16:13:18] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-15 16:13:18] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-15 16:13:18] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-15 16:13:18] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;32m[2025-09-16 20:59:38] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-16 20:59:38] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-16 20:59:38] [BTPI] [INFO][0m Deployment ID: 71e39c40-f3dc-415e-a508-c55897ea7d24
[0;32m[2025-09-16 20:59:38] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-16 21:00:08] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250916_205938.tar.gz
[0;32m[2025-09-16 21:00:08] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-16 21:00:08] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-16 21:00:08] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-16 21:00:08] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-16 21:00:08] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-16 21:00:08] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-16 21:00:08] [BTPI] [INFO][0m   Available Disk: 159GB
[0;31m[2025-09-16 21:00:08] [BTPI] [ERROR][0m No internet connectivity detected
[0;31m[2025-09-16 21:00:08] [BTPI] [ERROR][0m System requirements check failed
[0;31m[2025-09-16 21:00:08] [BTPI] [ERROR][0m System requirements check failed
[0;32m[2025-09-16 21:45:52] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-16 21:45:52] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-16 21:45:52] [BTPI] [INFO][0m Deployment ID: 82d19e14-1669-4eeb-a740-5bb1195725af
[0;32m[2025-09-16 21:45:52] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-16 21:46:23] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250916_214552.tar.gz
[0;32m[2025-09-16 21:46:23] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-16 21:46:23] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-16 21:46:23] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-16 21:46:23] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-16 21:46:23] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-16 21:46:23] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-16 21:46:23] [BTPI] [INFO][0m   Available Disk: 159GB
[0;31m[2025-09-16 21:46:23] [BTPI] [ERROR][0m No internet connectivity detected
[0;31m[2025-09-16 21:46:23] [BTPI] [ERROR][0m System requirements check failed
[0;31m[2025-09-16 21:46:23] [BTPI] [ERROR][0m System requirements check failed
[0;32m[2025-09-16 21:59:45] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-16 21:59:45] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-16 21:59:45] [BTPI] [SUCCESS][0m Internet connectivity test passed!
[0;32m[2025-09-16 22:03:13] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-16 22:03:13] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-16 22:03:13] [BTPI] [INFO][0m Deployment ID: 809f7201-b2eb-437f-a360-8de0a985c116
[0;32m[2025-09-16 22:03:13] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-16 22:03:43] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250916_220313.tar.gz
[0;32m[2025-09-16 22:03:43] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-16 22:03:43] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-16 22:03:43] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-16 22:03:43] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-16 22:03:43] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-16 22:03:43] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-16 22:03:43] [BTPI] [INFO][0m   Available Disk: 158GB
[0;36m[2025-09-16 22:03:43] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-16 22:03:43] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-16 22:03:44] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-16 22:03:44] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-16 22:03:44] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-16 22:03:44] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-16 22:03:44] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-16 22:03:57] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-16 22:03:57] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-16 22:03:57] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-16 22:03:57] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-16 22:03:57] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-16 22:03:57] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-16 22:03:57] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-16 22:03:57] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-16 22:03:57] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-16 22:03:57] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;36m[2025-09-16 22:03:57] [BTPI] [SUCCESS][0m Docker network 'btpi-network' created
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-16 22:03:57] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-16 22:03:57] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-16 22:03:57] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-16 22:03:57] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-16 22:03:57] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-16 22:03:57] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-16 22:03:57] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-16 22:03:57] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-16 22:03:57] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-16 22:03:57] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-16 22:03:57] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-16 22:03:57] [KASM] [INFO][0m KASM deployment redirected to native installation method...
[0;32m[2025-09-16 22:03:57] [KASM] [INFO][0m This prevents conflicts between Docker and native KASM installations.
[0;32m[2025-09-16 22:03:57] [KASM] [INFO][0m Native KASM installation will be handled by fresh-btpi-react.sh
[0;36m[2025-09-16 22:03:57] [KASM] [SUCCESS][0m KASM service deployment delegated to native installation method
[0;32m[2025-09-16 22:03:57] [KASM] [INFO][0m Access KASM at: https://localhost:8443 (after native installation)
[0;36m[2025-09-16 22:03:57] [kasm] [SUCCESS][0m Service kasm deployed successfully
[0;32m[2025-09-16 22:11:34] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-16 22:11:34] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-16 22:11:34] [BTPI] [INFO][0m Deployment ID: 616609fe-3e40-4f97-8ba5-f79739e413d2
[0;32m[2025-09-16 22:11:34] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-16 22:12:03] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250916_221134.tar.gz
[0;32m[2025-09-16 22:12:03] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-16 22:12:03] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-16 22:12:03] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-16 22:12:03] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-16 22:12:03] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-16 22:12:03] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-16 22:12:03] [BTPI] [INFO][0m   Available Disk: 158GB
[0;36m[2025-09-16 22:12:03] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-16 22:12:03] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-16 22:12:05] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-16 22:12:05] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-16 22:12:05] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-16 22:12:05] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-16 22:12:05] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-16 22:12:10] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-16 22:12:10] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-16 22:12:10] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-16 22:12:10] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-16 22:12:10] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-16 22:12:10] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-16 22:12:10] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-16 22:12:10] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-16 22:12:10] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-16 22:12:10] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-16 22:12:10] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-16 22:12:10] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-16 22:12:10] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-16 22:12:10] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-16 22:12:10] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-16 22:12:10] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-16 22:12:10] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-16 22:12:10] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;36m[2025-09-16 22:12:11] [BTPI] [SUCCESS][0m Docker network 'btpi-network' created
[0;32m[2025-09-16 22:12:11] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-16 22:12:11] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-16 22:12:11] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-16 22:12:11] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-16 22:12:11] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-16 22:12:11] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-16 22:12:11] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-16 22:12:11] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-16 22:12:11] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-16 22:12:11] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-16 22:12:11] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-16 22:12:11] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-16 22:12:11] [KASM] [INFO][0m KASM deployment redirected to native installation method...
[0;32m[2025-09-16 22:12:11] [KASM] [INFO][0m This prevents conflicts between Docker and native KASM installations.
[0;32m[2025-09-16 22:12:11] [KASM] [INFO][0m Native KASM installation will be handled by fresh-btpi-react.sh
[0;36m[2025-09-16 22:12:11] [KASM] [SUCCESS][0m KASM service deployment delegated to native installation method
[0;32m[2025-09-16 22:12:11] [KASM] [INFO][0m Access KASM at: https://localhost:8443 (after native installation)
[0;36m[2025-09-16 22:12:11] [kasm] [SUCCESS][0m Service kasm deployed successfully
[0;32m[2025-09-16 22:15:59] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-16 22:15:59] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-16 22:15:59] [BTPI] [INFO][0m Deployment ID: d30531f5-f2a8-439d-96d1-dbae3a31ab2c
[0;32m[2025-09-16 22:15:59] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-16 22:16:28] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250916_221559.tar.gz
[0;32m[2025-09-16 22:16:28] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-16 22:16:28] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-16 22:16:28] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-16 22:16:28] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-16 22:16:28] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-16 22:16:28] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-16 22:16:28] [BTPI] [INFO][0m   Available Disk: 158GB
[0;36m[2025-09-16 22:16:28] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-16 22:16:28] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-16 22:16:29] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-16 22:16:29] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-16 22:16:29] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-16 22:16:29] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-16 22:16:29] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-16 22:16:33] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-16 22:16:33] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-16 22:16:33] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-16 22:16:33] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-16 22:16:33] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-16 22:16:33] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-16 22:16:33] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-16 22:16:33] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-16 22:16:33] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-16 22:16:33] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;36m[2025-09-16 22:16:33] [BTPI] [SUCCESS][0m Docker network 'btpi-network' created
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-16 22:16:33] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-16 22:16:33] [kasm] [INFO][0m Using modern deployment script for kasm
[0;32m[2025-09-16 22:16:33] [kasm] [INFO][0m Deploying service: kasm
[0;36m[2025-09-16 22:16:33] [BTPI] [SUCCESS][0m Environment validation completed
[0;32m[2025-09-16 22:16:33] [kasm] [INFO][0m Validating environment configuration...
[0;36m[2025-09-16 22:16:33] [kasm] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-16 22:16:33] [kasm] [DEBUG][0m Current environment values:
[0;34m[2025-09-16 22:16:33] [kasm] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-16 22:16:33] [kasm] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-16 22:16:33] [kasm] [DEBUG][0m   BTPI_VERSION: 2.0.0
[0;32m[2025-09-16 22:16:33] [KASM] [INFO][0m KASM deployment redirected to native installation method...
[0;32m[2025-09-16 22:16:33] [KASM] [INFO][0m This prevents conflicts between Docker and native KASM installations.
[0;32m[2025-09-16 22:16:33] [KASM] [INFO][0m Native KASM installation will be handled by fresh-btpi-react.sh
[0;36m[2025-09-16 22:16:33] [KASM] [SUCCESS][0m KASM service deployment delegated to native installation method
[0;32m[2025-09-16 22:16:33] [KASM] [INFO][0m Access KASM at: https://localhost:8443 (after native installation)
[0;36m[2025-09-16 22:16:33] [kasm] [SUCCESS][0m Service kasm deployed successfully
[0;36m[2025-09-16 22:16:33] [BTPI] [SUCCESS][0m KASM native installation completed - skipping verification
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m KASM services will start automatically in the background
[0;32m[2025-09-16 22:16:33] [BTPI] [INFO][0m Access KASM at: https://localhost:8443 once startup is complete
[0;36m[2025-09-16 22:16:33] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-16 22:16:33] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-16 22:16:33] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-16 22:16:33] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-16 22:16:33] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-16 22:17:01] [elasticsearch] [ERROR][0m Service elasticsearch deployment failed
[0;31m[2025-09-16 22:17:01] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-16 22:17:01] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-16 22:17:01] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-16 22:17:01] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-16 22:17:01] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-16 22:17:03] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-16 22:17:03] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-16 22:17:03] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-16 22:17:03] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;32m[2025-09-16 22:21:17] [BTPI] [INFO][0m Testing KASM deployment flow integration...
[0;32m[2025-09-16 22:21:17] [kasm] [INFO][0m === Testing KASM deployment logic ===
[0;32m[2025-09-16 22:21:17] [kasm] [INFO][0m Using native KASM installation method
[0;32m[2025-09-16 22:21:17] [KASM] [INFO][0m 🖥️ Setting up KASM Workspaces (Native)...
[0;32m[2025-09-16 22:21:17] [KASM] [INFO][0m -------------------------------------
[0;32m[2025-09-16 22:21:17] [KASM] [INFO][0m 📦 Starting KASM 1.17.0 installation...
[0;32m[2025-09-16 22:21:17] [BTPI] [INFO][0m MOCK: KASM installation would run here with full output visible
[0;36m[2025-09-16 22:21:17] [KASM] [SUCCESS][0m ✅ KASM installation completed successfully!
[0;36m[2025-09-16 22:21:17] [kasm] [SUCCESS][0m KASM deployment test completed successfully
[0;36m[2025-09-16 22:21:17] [BTPI] [SUCCESS][0m ✅ KASM deployment flow test PASSED
[0;32m[2025-09-16 22:22:12] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-16 22:22:12] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-16 22:22:12] [BTPI] [INFO][0m Deployment ID: 640f7492-bb37-4171-9c23-7070c827e4c4
[0;32m[2025-09-16 22:22:12] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-16 22:22:41] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250916_222212.tar.gz
[0;32m[2025-09-16 22:22:41] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-16 22:22:41] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-16 22:22:41] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-16 22:22:41] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-16 22:22:41] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-16 22:22:41] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-16 22:22:41] [BTPI] [INFO][0m   Available Disk: 158GB
[0;36m[2025-09-16 22:22:41] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-16 22:22:41] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-16 22:22:43] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-16 22:22:43] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-16 22:22:43] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-16 22:22:43] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-16 22:22:43] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-16 22:22:46] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-16 22:22:46] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-16 22:22:46] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-16 22:22:46] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-16 22:22:46] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-16 22:22:46] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-16 22:22:46] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-16 22:22:46] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-16 22:22:46] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-16 22:22:46] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m Docker network 'btpi-network' already exists
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-16 22:22:46] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-16 22:22:46] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-16 22:22:46] [kasm] [INFO][0m Using native KASM installation method
[0;32m[2025-09-16 22:22:46] [KASM] [INFO][0m 🖥️ Setting up KASM Workspaces (Native)...
[0;32m[2025-09-16 22:22:46] [KASM] [INFO][0m -------------------------------------
[0;32m[2025-09-16 22:22:46] [KASM] [INFO][0m 📦 Starting KASM 1.17.0 installation...
[0;32m[2025-09-16 22:22:46] [KASM] [INFO][0m Downloading KASM installation files...
[0;32m[2025-09-16 22:25:25] [KASM] [INFO][0m Extracting KASM installation files...
[0;32m[2025-09-16 22:25:26] [KASM] [INFO][0m Starting KASM installation - this may take several minutes...
[0;36m[2025-09-16 22:38:20] [KASM] [SUCCESS][0m ✅ KASM installation completed successfully!
[0;32m[2025-09-16 22:38:20] [KASM] [INFO][0m Cleaning up installation files...
[0;36m[2025-09-16 22:38:24] [BTPI] [SUCCESS][0m KASM native installation completed - skipping verification
[0;32m[2025-09-16 22:38:24] [BTPI] [INFO][0m KASM services will start automatically in the background
[0;32m[2025-09-16 22:38:24] [BTPI] [INFO][0m Access KASM at: https://localhost:8443 once startup is complete
[0;36m[2025-09-16 22:38:24] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-16 22:38:24] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-16 22:38:24] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-16 22:38:24] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-16 22:38:24] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-16 22:39:12] [elasticsearch] [ERROR][0m Service elasticsearch deployment failed
[0;31m[2025-09-16 22:39:12] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-16 22:39:12] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-16 22:39:12] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-16 22:39:12] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-16 22:39:12] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-16 22:39:14] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-16 22:39:14] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-16 22:39:14] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-16 22:39:14] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;32m[2025-09-16 23:04:06] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-16 23:04:06] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-16 23:04:06] [BTPI] [INFO][0m Deployment ID: 7e509335-0b50-4529-8af7-932181c825a5
[0;32m[2025-09-16 23:04:06] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-16 23:04:36] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250916_230406.tar.gz
[0;32m[2025-09-16 23:04:36] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-16 23:04:37] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-16 23:04:37] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-16 23:04:37] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-16 23:04:37] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-16 23:04:37] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-16 23:04:37] [BTPI] [INFO][0m   Available Disk: 154GB
[0;36m[2025-09-16 23:04:37] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-16 23:04:37] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-16 23:04:38] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-16 23:04:38] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-16 23:04:38] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-16 23:04:38] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-16 23:04:38] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-16 23:04:42] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-16 23:04:42] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-16 23:04:42] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-16 23:04:42] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-16 23:04:42] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-16 23:04:42] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-16 23:04:42] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-16 23:04:42] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-16 23:04:42] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-16 23:04:42] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;36m[2025-09-16 23:04:42] [BTPI] [SUCCESS][0m Docker network 'btpi-network' created
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-16 23:04:42] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-16 23:04:42] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-16 23:04:42] [kasm] [INFO][0m Using native KASM installation method
[0;32m[2025-09-16 23:04:42] [KASM] [INFO][0m 🖥️ Setting up KASM Workspaces (Native)...
[0;32m[2025-09-16 23:04:42] [KASM] [INFO][0m -------------------------------------
[0;32m[2025-09-16 23:04:42] [KASM] [INFO][0m 📦 Starting KASM 1.17.0 installation...
[0;32m[2025-09-16 23:04:42] [KASM] [INFO][0m Downloading KASM installation files...
[0;32m[2025-09-16 23:07:25] [KASM] [INFO][0m Extracting KASM installation files...
[0;32m[2025-09-16 23:07:25] [KASM] [INFO][0m Starting KASM installation - this may take several minutes...
[0;36m[2025-09-16 23:20:25] [KASM] [SUCCESS][0m ✅ KASM installation completed successfully!
[0;32m[2025-09-16 23:20:25] [KASM] [INFO][0m Cleaning up installation files...
[0;36m[2025-09-16 23:20:27] [BTPI] [SUCCESS][0m KASM native installation completed - skipping verification
[0;32m[2025-09-16 23:20:27] [BTPI] [INFO][0m KASM services will start automatically in the background
[0;32m[2025-09-16 23:20:27] [BTPI] [INFO][0m Access KASM at: https://localhost:8443 once startup is complete
[0;36m[2025-09-16 23:20:27] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-16 23:20:27] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-16 23:20:27] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-16 23:20:27] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-16 23:20:27] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-16 23:20:35] [elasticsearch] [ERROR][0m Service elasticsearch deployment failed
[0;31m[2025-09-16 23:20:35] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-16 23:20:35] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-16 23:20:35] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-16 23:20:35] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-16 23:20:35] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-16 23:20:39] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-16 23:20:39] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-16 23:20:39] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-16 23:20:39] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;32m[2025-09-16 23:32:42] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-16 23:32:42] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-16 23:32:42] [BTPI] [INFO][0m Deployment ID: 295e00b4-fa87-454a-8319-8b26dd1d3717
[0;32m[2025-09-16 23:32:42] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-16 23:33:11] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250916_233242.tar.gz
[0;32m[2025-09-16 23:33:11] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-16 23:33:11] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-16 23:33:11] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-16 23:33:11] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-16 23:33:11] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-16 23:33:11] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-16 23:33:11] [BTPI] [INFO][0m   Available Disk: 154GB
[0;36m[2025-09-16 23:33:12] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-16 23:33:12] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-16 23:33:13] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-16 23:33:13] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-16 23:33:13] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-16 23:33:13] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-16 23:33:13] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-16 23:33:16] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-16 23:33:16] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-16 23:33:16] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-16 23:33:16] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-16 23:33:16] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-16 23:33:16] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-16 23:33:16] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-16 23:33:16] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-16 23:33:16] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-16 23:33:16] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-16 23:33:16] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-16 23:33:16] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-16 23:33:16] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-16 23:33:16] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-16 23:33:16] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-16 23:33:16] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-16 23:33:16] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-16 23:33:16] [BTPI] [INFO][0m Creating Docker network: btpi-network
[0;36m[2025-09-16 23:33:17] [BTPI] [SUCCESS][0m Docker network 'btpi-network' created
[0;32m[2025-09-16 23:33:17] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-16 23:33:17] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-16 23:33:17] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-16 23:33:17] [kasm] [INFO][0m Using native KASM installation method
[0;32m[2025-09-16 23:33:17] [KASM] [INFO][0m 🖥️ Setting up KASM Workspaces (Native)...
[0;32m[2025-09-16 23:33:17] [KASM] [INFO][0m -------------------------------------
[0;32m[2025-09-16 23:33:17] [KASM] [INFO][0m 📦 Starting KASM 1.17.0 installation...
[0;32m[2025-09-16 23:33:17] [KASM] [INFO][0m Downloading KASM installation files...
[0;32m[2025-09-16 23:35:58] [KASM] [INFO][0m Extracting KASM installation files...
[0;32m[2025-09-16 23:35:58] [KASM] [INFO][0m Starting KASM installation - this may take several minutes...
[0;36m[2025-09-16 23:48:15] [KASM] [SUCCESS][0m ✅ KASM installation completed successfully!
[0;32m[2025-09-16 23:48:15] [KASM] [INFO][0m Cleaning up installation files...
[0;36m[2025-09-16 23:48:18] [BTPI] [SUCCESS][0m KASM native installation completed - skipping verification
[0;32m[2025-09-16 23:48:18] [BTPI] [INFO][0m KASM services will start automatically in the background
[0;32m[2025-09-16 23:48:18] [BTPI] [INFO][0m Access KASM at: https://localhost:8443 once startup is complete
[0;36m[2025-09-16 23:48:18] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-16 23:48:18] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-16 23:48:18] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-16 23:48:18] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-16 23:48:18] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-16 23:48:25] [elasticsearch] [ERROR][0m Service elasticsearch deployment failed
[0;31m[2025-09-16 23:48:25] [elasticsearch] [ERROR][0m Failed to deploy elasticsearch using modern script
[0;32m[2025-09-16 23:48:25] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-16 23:48:25] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-16 23:48:25] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-16 23:48:25] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-16 23:48:29] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-16 23:48:29] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-16 23:48:29] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-16 23:48:29] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 60s)...
[0;32m[2025-09-17 00:23:36] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-17 00:23:36] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-17 00:23:36] [BTPI] [INFO][0m Deployment ID: 98d53fbd-b36d-43e8-a2f3-1b4b16903b7d
[0;32m[2025-09-17 00:23:36] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-17 00:24:07] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250917_002336.tar.gz
[0;32m[2025-09-17 00:24:07] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-17 00:24:07] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-17 00:24:07] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-17 00:24:07] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-17 00:24:07] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-17 00:24:07] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-17 00:24:07] [BTPI] [INFO][0m   Available Disk: 154GB
[0;36m[2025-09-17 00:24:07] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-17 00:24:07] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-17 00:24:08] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-17 00:24:08] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-17 00:24:08] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-17 00:24:08] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-17 00:24:08] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-17 00:24:11] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-17 00:24:11] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-17 00:24:11] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-17 00:24:11] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-17 00:24:11] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-17 00:24:11] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-17 00:24:11] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-17 00:24:11] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-17 00:24:11] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-17 00:24:11] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-17 00:24:11] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-17 00:24:11] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-17 00:24:12] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;32m[2025-09-17 00:24:12] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-17 00:24:12] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-17 00:24:12] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-17 00:24:12] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-17 00:24:12] [BTPI] [INFO][0m === Setting up Docker networks ===
[0;32m[2025-09-17 00:24:12] [BTPI] [INFO][0m Setting up comprehensive Docker network infrastructure...
[0;32m[2025-09-17 00:24:12] [BTPI] [INFO][0m Running network setup script...
[0;36m[2025-09-17 00:24:13] [BTPI] [SUCCESS][0m Network setup completed successfully
[0;36m[2025-09-17 00:24:13] [BTPI] [SUCCESS][0m Network 'btpi-core-network' is available
[0;36m[2025-09-17 00:24:13] [BTPI] [SUCCESS][0m Network 'btpi-wazuh-network' is available
[0;32m[2025-09-17 00:24:13] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-17 00:24:13] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-17 00:24:13] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-17 00:24:13] [kasm] [INFO][0m Using native KASM installation method
[0;32m[2025-09-17 00:24:13] [KASM] [INFO][0m 🖥️ Setting up KASM Workspaces (Native)...
[0;32m[2025-09-17 00:24:13] [KASM] [INFO][0m -------------------------------------
[0;32m[2025-09-17 00:24:13] [KASM] [INFO][0m 📦 Starting KASM 1.17.0 installation...
[0;32m[2025-09-17 00:24:13] [KASM] [INFO][0m Downloading KASM installation files...
[0;32m[2025-09-17 00:26:57] [KASM] [INFO][0m Extracting KASM installation files...
[0;32m[2025-09-17 00:26:58] [KASM] [INFO][0m Starting KASM installation - this may take several minutes...
[0;36m[2025-09-17 00:39:24] [KASM] [SUCCESS][0m ✅ KASM installation completed successfully!
[0;32m[2025-09-17 00:39:24] [KASM] [INFO][0m Cleaning up installation files...
[0;36m[2025-09-17 00:39:26] [BTPI] [SUCCESS][0m KASM native installation completed - skipping verification
[0;32m[2025-09-17 00:39:26] [BTPI] [INFO][0m KASM services will start automatically in the background
[0;32m[2025-09-17 00:39:26] [BTPI] [INFO][0m Access KASM at: https://localhost:8443 once startup is complete
[0;36m[2025-09-17 00:39:26] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-17 00:39:26] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-17 00:39:26] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-17 00:39:26] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-17 00:39:26] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-17 00:39:32] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-17 00:39:32] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-09-17 01:27:32] [BTPI] [DEBUG][0m Testing Elasticsearch health with credentials: user=elastic, password=3AQi***
[0;34m[2025-09-17 01:27:32] [BTPI] [DEBUG][0m Elasticsearch health response: {"cluster_name":"btpi-cluster","status":"green","timed_out":false,"number_of_nodes":1,"number_of_dat...
[0;34m[2025-09-17 01:27:32] [BTPI] [DEBUG][0m Elasticsearch cluster status: green - HEALTHY
[0;32m[2025-09-17 01:29:47] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-17 01:29:47] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-17 01:29:47] [BTPI] [INFO][0m Deployment ID: 100c4e97-a2bc-4169-afea-db92facdcfa9
[0;32m[2025-09-17 01:29:47] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-17 01:30:18] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250917_012947.tar.gz
[0;32m[2025-09-17 01:30:18] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-17 01:30:18] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-17 01:30:18] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-17 01:30:18] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-17 01:30:18] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-17 01:30:18] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-17 01:30:18] [BTPI] [INFO][0m   Available Disk: 154GB
[0;36m[2025-09-17 01:30:19] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-17 01:30:19] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-17 01:30:20] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-17 01:30:20] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-17 01:30:20] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-17 01:30:20] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-17 01:30:20] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-17 01:30:33] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-17 01:30:33] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-17 01:30:33] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-17 01:30:33] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-17 01:30:33] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-17 01:30:33] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-17 01:30:33] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-17 01:30:33] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-17 01:30:33] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;34m[2025-09-17 01:30:33] [master-deployment] [DEBUG][0m   ELASTIC_PASSWORD: SET
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-17 01:30:33] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m === Setting up Docker networks ===
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m Setting up comprehensive Docker network infrastructure...
[0;32m[2025-09-17 01:30:33] [BTPI] [INFO][0m Running network setup script...
[0;36m[2025-09-17 01:30:35] [BTPI] [SUCCESS][0m Network setup completed successfully
[0;36m[2025-09-17 01:30:35] [BTPI] [SUCCESS][0m Network 'btpi-core-network' is available
[0;36m[2025-09-17 01:30:35] [BTPI] [SUCCESS][0m Network 'btpi-wazuh-network' is available
[0;32m[2025-09-17 01:30:35] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-17 01:30:35] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-17 01:30:35] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-17 01:30:35] [kasm] [INFO][0m Using native KASM installation method
[0;32m[2025-09-17 01:30:35] [KASM] [INFO][0m 🖥️ Setting up KASM Workspaces (Native)...
[0;32m[2025-09-17 01:30:35] [KASM] [INFO][0m -------------------------------------
[0;32m[2025-09-17 01:30:35] [KASM] [INFO][0m 📦 Starting KASM 1.17.0 installation...
[0;32m[2025-09-17 01:30:35] [KASM] [INFO][0m Downloading KASM installation files...
[0;32m[2025-09-17 01:33:17] [KASM] [INFO][0m Extracting KASM installation files...
[0;32m[2025-09-17 01:33:17] [KASM] [INFO][0m Starting KASM installation - this may take several minutes...
[0;36m[2025-09-17 01:51:57] [KASM] [SUCCESS][0m ✅ KASM installation completed successfully!
[0;32m[2025-09-17 01:51:57] [KASM] [INFO][0m Cleaning up installation files...
[0;36m[2025-09-17 01:52:00] [BTPI] [SUCCESS][0m KASM native installation completed - skipping verification
[0;32m[2025-09-17 01:52:00] [BTPI] [INFO][0m KASM services will start automatically in the background
[0;32m[2025-09-17 01:52:00] [BTPI] [INFO][0m Access KASM at: https://localhost:8443 once startup is complete
[0;36m[2025-09-17 01:52:00] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-17 01:52:00] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-17 01:52:00] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-17 01:52:00] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-17 01:52:00] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-17 01:52:06] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-17 01:52:06] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;34m[2025-09-17 02:12:35] [BTPI] [DEBUG][0m Testing Elasticsearch health with credentials: user=elastic, password=3AQi***
[0;34m[2025-09-17 02:12:36] [BTPI] [DEBUG][0m Elasticsearch health response: {"cluster_name":"btpi-cluster","status":"green","timed_out":false,"number_of_nodes":1,"number_of_dat...
[0;34m[2025-09-17 02:12:36] [BTPI] [DEBUG][0m Elasticsearch cluster status: green - HEALTHY
[0;34m[2025-09-17 02:12:44] [BTPI] [DEBUG][0m Testing Elasticsearch health with credentials: user=elastic, password=3AQi***
[0;34m[2025-09-17 02:12:44] [BTPI] [DEBUG][0m Elasticsearch health response: {"cluster_name":"btpi-cluster","status":"green","timed_out":false,"number_of_nodes":1,"number_of_dat...
[0;34m[2025-09-17 02:12:44] [BTPI] [DEBUG][0m Elasticsearch cluster status: green - HEALTHY
[0;34m[2025-09-17 02:13:13] [BTPI] [DEBUG][0m Testing Elasticsearch health with credentials: user=elastic, password=3AQi***
[0;34m[2025-09-17 02:13:13] [BTPI] [DEBUG][0m Elasticsearch health response: {"cluster_name":"btpi-cluster","status":"green","timed_out":false,"number_of_nodes":1,"number_of_dat...
[0;34m[2025-09-17 02:13:13] [BTPI] [DEBUG][0m Elasticsearch cluster status: green - HEALTHY
[0;34m[2025-09-17 02:13:13] [BTPI] [DEBUG][0m Testing Elasticsearch health with credentials: user=elastic, password=3AQi***
[0;34m[2025-09-17 02:13:13] [BTPI] [DEBUG][0m Elasticsearch health response: {"cluster_name":"btpi-cluster","status":"green","timed_out":false,"number_of_nodes":1,"number_of_dat...
[0;34m[2025-09-17 02:13:13] [BTPI] [DEBUG][0m Elasticsearch cluster status: green - HEALTHY
[0;34m[2025-09-17 02:14:20] [BTPI] [DEBUG][0m Testing Elasticsearch health with credentials: user=elastic, password=3AQi***
[0;34m[2025-09-17 02:14:20] [BTPI] [DEBUG][0m Elasticsearch health response: {"cluster_name":"btpi-cluster","status":"green","timed_out":false,"number_of_nodes":1,"number_of_dat...
[0;34m[2025-09-17 02:14:20] [BTPI] [DEBUG][0m Elasticsearch cluster status: green - HEALTHY
[0;34m[2025-09-17 02:14:20] [BTPI] [DEBUG][0m Testing Elasticsearch health with credentials: user=elastic, password=3AQi***
[0;34m[2025-09-17 02:14:20] [BTPI] [DEBUG][0m Elasticsearch health response: {"cluster_name":"btpi-cluster","status":"green","timed_out":false,"number_of_nodes":1,"number_of_dat...
[0;34m[2025-09-17 02:14:20] [BTPI] [DEBUG][0m Elasticsearch cluster status: green - HEALTHY
[0;32m[2025-09-17 02:16:32] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-17 02:16:32] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-17 02:16:32] [BTPI] [INFO][0m Deployment ID: 733533d5-3508-45ed-ba13-f94c0199b64f
[0;32m[2025-09-17 02:16:32] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-17 02:17:03] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250917_021632.tar.gz
[0;32m[2025-09-17 02:17:03] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-17 02:17:03] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-17 02:17:03] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-17 02:17:03] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-17 02:17:03] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-17 02:17:03] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-17 02:17:03] [BTPI] [INFO][0m   Available Disk: 154GB
[0;36m[2025-09-17 02:17:03] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-17 02:17:03] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-17 02:17:04] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-17 02:17:04] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-17 02:17:04] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-17 02:17:04] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-17 02:17:04] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-17 02:17:07] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-17 02:17:07] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-17 02:17:07] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-17 02:17:07] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-17 02:17:07] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-17 02:17:07] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-17 02:17:07] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-17 02:17:07] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-17 02:17:07] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;34m[2025-09-17 02:17:07] [master-deployment] [DEBUG][0m   ELASTIC_PASSWORD: SET
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-17 02:17:07] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m === Setting up Docker networks ===
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m Setting up comprehensive Docker network infrastructure...
[0;32m[2025-09-17 02:17:07] [BTPI] [INFO][0m Running network setup script...
[0;36m[2025-09-17 02:17:09] [BTPI] [SUCCESS][0m Network setup completed successfully
[0;36m[2025-09-17 02:17:09] [BTPI] [SUCCESS][0m Network 'btpi-core-network' is available
[0;36m[2025-09-17 02:17:09] [BTPI] [SUCCESS][0m Network 'btpi-wazuh-network' is available
[0;32m[2025-09-17 02:17:09] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-17 02:17:09] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-17 02:17:09] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-17 02:17:09] [kasm] [INFO][0m Using native KASM installation method
[0;32m[2025-09-17 02:17:09] [KASM] [INFO][0m 🖥️ Setting up KASM Workspaces (Native)...
[0;32m[2025-09-17 02:17:09] [KASM] [INFO][0m -------------------------------------
[0;32m[2025-09-17 02:17:09] [KASM] [INFO][0m 📦 Starting KASM 1.17.0 installation...
[0;32m[2025-09-17 02:17:09] [KASM] [INFO][0m Downloading KASM installation files...
[0;32m[2025-09-17 02:19:49] [KASM] [INFO][0m Extracting KASM installation files...
[0;32m[2025-09-17 02:19:49] [KASM] [INFO][0m Starting KASM installation - this may take several minutes...
[0;36m[2025-09-17 02:30:54] [KASM] [SUCCESS][0m ✅ KASM installation completed successfully!
[0;32m[2025-09-17 02:30:55] [KASM] [INFO][0m Cleaning up installation files...
[0;36m[2025-09-17 02:30:58] [BTPI] [SUCCESS][0m KASM native installation completed - skipping verification
[0;32m[2025-09-17 02:30:58] [BTPI] [INFO][0m KASM services will start automatically in the background
[0;32m[2025-09-17 02:30:58] [BTPI] [INFO][0m Access KASM at: https://localhost:8443 once startup is complete
[0;36m[2025-09-17 02:30:58] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-17 02:30:58] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-17 02:30:58] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-17 02:30:58] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-17 02:30:58] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-17 02:31:04] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-17 02:31:04] [BTPI] [INFO][0m Waiting for elasticsearch to be ready (max 300s)...
[0;32m[2025-09-17 02:39:42] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-17 02:39:42] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-17 02:39:42] [BTPI] [INFO][0m Deployment ID: c4a7aac3-4eab-4e5e-baea-942127b8ac23
[0;32m[2025-09-17 02:39:42] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-17 02:40:13] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250917_023942.tar.gz
[0;32m[2025-09-17 02:40:13] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-17 02:40:13] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-17 02:40:13] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-17 02:40:13] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-17 02:40:13] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-17 02:40:13] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-17 02:40:13] [BTPI] [INFO][0m   Available Disk: 153GB
[0;36m[2025-09-17 02:40:14] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-17 02:40:14] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-17 02:40:15] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-17 02:40:15] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-17 02:40:15] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-17 02:40:15] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-17 02:40:15] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-17 02:40:18] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-17 02:40:18] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-17 02:40:18] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-17 02:40:18] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-17 02:40:18] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-17 02:40:18] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-17 02:40:18] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-17 02:40:18] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-17 02:40:18] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-17 02:40:18] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-17 02:40:18] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-17 02:40:19] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-17 02:40:19] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;34m[2025-09-17 02:40:19] [master-deployment] [DEBUG][0m   ELASTIC_PASSWORD: SET
[0;32m[2025-09-17 02:40:19] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-17 02:40:19] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-17 02:40:19] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-17 02:40:19] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-17 02:40:19] [BTPI] [INFO][0m === Setting up Docker networks ===
[0;32m[2025-09-17 02:40:19] [BTPI] [INFO][0m Setting up comprehensive Docker network infrastructure...
[0;32m[2025-09-17 02:40:19] [BTPI] [INFO][0m Running network setup script...
[0;36m[2025-09-17 02:40:20] [BTPI] [SUCCESS][0m Network setup completed successfully
[0;36m[2025-09-17 02:40:20] [BTPI] [SUCCESS][0m Network 'btpi-core-network' is available
[0;36m[2025-09-17 02:40:20] [BTPI] [SUCCESS][0m Network 'btpi-wazuh-network' is available
[0;32m[2025-09-17 02:40:20] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-17 02:40:20] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-17 02:40:20] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-17 02:40:20] [kasm] [INFO][0m Using native KASM installation method
[0;32m[2025-09-17 02:40:20] [KASM] [INFO][0m 🖥️ Setting up KASM Workspaces (Native)...
[0;32m[2025-09-17 02:40:20] [KASM] [INFO][0m -------------------------------------
[0;32m[2025-09-17 02:40:20] [KASM] [INFO][0m 📦 Starting KASM 1.17.0 installation...
[0;32m[2025-09-17 02:40:20] [KASM] [INFO][0m Downloading KASM installation files...
[0;32m[2025-09-17 02:43:00] [KASM] [INFO][0m Extracting KASM installation files...
[0;32m[2025-09-17 02:43:00] [KASM] [INFO][0m Starting KASM installation - this may take several minutes...
[0;36m[2025-09-17 02:53:50] [KASM] [SUCCESS][0m ✅ KASM installation completed successfully!
[0;32m[2025-09-17 02:53:50] [KASM] [INFO][0m Cleaning up installation files...
[0;36m[2025-09-17 02:53:52] [BTPI] [SUCCESS][0m KASM native installation completed - skipping verification
[0;32m[2025-09-17 02:53:52] [BTPI] [INFO][0m KASM services will start automatically in the background
[0;32m[2025-09-17 02:53:52] [BTPI] [INFO][0m Access KASM at: https://localhost:8443 once startup is complete
[0;36m[2025-09-17 02:53:52] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-17 02:53:52] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-17 02:53:52] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-17 02:53:52] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-17 02:53:52] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-17 02:54:01] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-17 02:54:01] [BTPI] [INFO][0m Skipping Elasticsearch health checks to ensure deployment proceeds
[0;36m[2025-09-17 02:54:01] [BTPI] [SUCCESS][0m Elasticsearch deployment marked as complete - health checks bypassed
[0;36m[2025-09-17 02:54:01] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-17 02:54:01] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-17 02:54:01] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-17 02:54:01] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-17 02:54:01] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-17 02:59:10] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-17 02:59:10] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-17 02:59:10] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-17 02:59:10] [BTPI] [INFO][0m Skipping Elasticsearch health checks to ensure deployment proceeds
[0;36m[2025-09-17 02:59:10] [BTPI] [SUCCESS][0m Elasticsearch deployment marked as complete - health checks bypassed
[0;32m[2025-09-17 02:59:10] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-17 02:59:10] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;36m[2025-09-17 02:59:10] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-17 02:59:12] [wazuh-indexer] [SUCCESS][0m Service wazuh-indexer deployed successfully
[0;32m[2025-09-17 02:59:12] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 300s)...
[0;32m[2025-09-17 03:22:10] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-09-17 03:22:10] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-09-17 03:22:10] [BTPI] [INFO][0m Deployment ID: fe0ec943-e036-41b2-a2a1-ae14fcb2a072
[0;32m[2025-09-17 03:22:10] [BTPI] [INFO][0m Backing up existing deployment...
[0;36m[2025-09-17 03:22:40] [BTPI] [SUCCESS][0m Backup created: /home/cmndcntrl/code/btpi-react/backups/btpi-backup-20250917_032210.tar.gz
[0;32m[2025-09-17 03:22:40] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-09-17 03:22:40] [BTPI] [INFO][0m Docker found: Docker version 28.4.0, build d8eb465
[0;32m[2025-09-17 03:22:40] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-09-17 03:22:40] [BTPI] [INFO][0m System Resources:
[0;32m[2025-09-17 03:22:40] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-09-17 03:22:40] [BTPI] [INFO][0m   Memory: 26GB
[0;32m[2025-09-17 03:22:40] [BTPI] [INFO][0m   Available Disk: 153GB
[0;36m[2025-09-17 03:22:41] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-09-17 03:22:41] [BTPI] [INFO][0m Checking for port conflicts...
[0;36m[2025-09-17 03:22:42] [BTPI] [SUCCESS][0m No port conflicts detected
[0;32m[2025-09-17 03:22:42] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-09-17 03:22:42] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-09-17 03:22:42] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-09-17 03:22:42] [BTPI] [INFO][0m Installing additional system packages...
[0;36m[2025-09-17 03:22:45] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m Applying system optimizations...
[0;36m[2025-09-17 03:22:45] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-09-17 03:22:45] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m Generating environment configuration...
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m Environment configuration already exists
[0;32m[2025-09-17 03:22:45] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-09-17 03:22:45] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-09-17 03:22:45] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-09-17 03:22:45] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-09-17 03:22:45] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.184
[0;34m[2025-09-17 03:22:45] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.0.1
[0;34m[2025-09-17 03:22:45] [master-deployment] [DEBUG][0m   ELASTIC_PASSWORD: SET
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m Generating SSL certificates...
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m SSL certificates already exist
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-09-17 03:22:45] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m === Setting up Docker networks ===
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m Setting up comprehensive Docker network infrastructure...
[0;32m[2025-09-17 03:22:45] [BTPI] [INFO][0m Running network setup script...
[0;36m[2025-09-17 03:22:48] [BTPI] [SUCCESS][0m Network setup completed successfully
[0;36m[2025-09-17 03:22:48] [BTPI] [SUCCESS][0m Network 'btpi-core-network' is available
[0;36m[2025-09-17 03:22:48] [BTPI] [SUCCESS][0m Network 'btpi-wazuh-network' is available
[0;32m[2025-09-17 03:22:48] [BTPI] [INFO][0m === Beginning service deployment phase ===
[0;32m[2025-09-17 03:22:48] [BTPI] [INFO][0m Deploying services: kasm elasticsearch cassandra wazuh-indexer wazuh-manager velociraptor nginx portainer 
[0;32m[2025-09-17 03:22:48] [kasm] [INFO][0m === Deploying kasm ===
[0;32m[2025-09-17 03:22:48] [kasm] [INFO][0m Using native KASM installation method
[0;32m[2025-09-17 03:22:48] [KASM] [INFO][0m 🖥️ Setting up KASM Workspaces (Native)...
[0;32m[2025-09-17 03:22:48] [KASM] [INFO][0m -------------------------------------
[0;32m[2025-09-17 03:22:48] [KASM] [INFO][0m 📦 Starting KASM 1.17.0 installation...
[0;32m[2025-09-17 03:22:48] [KASM] [INFO][0m Downloading KASM installation files...
[0;32m[2025-09-17 03:25:34] [KASM] [INFO][0m Extracting KASM installation files...
[0;32m[2025-09-17 03:25:34] [KASM] [INFO][0m Starting KASM installation - this may take several minutes...
[0;36m[2025-09-17 03:51:23] [KASM] [SUCCESS][0m ✅ KASM installation completed successfully!
[0;32m[2025-09-17 03:51:23] [KASM] [INFO][0m Cleaning up installation files...
[0;36m[2025-09-17 03:51:25] [BTPI] [SUCCESS][0m KASM native installation completed - skipping verification
[0;32m[2025-09-17 03:51:25] [BTPI] [INFO][0m KASM services will start automatically in the background
[0;32m[2025-09-17 03:51:25] [BTPI] [INFO][0m Access KASM at: https://localhost:8443 once startup is complete
[0;36m[2025-09-17 03:51:25] [kasm] [SUCCESS][0m Service kasm deployment completed
[0;32m[2025-09-17 03:51:25] [elasticsearch] [INFO][0m === Deploying elasticsearch ===
[0;32m[2025-09-17 03:51:25] [elasticsearch] [INFO][0m Using modern deployment script for elasticsearch
[0;32m[2025-09-17 03:51:25] [elasticsearch] [INFO][0m Deploying service: elasticsearch
[0;36m[2025-09-17 03:51:25] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-17 03:51:33] [elasticsearch] [SUCCESS][0m Service elasticsearch deployed successfully
[0;32m[2025-09-17 03:51:33] [BTPI] [INFO][0m Skipping Elasticsearch health checks to ensure deployment proceeds
[0;36m[2025-09-17 03:51:33] [BTPI] [SUCCESS][0m Elasticsearch deployment marked as complete - health checks bypassed
[0;36m[2025-09-17 03:51:33] [elasticsearch] [SUCCESS][0m Service elasticsearch deployment completed
[0;32m[2025-09-17 03:51:33] [cassandra] [INFO][0m === Deploying cassandra ===
[0;32m[2025-09-17 03:51:33] [cassandra] [INFO][0m Using modern deployment script for cassandra
[0;32m[2025-09-17 03:51:33] [cassandra] [INFO][0m Deploying service: cassandra
[0;36m[2025-09-17 03:51:33] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-17 03:56:41] [cassandra] [ERROR][0m Service cassandra deployment failed
[0;31m[2025-09-17 03:56:41] [cassandra] [ERROR][0m Failed to deploy cassandra using modern script
[0;32m[2025-09-17 03:56:41] [wazuh-indexer] [INFO][0m === Deploying wazuh-indexer ===
[0;32m[2025-09-17 03:56:41] [BTPI] [INFO][0m Skipping Elasticsearch health checks to ensure deployment proceeds
[0;36m[2025-09-17 03:56:41] [BTPI] [SUCCESS][0m Elasticsearch deployment marked as complete - health checks bypassed
[0;32m[2025-09-17 03:56:41] [wazuh-indexer] [INFO][0m Using modern deployment script for wazuh-indexer
[0;32m[2025-09-17 03:56:41] [wazuh-indexer] [INFO][0m Deploying service: wazuh-indexer
[0;36m[2025-09-17 03:56:41] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-17 03:56:43] [wazuh-indexer] [SUCCESS][0m Service wazuh-indexer deployed successfully
[0;32m[2025-09-17 03:56:43] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 300s)...
[0;36m[2025-09-17 03:56:43] [BTPI] [SUCCESS][0m wazuh-indexer is already healthy - skipping wait
[0;36m[2025-09-17 03:56:43] [wazuh-indexer] [SUCCESS][0m Service wazuh-indexer deployment completed
[0;32m[2025-09-17 03:56:43] [wazuh-manager] [INFO][0m === Deploying wazuh-manager ===
[0;32m[2025-09-17 03:56:43] [BTPI] [INFO][0m Waiting for wazuh-indexer to be ready (max 60s)...
[0;36m[2025-09-17 03:56:43] [BTPI] [SUCCESS][0m wazuh-indexer is already healthy - skipping wait
[0;32m[2025-09-17 03:56:43] [wazuh-manager] [INFO][0m Using modern deployment script for wazuh-manager
[0;32m[2025-09-17 03:56:43] [wazuh-manager] [INFO][0m Deploying service: wazuh-manager
[0;36m[2025-09-17 03:56:43] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-17 03:57:48] [wazuh-manager] [SUCCESS][0m Service wazuh-manager deployed successfully
[0;32m[2025-09-17 03:57:48] [BTPI] [INFO][0m Waiting for wazuh-manager to be ready (max 300s)...
[0;36m[2025-09-17 03:57:48] [BTPI] [SUCCESS][0m wazuh-manager is already healthy - skipping wait
[0;36m[2025-09-17 03:57:48] [wazuh-manager] [SUCCESS][0m Service wazuh-manager deployment completed
[0;32m[2025-09-17 03:57:48] [velociraptor] [INFO][0m === Deploying velociraptor ===
[0;32m[2025-09-17 03:57:48] [velociraptor] [INFO][0m Using modern deployment script for velociraptor
[0;32m[2025-09-17 03:57:48] [velociraptor] [INFO][0m Deploying service: velociraptor
[0;36m[2025-09-17 03:57:48] [BTPI] [SUCCESS][0m Environment validation completed
[0;31m[2025-09-17 03:57:50] [velociraptor] [ERROR][0m Service velociraptor deployment failed
[0;31m[2025-09-17 03:57:50] [velociraptor] [ERROR][0m Failed to deploy velociraptor using modern script
[0;32m[2025-09-17 03:57:50] [nginx] [INFO][0m === Deploying nginx ===
[0;32m[2025-09-17 03:57:50] [BTPI] [INFO][0m Waiting for wazuh-manager to be ready (max 60s)...
[0;36m[2025-09-17 03:57:50] [BTPI] [SUCCESS][0m wazuh-manager is already healthy - skipping wait
[0;32m[2025-09-17 03:57:50] [BTPI] [INFO][0m Waiting for velociraptor to be ready (max 60s)...
[0;31m[2025-09-17 03:58:51] [BTPI] [ERROR][0m velociraptor container is not running or doesn't exist
[0;31m[2025-09-17 03:58:51] [BTPI] [ERROR][0m Dependency velociraptor not ready for nginx
[0;32m[2025-09-17 03:58:51] [portainer] [INFO][0m === Deploying portainer ===
[0;32m[2025-09-17 03:58:51] [portainer] [INFO][0m Using modern deployment script for portainer
[0;32m[2025-09-17 03:58:51] [portainer] [INFO][0m Deploying service: portainer
[0;36m[2025-09-17 03:58:51] [BTPI] [SUCCESS][0m Environment validation completed
[0;36m[2025-09-17 03:59:08] [portainer] [SUCCESS][0m Service portainer deployed successfully
[0;32m[2025-09-17 03:59:08] [BTPI] [INFO][0m Waiting for portainer to be ready (max 300s)...
[0;36m[2025-09-17 03:59:08] [BTPI] [SUCCESS][0m portainer is already healthy - skipping wait
[0;36m[2025-09-17 03:59:08] [portainer] [SUCCESS][0m Service portainer deployment completed
[0;32m[2025-09-17 03:59:08] [BTPI] [INFO][0m === Beginning integration configuration phase ===
[0;32m[2025-09-17 03:59:08] [BTPI] [INFO][0m Configuring service integrations...
[0;36m[2025-09-17 03:59:08] [BTPI] [SUCCESS][0m Service integrations configured
[0;32m[2025-09-17 03:59:08] [BTPI] [INFO][0m === Beginning testing phase ===
[0;32m[2025-09-17 03:59:08] [BTPI] [INFO][0m Running deployment tests...
[0;32m[2025-09-17 03:59:08] [BTPI] [INFO][0m Running comprehensive integration tests...
[1;33m[2025-09-17 03:59:08] [BTPI] [WARN][0m Some integration tests failed
[0;32m[2025-09-17 03:59:08] [BTPI] [INFO][0m Generating deployment report...
[0;36m[2025-09-17 03:59:08] [BTPI] [SUCCESS][0m Deployment report saved to: /home/cmndcntrl/code/btpi-react/logs/deployment_report_20250912_045647.txt
[1;33m[2025-09-17 03:59:08] [BTPI] [WARN][0m BTPI-REACT deployment completed with warnings
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m Starting BTPI-REACT deployment v2.1.0
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m Deployment mode: full
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m Deployment ID: da8a6bc3-1528-4965-a537-3b71ed16a821
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m Running comprehensive pre-deployment checks...
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m Docker found: Docker version 28.5.0, build 887030f
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m Checking system requirements...
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m System Resources:
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m   CPU Cores: 8
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m   Memory: 31GB
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m   Available Disk: 182GB
[0;36m[2025-10-03 20:25:38] [BTPI] [SUCCESS][0m System requirements check passed
[0;32m[2025-10-03 20:25:38] [BTPI] [INFO][0m Checking for port conflicts...
[0;34m[2025-10-03 20:25:39] [BTPI] [DEBUG][0m Validating existing nginx service on port 443...
[0;34m[2025-10-03 20:25:39] [BTPI] [DEBUG][0m No healthy nginx found - port conflict remains
[1;33m[2025-10-03 20:25:39] [BTPI] [WARN][0m Port 443 is already in use by docker-pr (required for nginx)
[0;31m[2025-10-03 20:25:41] [BTPI] [ERROR][0m Found 1 port conflicts
[1;33m[2025-10-03 20:25:41] [BTPI] [WARN][0m Port conflicts detected - consider resolving before deployment
[0;32m[2025-10-03 20:25:48] [BTPI] [INFO][0m Testing internet connectivity...
[0;36m[2025-10-03 20:25:48] [BTPI] [SUCCESS][0m IPv4 connectivity confirmed
[0;36m[2025-10-03 20:25:48] [BTPI] [SUCCESS][0m Pre-deployment checks completed
[0;32m[2025-10-03 20:25:48] [BTPI] [INFO][0m Installing additional system packages...
[0;32m[2025-10-03 20:26:07] [BTPI] [INFO][0m Installing Docker Compose standalone...
[0;36m[2025-10-03 20:26:09] [BTPI] [SUCCESS][0m System packages installed
[0;32m[2025-10-03 20:26:09] [BTPI] [INFO][0m Applying system optimizations...
[0;32m[2025-10-03 20:26:09] [BTPI] [INFO][0m Configuring Docker daemon...
[0;36m[2025-10-03 20:26:44] [BTPI] [SUCCESS][0m System optimizations applied
[0;32m[2025-10-03 20:26:44] [BTPI] [INFO][0m Initializing directory structure...
[0;36m[2025-10-03 20:26:44] [BTPI] [SUCCESS][0m Directory structure initialized
[0;32m[2025-10-03 20:26:44] [BTPI] [INFO][0m Generating environment configuration...
[0;36m[2025-10-03 20:26:44] [BTPI] [SUCCESS][0m Environment configuration generated
[0;32m[2025-10-03 20:26:44] [master-deployment] [INFO][0m Validating environment configuration...
[0;36m[2025-10-03 20:26:44] [master-deployment] [SUCCESS][0m All required environment variables are present
[0;34m[2025-10-03 20:26:44] [master-deployment] [DEBUG][0m Current environment values:
[0;34m[2025-10-03 20:26:44] [master-deployment] [DEBUG][0m   BTPI_NETWORK: btpi-network
[0;34m[2025-10-03 20:26:44] [master-deployment] [DEBUG][0m   SERVER_IP: 192.168.1.112
[0;34m[2025-10-03 20:26:44] [master-deployment] [DEBUG][0m   BTPI_VERSION: 2.1.0
[0;34m[2025-10-03 20:26:44] [master-deployment] [DEBUG][0m   ELASTIC_PASSWORD: SET
[0;32m[2025-10-03 20:26:44] [BTPI] [INFO][0m Generating SSL certificates...
[0;36m[2025-10-03 20:26:51] [BTPI] [SUCCESS][0m SSL certificates generated
[0;32m[2025-10-03 20:26:51] [BTPI] [INFO][0m Updating /etc/hosts for local domain resolution...
[0;36m[2025-10-03 20:26:51] [BTPI] [SUCCESS][0m /etc/hosts updated
[0;32m[2025-10-03 20:26:51] [BTPI] [INFO][0m === Setting up Docker networks ===
[0;32m[2025-10-03 20:26:51] [BTPI] [INFO][0m Setting up comprehensive Docker network infrastructure...
[0;32m[2025-10-03 20:26:51] [BTPI] [INFO][0m Running network setup script...
